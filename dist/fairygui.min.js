"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fgui;!function(t){function e(t){switch(t){case"visible":return 0;case"hidden":return 1;case"scroll":return 2;case"scale":return 3;case"scaleFree":return 4;default:return 0}}function i(t){switch(t){case"horizontal":return 0;case"vertical":return 1;case"both":return 2;default:return 1}}function n(t){switch(t){case"none":return 0;case"scale":return 1;case"scaleMatchHeight":return 2;case"scaleMatchWidth":return 3;case"scaleFree":return 4;default:return 0}}function s(t){switch(t){case"column":return 0;case"row":return 1;case"flow_hz":return 2;case"flow_vt":return 3;case"pagination":return 4;default:return 0}}function r(t){switch(t){case"single":return 0;case"multiple":return 1;case"multipleSingleClick":return 2;case"none":return 3;default:return 0}}function o(t){switch(t){case"image":return 0;case"movieclip":return 2;case"sound":return 3;case"component":return 4;case"swf":return 1;case"font":return 6;case"atlas":return 7;default:return 5}}function h(t){switch(t){case"percent":return 0;case"valueAndmax":return 1;case"value":return 2;case"max":return 3;default:return 0}}function a(t){switch(t){case"default":return 0;case"visible":return 1;case"auto":return 2;case"hidden":return 3;default:return 0}}function l(t){switch(t){case"hz":return 1;case"vt":return 2;case"both":return 3;default:return 0}}function c(t){switch(t){case"Common":return 0;case"Check":return 1;case"Radio":return 2;default:return 0}}function u(t){switch(t){case"none":return 0;case"both":return 1;case"height":return 2;case"shrink":return 3;default:return 0}}function p(t){switch(t){case"left":return"left";case"center":return"center";case"right":return"right";default:return"left"}}function $(t){switch(t){case"top":return 0;case"middle":return 1;case"bottom":return 2;default:return 0}}function d(t){switch(t){case"ascent":return 0;case"descent":return 1;case"arch":return 2;default:return 0}}function f(t){return v[t]||v.linear}var g=window,y=!(!g.PointerEvent&&!g.MSPointerEvent),m="ontouchstart"in window&&PIXI.utils.isMobile.any,b=function(){function t(){}return t.Down=y?"pointerdown":m?"touchstart":"mousedown",t.Cancel=y?"pointercancel":m?"touchcancel":"mousecancel",t.Up=y?"pointerup":m?"touchend":"mouseup",t.Click=y?"pointertap":m?"tap":"click",t.UpOutside=y?"pointerupoutside":m?"touchendoutside":"mouseupoutside",t.Move=y?"pointermove":m?"touchmove":"mousemove",t.Over=y?"pointerover":m?null:"mouseover",t.Out=y?"pointerout":m?null:"mouseout",t.RightDown="rightdown",t.RightUp="rightup",t.RightClick="rightclick",t.RightUpOutside="rightupoutside",t}();t.InteractiveEvents=b,t.GearXMLNodeNameMap={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7},t.BlendModeMap=["Normal","Add","Multiply","Screen","Overlay","Darken","Lighten","ColorDodge","ColorBurn","HardLight","SoftLight","Difference","Exclusion","Hue","Saturation","Color","Luminosity","NormalNPM","AddNPM","ScreenNPM"],t.ParseOverflowType=e,t.ParseScrollType=i,t.ParseLoaderFillType=n,t.ParseListLayoutType=s,t.ParseListSelectionMode=r,t.ParsePackageItemType=o,t.ParseProgressTitleType=h,t.ParseScrollBarDisplayType=a,t.ParseFlipType=l,t.ParseButtonMode=c,t.ParseAutoSizeType=u,t.ParseAlignType=p,t.ParseVertAlignType=$,t.ParseListChildrenRenderOrder=d;var v={Linear:createjs.Ease.linear,"Elastic.In":createjs.Ease.elasticIn,"Elastic.Out":createjs.Ease.elasticOut,"Elastic.InOut":createjs.Ease.elasticInOut,"Quad.In":createjs.Ease.quadIn,"Quad.Out":createjs.Ease.quadOut,"Quad.InOut":createjs.Ease.quadInOut,"Cube.In":createjs.Ease.cubicIn,"Cube.Out":createjs.Ease.cubicOut,"Cube.InOut":createjs.Ease.cubicInOut,"Quart.In":createjs.Ease.quartIn,"Quart.Out":createjs.Ease.quartOut,"Quart.InOut":createjs.Ease.quartInOut,"Quint.In":createjs.Ease.quintIn,"Quint.Out":createjs.Ease.quintOut,"Quint.InOut":createjs.Ease.quintInOut,"Sine.In":createjs.Ease.sineIn,"Sine.Out":createjs.Ease.sineOut,"Sine.InOut":createjs.Ease.sineInOut,"Bounce.In":createjs.Ease.bounceIn,"Bounce.Out":createjs.Ease.bounceOut,"Bounce.InOut":createjs.Ease.bounceInOut,"Circ.In":createjs.Ease.circIn,"Circ.Out":createjs.Ease.circOut,"Circ.InOut":createjs.Ease.circInOut,"Expo.In":createjs.Ease.quartIn,"Expo.Out":createjs.Ease.quartOut,"Expo.InOut":createjs.Ease.quartInOut,"Back.In":createjs.Ease.backIn,"Back.Out":createjs.Ease.backOut,"Back.InOut":createjs.Ease.backInOut};t.ParseEaseType=f}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(){this.$x=0,this.$y=0,this.$width=0,this.$height=0,this.$alpha=1,this.$rotation=0,this.$visible=!0,this.$touchable=!0,this.$grayed=!1,this.$draggable=!1,this.$scaleX=1,this.$scaleY=1,this.$skewX=0,this.$skewY=0,this.$pivot=new PIXI.Point,this.$pivotAsAnchor=!1,this.$pivotOffset=new PIXI.Point,this.$sortingOrder=0,this.$internalVisible=!0,this.$focusable=!1,this.$pixelSnapping=!1,this.$handlingController=!1,this.$lastColorComponents=null,this.$rawWidth=0,this.$rawHeight=0,this.$initWidth=0,this.$initHeight=0,this.$sourceWidth=0,this.$sourceHeight=0,this.$id=""+e.gInstanceCounter++,this.$name="",this.createDisplayObject(),this.$relations=new t.Relations(this),this.$gears=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.$x},set:function(t){this.setXY(t,this.$y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.$y},set:function(t){this.setXY(this.$x,t)},enumerable:!0,configurable:!0}),e.prototype.setXY=function(t,i){this.$x==t&&this.$y==i||(this.$x=t,this.$y=i,this.handleXYChanged(),this.updateGear(1),this.$parent&&(this.$parent.setBoundsChangedFlag(),this.$displayObject.emit("__xyChanged",this)),e.draggingObject!=this||e.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,e.sGlobalRect))},Object.defineProperty(e.prototype,"pixelSnapping",{get:function(){return this.$pixelSnapping},set:function(t){this.$pixelSnapping!=t&&(this.$pixelSnapping=t,this.handleXYChanged())},enumerable:!0,configurable:!0}),e.prototype.center=function(t){void 0===t&&(t=!1);var e;e=null!=this.$parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10))},Object.defineProperty(e.prototype,"width",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$width},set:function(t){this.setSize(t,this.$rawHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.ensureSizeCorrect(),this.$relations.sizeDirty&&this.$relations.ensureRelationsSizeCorrect(),this.$height},set:function(t){this.setSize(this.$rawWidth,t)},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e,i){if(void 0===i&&(i=!1),this.$rawWidth!=t||this.$rawHeight!=e){this.$rawWidth=t,this.$rawHeight=e,t=Math.max(0,t),e=Math.max(0,e);var n=t-this.mapPivotWidth(1),s=e-this.mapPivotHeight(1);this.$width=t,this.$height=e,this.handleSizeChanged(),0==this.$pivot.x&&0==this.$pivot.y||(this.$pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this.$pivot.x*n,this.y-this.$pivot.y*s),this.updatePivotOffset())),this.updateGear(2),this.$parent&&(this.$relations.onOwnerSizeChanged(n,s),this.$parent.setBoundsChangedFlag()),this.$displayObject.emit("__sizeChanged",this)}},e.prototype.ensureSizeCorrect=function(){},Object.defineProperty(e.prototype,"sourceHeight",{get:function(){return this.$sourceHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceWidth",{get:function(){return this.$sourceWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initHeight",{get:function(){return this.$initHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initWidth",{get:function(){return this.$initWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualWidth",{get:function(){return this.width*Math.abs(this.$scaleX)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualHeight",{get:function(){return this.height*Math.abs(this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.$scaleX},set:function(t){this.setScale(t,this.$scaleY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.$scaleY},set:function(t){this.setScale(this.$scaleX,t)},enumerable:!0,configurable:!0}),e.prototype.setScale=function(t,e){this.$scaleX==t&&this.$scaleY==e||(this.$scaleX=t,this.$scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},Object.defineProperty(e.prototype,"skewX",{get:function(){return this.$skewX},set:function(t){this.setSkew(t,this.$skewY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skewY",{get:function(){return this.$skewY},set:function(t){this.setSkew(this.$skewX,t)},enumerable:!0,configurable:!0}),e.prototype.setSkew=function(e,i){this.$skewX==e&&this.$skewY==i||(this.$skewX=e,this.$skewY=i,this.$displayObject.skew.set(e*-t.utils.NumberUtil.RADIAN,i*t.utils.NumberUtil.RADIAN),this.applyPivot())},e.prototype.mapPivotWidth=function(t){return t*this.$width},e.prototype.mapPivotHeight=function(t){return t*this.$height},Object.defineProperty(e.prototype,"pivotX",{get:function(){return this.$pivot.x},set:function(t){this.setPivot(t,this.pivotY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivotY",{get:function(){return this.$pivot.y},set:function(t){this.setPivot(this.pivotX,t)},enumerable:!0,configurable:!0}),e.prototype.setPivot=function(t,e,i){void 0===i&&(i=!1),this.$pivot.x==t&&this.$pivot.y==e&&this.$pivotAsAnchor==i||(this.$pivot.set(t,e),this.$pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},e.prototype.internalSetPivot=function(t,e,i){this.$pivot.set(t,e),this.$pivotAsAnchor=i,i&&this.handleXYChanged()},e.prototype.updatePivotOffset=function(){if(0!=this.$pivot.x||0!=this.$pivot.y&&this.$displayObject.transform){var t=this.mapPivotWidth(this.$pivot.x),i=this.mapPivotHeight(this.$pivot.y);e.sHelperPoint.set(t,i),this.$displayObject.transform.updateLocalTransform();var n=this.$displayObject.localTransform,s=n.apply(e.sHelperPoint,e.sHelperPoint);s.x-=n.tx,s.y-=n.ty,this.$pivotOffset.set(this.$pivot.x*this.$width-s.x,this.$pivot.y*this.$height-s.y)}else this.$pivotOffset.set(0,0)},e.prototype.applyPivot=function(){0==this.$pivot.x&&0==this.$pivot.y||(this.updatePivotOffset(),this.handleXYChanged())},Object.defineProperty(e.prototype,"touchable",{get:function(){return this.$touchable},set:function(t){this.$touchable=t,this.$displayObject.interactive=this.$touchable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grayed",{get:function(){return this.$grayed},set:function(t){this.$grayed!=t&&(this.$grayed=t,this.handleGrayedChanged(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return!this.$grayed&&this.$touchable},set:function(t){this.grayed=!t,this.touchable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.$rotation},set:function(e){this.$rotation!=e&&(this.$rotation=e,this.$displayObject&&(this.$displayObject.rotation=t.utils.NumberUtil.angleToRadian(this.normalizeRotation)),this.applyPivot(),this.updateGear(3))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalizeRotation",{get:function(){var t=this.$rotation%360;return t>180?t-=360:-180>t&&(t+=360),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.$alpha},set:function(t){this.$alpha!=t&&(this.$alpha=t,this.updateAlpha())},enumerable:!0,configurable:!0}),e.prototype.updateAlpha=function(){this.$displayObject&&(this.$displayObject.alpha=this.$alpha),this.updateGear(3)},Object.defineProperty(e.prototype,"visible",{get:function(){return this.$visible},set:function(t){this.$visible!=t&&(this.$visible=t,this.$displayObject&&(this.$displayObject.visible=this.$visible),this.$parent&&(this.$parent.childStateChanged(this),this.$parent.setBoundsChangedFlag()),this.emit("__visibleChanged",this.$visible,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"internalVisible",{get:function(){return this.$internalVisible},set:function(t){t!=this.$internalVisible&&(this.$internalVisible=t,this.$parent&&this.$parent.childStateChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalVisible",{get:function(){return this.$visible&&this.$internalVisible&&(!this.$group||this.$group.finalVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortingOrder",{get:function(){return this.$sortingOrder},set:function(t){if(0>t&&(t=0),this.$sortingOrder!=t){var e=this.$sortingOrder;this.$sortingOrder=t,null!=this.$parent&&this.$parent.childSortingOrderChanged(this,e,this.$sortingOrder)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this.$focusable},set:function(t){this.$focusable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.root.focus==this},enumerable:!0,configurable:!0}),e.prototype.requestFocus=function(){for(var t=this;t&&!t.$focusable;)t=t.parent;null!=t&&(this.root.focus=t)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this.$tooltips},set:function(t){this.$tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.$displayObject&&this.$displayObject instanceof PIXI.Sprite?t.BlendModeMap[this.$displayObject.blendMode]||"None":t.BlendModeMap[0]},set:function(e){if(e&&e.length&&this.$displayObject&&this.$displayObject instanceof PIXI.Sprite)for(var i=0;i<t.BlendModeMap.length;i++)if(t.BlendModeMap[i].toLowerCase()===e.toLowerCase())return void(this.$displayObject.blendMode=i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this.$displayObject.filters},set:function(t){this.$displayObject.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inContainer",{get:function(){return null!=this.$displayObject.parent},enumerable:!0,configurable:!0}),e.isDisplayObjectOnStage=function(e){if(!e||!e.parent)return!1;for(var i=e;null!=i;){if(i==t.GRoot.inst.nativeStage)return!0;i=i.parent}return!1},Object.defineProperty(e.prototype,"onStage",{get:function(){return e.isDisplayObjectOnStage(this.$displayObject)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceURL",{get:function(){return null!=this.packageItem?"{ui://"+this.packageItem.owner.id+this.packageItem.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this.$group},set:function(t){this.$group=t},enumerable:!0,configurable:!0}),e.prototype.getGear=function(e){var i=this.$gears[e];if(null==i){switch(e){case 0:i=new t.GearDisplay(this);break;case 1:i=new t.GearXY(this);break;case 2:i=new t.GearSize(this);break;case 3:i=new t.GearLook(this);break;case 4:if(!t.isColorGear(this))throw new Error("Invalid component type to add GearColor feature, please check the component named "+this.$name+" in the Editor.");i=new t.GearColor(this);break;case 5:if(!t.isAnimationGear(this))throw new Error("Invalid component type to add GearAnimation feature, please check the component named "+this.$name+" in the Editor.");i=new t.GearAnimation(this);break;case 6:i=new t.GearText(this);break;case 7:i=new t.GearIcon(this);break;default:throw new Error("FGUI: invalid gear type")}this.$gears[e]=i}return i},e.prototype.updateGear=function(t){null!=this.$gears[t]&&this.$gears[t].updateState()},e.prototype.updateGearFromRelations=function(t,e,i){null!=this.$gears[t]&&this.$gears[t].updateFromRelations(e,i)},e.prototype.hasGearController=function(t,e){return this.$gears[t]&&this.$gears[t].controller==e},e.prototype.lockGearDisplay=function(){var t=this.$gears[0];if(t&&t.controller){var e=t.lock();return this.checkGearVisible(),e}return 0},e.prototype.releaseGearDisplay=function(t){var e=this.$gears[0];e&&e.controller&&(e.release(t),this.checkGearVisible())},e.prototype.checkGearVisible=function(){if(!this.$handlingController){var t=this.$gears[0],e=!t||t.connected;e!=this.$internalVisible&&(this.$internalVisible=e,this.$parent&&this.$parent.childStateChanged(this))}},Object.defineProperty(e.prototype,"gearXY",{get:function(){return this.getGear(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gearSize",{get:function(){return this.getGear(2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gearLook",{get:function(){return this.getGear(3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relations",{get:function(){return this.$relations},enumerable:!0,configurable:!0}),e.prototype.addRelation=function(t,e,i){void 0===i&&(i=!1),this.$relations.add(t,e,i)},e.prototype.removeRelation=function(t,e){void 0===e&&(e=0),this.$relations.remove(t,e)},Object.defineProperty(e.prototype,"displayObject",{get:function(){return this.$displayObject},enumerable:!0,configurable:!0}),e.prototype.createDisplayObject=function(){},e.prototype.setDisplayObject=function(t){this.$displayObject=t},Object.defineProperty(e.prototype,"parent",{get:function(){return this.$parent},set:function(t){this.$parent=t},enumerable:!0,configurable:!0}),e.prototype.removeFromParent=function(){this.$parent&&this.$parent.removeChild(this)},Object.defineProperty(e.prototype,"root",{get:function(){if(this instanceof t.GRoot)return this;for(var e=this.$parent;e;){if(e instanceof t.GRoot)return e;e=e.parent}return t.GRoot.inst},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.removeFromParent(),this.$relations.dispose(),this.removeAllListeners(),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end2,this),this.$displayObject.destroy()},e.prototype.click=function(e,i){return this.on(t.InteractiveEvents.Click,e,i)},e.prototype.removeClick=function(e,i){return this.off(t.InteractiveEvents.Click,e,i)},e.prototype.hasClick=function(e){return this.hasListener(t.InteractiveEvents.Click,e)},e.prototype.on=function(t,e,i){return null==t?this:(this.$displayObject.on(t,e,i),this)},e.prototype.off=function(t,e,i){return null==t?this:(this.$displayObject.listeners(t,!0)&&this.$displayObject.off(t,e,i),this)},e.prototype.once=function(t,e,i){return null==t?this:(this.$displayObject.once(t,e,i),this)},e.prototype.hasListener=function(t,e){return e?this.$displayObject.listeners(t).indexOf(e)>=0:this.$displayObject.listeners(t,!0)},e.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return!e||e.length<=0?e=[t]:e.unshift(t),this.$displayObject.emit.apply(this.$displayObject,e)},e.prototype.removeAllListeners=function(t){this.$displayObject.removeAllListeners(t)},Object.defineProperty(e.prototype,"draggable",{get:function(){return this.$draggable},set:function(t){this.$draggable!=t&&(this.$draggable=t,this.initDrag())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragBounds",{get:function(){return this.$dragBounds},set:function(t){this.$dragBounds=t},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(t){void 0===t&&(t=-1),this.onStage&&this.dragBegin()},e.prototype.stopDrag=function(){this.dragEnd()},Object.defineProperty(e.prototype,"dragging",{get:function(){return e.draggingObject==this},enumerable:!0,configurable:!0}),e.prototype.localToGlobal=function(t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),this.$pivotAsAnchor&&(t+=this.$pivot.x*this.$width,i+=this.$pivot.y*this.$height),n||(n=e.sHelperPoint),n.x=t,n.y=i,this.$displayObject.toGlobal(n,n)},e.prototype.globalToLocal=function(i,n,s){return void 0===i&&(i=0),void 0===n&&(n=0),s||(s=e.sHelperPoint),s.set(i,n),s=this.$displayObject.toLocal(s,t.GRoot.inst.nativeStage),this.$pivotAsAnchor&&(s.x-=this.$pivot.x*this.$width,s.y-=this.$pivot.y*this.$height),s},e.prototype.localToRoot=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=0);var s=this.localToGlobal(e,i,n);return s.x/=t.GRoot.inst.contentScaleFactor,s.y/=t.GRoot.inst.contentScaleFactor,s},e.prototype.rootToLocal=function(e,i,n){return void 0===e&&(e=0),void 0===i&&(i=0),e*=t.GRoot.inst.contentScaleFactor,i*=t.GRoot.inst.contentScaleFactor,this.globalToLocal(e,i,n)},e.prototype.localToGlobalRect=function(t,i,n,s,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),null==r&&(r=e.sDragHelperRect);var o=this.localToGlobal(t,i);return r.x=o.x,r.y=o.y,r.width=n,r.height=s,r},e.prototype.globalToLocalRect=function(t,i,n,s,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),null==r&&(r=e.sDragHelperRect);var o=this.globalToLocal(t,i);return r.x=o.x,r.y=o.y,r.width=n,r.height=s,r},e.prototype.handleControllerChanged=function(t){this.$handlingController=!0;for(var e=0;8>e;e++){var i=this.$gears[e];null!=i&&i.controller==t&&i.apply()}this.$handlingController=!1,this.checkGearVisible()},e.prototype.switchDisplayObject=function(t){if(t!=this.$displayObject){var e=this.$displayObject;if(this.inContainer){var i=this.$displayObject.parent.getChildIndex(this.$displayObject);this.$displayObject.parent.addChildAt(t,i),this.$displayObject.parent.removeChild(this.$displayObject)}this.$displayObject=t,this.$displayObject.x=e.x,this.$displayObject.y=e.y,this.$displayObject.rotation=e.rotation,this.$displayObject.alpha=e.alpha,this.$displayObject.visible=e.visible,this.$displayObject.scale.x=e.scale.x,this.$displayObject.scale.y=e.scale.y,this.$displayObject.interactive=e.interactive,this.$displayObject.interactiveChildren=e.interactiveChildren}},e.prototype.handleXYChanged=function(){if(this.$displayObject){var t=this.$x,e=this.$y;this.$pivotAsAnchor&&(t-=this.$pivot.x*this.$width,e-=this.$pivot.y*this.$height),this.$pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this.$displayObject.position.set(t+this.$pivotOffset.x,e+this.$pivotOffset.y)}},e.prototype.handleSizeChanged=function(){},e.prototype.handleScaleChanged=function(){this.$displayObject&&this.$displayObject.scale.set(this.$scaleX,this.$scaleY)},Object.defineProperty(e.prototype,"colorFilter",{get:function(){if(this.$colorFilter)return this.$colorFilter;if(this.$colorFilter=new PIXI.filters.ColorMatrixFilter,this.$displayObject){var t=this.$displayObject.filters||[];t.push(this.$colorFilter),this.$displayObject.filters=t}return this.$colorFilter},enumerable:!0,configurable:!0}),e.prototype.updateColorComponents=function(i,n,s,r){e.$colorHelper||(e.$colorHelper=new t.utils.ColorMatrix);var o=e.$colorHelper;o.setColor(i,100*n,100*s,180*r);var h=this.colorFilter;h.enabled=!0,h.reset(),h.matrix=o.toArray(),this.$lastColorComponents||(this.$lastColorComponents=[]),this.$lastColorComponents.length=0,this.$lastColorComponents.push(o.brightness,o.contrast,o.saturation,o.hue)},e.prototype.handleGrayedChanged=function(){if(this.$displayObject){var t=this.colorFilter;t.enabled=!0,this.$grayed?t.blackAndWhite(!0):this.$lastColorComponents&&this.$lastColorComponents.length>=4?this.updateColorComponents(this.$lastColorComponents[0],this.$lastColorComponents[1],this.$lastColorComponents[2],this.$lastColorComponents[3]):t.enabled=!1}},e.prototype.constructFromResource=function(){},e.prototype.setupBeforeAdd=function(t){var e,i;if(this.$id=t.attributes.id,this.$name=t.attributes.name,e=t.attributes.xy,i=e.split(","),this.setXY(parseInt(i[0]),parseInt(i[1])),e=t.attributes.size,e&&(i=e.split(","),this.$initWidth=parseInt(i[0]),this.$initHeight=parseInt(i[1]),this.setSize(this.$initWidth,this.$initHeight,!0)),e=t.attributes.scale,e&&(i=e.split(","),this.setScale(parseFloat(i[0]),parseFloat(i[1]))),e=t.attributes.rotation,e&&(this.rotation=parseInt(e)),e=t.attributes.skew,e&&(i=e.split(","),this.setSkew(parseFloat(i[0]),parseFloat(i[1]))),e=t.attributes.pivot){i=e.split(",");var n=parseFloat(i[0]),s=parseFloat(i[1]);e=t.attributes.anchor,this.setPivot(n,s,"true"==e)}if(e=t.attributes.alpha,e&&(this.alpha=parseFloat(e)),"false"==t.attributes.touchable&&(this.touchable=!1),"false"==t.attributes.visible&&(this.visible=!1),"true"==t.attributes.grayed&&(this.grayed=!0),this.tooltips=t.attributes.tooltips,e=t.attributes.blend,e&&(this.blendMode=e),e=t.attributes.filter)switch(e){case"color":e=t.attributes.filterData,i=e.split(","),this.updateColorComponents(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))}},e.prototype.setupAfterAdd=function(e){var i=this,n=e.attributes.group;n&&(this.$group=this.$parent.getChildById(n));var s=e.children;s.forEach(function(e){var n=t.GearXMLNodeNameMap[e.nodeName];void 0!=n&&i.getGear(n).setup(e)},this)},e.castFromNativeObject=function(e){return t.isUIObject(e)?e.UIOwner:null},e.prototype.initDrag=function(){this.$draggable?this.on(t.InteractiveEvents.Down,this.$touchBegin,this):this.off(t.InteractiveEvents.Down,this.$touchBegin,this)},e.prototype.dragBegin=function(){null!=e.draggingObject&&e.draggingObject.stopDrag(),e.sGlobalDragStart.x=t.GRoot.statusData.mouseX,e.sGlobalDragStart.y=t.GRoot.statusData.mouseY,this.localToGlobalRect(0,0,this.width,this.height,e.sGlobalRect),e.draggingObject=this,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$end2,this)},e.prototype.dragEnd=function(){e.draggingObject==this&&(t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving2,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end2,this),e.draggingObject=null),e.$dragBeginCancelled=!0},e.prototype.reset=function(){t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$end,this)},e.prototype.$touchBegin=function(e){null==this.$touchDownPoint&&(this.$touchDownPoint=new PIXI.Point),this.$touchDownPoint.x=e.data.global.x,this.$touchDownPoint.y=e.data.global.y,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$moving,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$end,this)},e.prototype.$end=function(t){this.reset()},e.prototype.$moving=function(i){var n=t.UIConfig.touchDragSensitivity;null!=this.$touchDownPoint&&Math.abs(this.$touchDownPoint.x-i.data.global.x)<n&&Math.abs(this.$touchDownPoint.y-i.data.global.y)<n||(this.reset(),e.$dragBeginCancelled=!1,i.currentTarget=this.$displayObject,this.$displayObject.emit("__dragStart",i,this),e.$dragBeginCancelled||this.dragBegin())},e.prototype.$moving2=function(i){var n=i.data.global.x-e.sGlobalDragStart.x+e.sGlobalRect.x,s=i.data.global.y-e.sGlobalDragStart.y+e.sGlobalRect.y;if(null!=this.$dragBounds){var r=t.GRoot.inst.localToGlobalRect(this.$dragBounds.x,this.$dragBounds.y,this.$dragBounds.width,this.$dragBounds.height,e.sDragHelperRect);n<r.x?n=r.x:n+e.sGlobalRect.width>r.right&&(n=r.right-e.sGlobalRect.width,n<r.x&&(n=r.x)),s<r.y?s=r.y:s+e.sGlobalRect.height>r.bottom&&(s=r.bottom-e.sGlobalRect.height,s<r.y&&(s=r.y))}e.sUpdatingWhileDragging=!0,e.sHelperPoint.x=n,e.sHelperPoint.y=s;var o=this.parent.globalToLocal(n,s,e.sHelperPoint);this.setXY(Math.round(o.x),Math.round(o.y)),e.sUpdatingWhileDragging=!1,i.currentTarget=this.$displayObject,this.$displayObject.emit("__dragMoving",i,this)},e.prototype.$end2=function(t){e.draggingObject==this&&(this.stopDrag(),t.currentTarget=this.$displayObject,this.$displayObject.emit("__dragEnd",t,this))},e.gInstanceCounter=0,e.sGlobalDragStart=new PIXI.Point,e.sGlobalRect=new PIXI.Rectangle,e.sHelperPoint=new PIXI.Point,e.sDragHelperRect=new PIXI.Rectangle,e}();t.GObject=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$sortingChildCount=0,i.$children=[],i.$controllers=[],i.$transitions=[],i.$margin=new t.utils.Margin,i.$alignOffset=new PIXI.Point,i}return __extends(i,e),i.prototype.createDisplayObject=function(){this.$rootContainer=new t.UIContainer(this),this.setDisplayObject(this.$rootContainer),this.$container=this.$rootContainer},i.prototype.dispose=function(){t.GTimer.inst.remove(this.$validate,this),this.off("added",this.$added,this),this.off("removed",this.$removed,this),this.$transitions.forEach(function(t){t.dispose()});for(var i=this.$children.length,n=i-1;n>=0;--n){var s=this.$children[n];s.parent=null,s.dispose()}this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.dispose(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"displayListContainer",{get:function(){return this.$container},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){return this.addChildAt(t,this.$children.length),t},i.prototype.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw new Error("Invalid child");var i=this.$children.length;if(e>=0&&i>=e){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this.$children.length;0!=t.sortingOrder?(this.$sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this.$sortingChildCount>0&&e>n-this.$sortingChildCount&&(e=n-this.$sortingChildCount),e==n?this.$children.push(t):this.$children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw new Error("Invalid child index")},i.prototype.getInsertPosForSortingChild=function(t){var e=this.$children.length,i=0;for(i=0;e>i;i++){var n=this.$children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},i.prototype.removeChild=function(t,e){void 0===e&&(e=!1);var i=this.$children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},i.prototype.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var i=this.$children[t];return i.parent=null,0!=i.sortingOrder&&this.$sortingChildCount--,this.$children.splice(t,1),i.inContainer&&this.$container.removeChild(i.displayObject),e===!0&&i.dispose(),this.setBoundsChangedFlag(),i}throw new Error("Invalid child index")},i.prototype.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildAt(t,i)},i.prototype.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this.$children[t];throw new Error("Invalid child index")},i.prototype.getChild=function(t){for(var e=this.$children.length,i=0;e>i;++i)if(this.$children[i].name==t)return this.$children[i];return null},i.prototype.getChildInGroup=function(t,e){for(var i=this.$children.length,n=0;i>n;++n){var s=this.$children[n];if(s.group==e&&s.name==t)return s}return null},i.prototype.getChildById=function(t){for(var e=this.$children.length,i=0;e>i;++i)if(this.$children[i].id==t)return this.$children[i];return null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0==t.sortingOrder){var n=this.$children.length;this.$sortingChildCount>0&&e>n-this.$sortingChildCount-1&&(e=n-this.$sortingChildCount-1),
this.$setChildIndex(t,i,e)}},i.prototype.setChildIndexBefore=function(t,e){var i=this.$children.indexOf(t);if(-1==i)throw new Error("no such child found");if(0!=t.sortingOrder)return i;var n=this.$children.length;return this.$sortingChildCount>0&&e>n-this.$sortingChildCount-1&&(e=n-this.$sortingChildCount-1),e>i?this.$setChildIndex(t,i,e-1):this.$setChildIndex(t,i,e)},i.prototype.$setChildIndex=function(t,e,i){void 0===i&&(i=0);var n=this.$children.length;if(i>n&&(i=n),e==i)return e;if(this.$children.splice(e,1),this.$children.splice(i,0,t),t.inContainer){for(var s=0,r=this.$container.children.length,o=0;i>o;o++){var h=this.$children[o];h.inContainer&&s++}s==r&&s--,this.$container.setChildIndex(t.displayObject,s),this.setBoundsChangedFlag()}return i},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);if(-1==i||-1==n)throw new Error("no such child found");this.swapChildrenAt(i,n)},i.prototype.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this.$children[t],n=this.$children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},i.prototype.addController=function(t){this.$controllers.push(t),t.$parent=this,this.applyController(t)},i.prototype.getControllerAt=function(t){return this.$controllers[t]},i.prototype.getController=function(t){for(var e=this.$controllers.length,i=0;e>i;++i){var n=this.$controllers[i];if(n.name==t)return n}return null},i.prototype.removeController=function(t){var e=this.$controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t.$parent=null,this.$controllers.splice(e,1),this.$children.forEach(function(e){e.handleControllerChanged(t)})},Object.defineProperty(i.prototype,"controllers",{get:function(){return this.$controllers},enumerable:!0,configurable:!0}),i.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList){if(e instanceof t.GGroup)return void this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);if(e.displayObject)if(e.finalVisible){if(!e.displayObject.parent){for(var n=0,s=this.$children.length,r=0;s>r;r++){var o=this.$children[r];if(o==e)break;o.displayObject&&o.displayObject.parent&&n++}this.$container.addChildAt(e.displayObject,n)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)}},i.prototype.applyController=function(t){this.$applyingController=t,this.$children.forEach(function(e){e.handleControllerChanged(t)}),this.$applyingController=null,t.executeActions()},i.prototype.applyAllControllers=function(){var t=this;this.$controllers.forEach(function(e){t.applyController(e)},this)},i.prototype.adjustRadioGroupDepth=function(e,i){var n=-1,s=-1;this.$children.forEach(function(r,o){r==e?n=o:r instanceof t.GButton&&r.relatedController==i&&o>s&&(s=o)}),s>n&&(null!=this.$applyingController&&this.$children[s].handleControllerChanged(this.$applyingController),this.swapChildrenAt(n,s))},i.prototype.getTransitionAt=function(t){return this.$transitions[t]},i.prototype.getTransition=function(t){for(var e=this.$transitions.length,i=0;e>i;++i){var n=this.$transitions[i];if(n.name==t)return n}return null},i.prototype.isChildInView=function(t){return null!=this.$rootContainer.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null!=this.$scrollPane?this.$scrollPane.isChildInView(t):!0},i.prototype.getFirstChildInView=function(){for(var t=this.$children.length,e=0;t>e;++e){var i=this.$children[e];if(this.isChildInView(i))return e}return-1},Object.defineProperty(i.prototype,"scrollPane",{get:function(){return this.$scrollPane},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opaque",{get:function(){return this.$opaque},set:function(t){this.$opaque!=t&&(this.$opaque=t,this.$opaque?this.updateOpaque():this.$rootContainer.hitArea&&this.$rootContainer.hitArea instanceof PIXI.Rectangle&&(this.$rootContainer.hitArea.width=this.$rootContainer.hitArea.height=0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin.copy(t),null!=this.$rootContainer.scrollRect&&(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y),this.handleSizeChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this.$rootContainer.mask},set:function(t){t&&(t.interactive=t.interactiveChildren=!1,t instanceof PIXI.Graphics&&(t.isMask=!0),this.$rootContainer.mask=t)},enumerable:!0,configurable:!0}),i.prototype.updateOpaque=function(){this.$rootContainer.hitArea||(this.$rootContainer.hitArea=new PIXI.Rectangle);var t=this.$rootContainer.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.updateScrollRect=function(){var t=this.$rootContainer.scrollRect;null==t&&(t=new PIXI.Rectangle);var e=this.width-this.$margin.right,i=this.height-this.$margin.bottom;t.x=t.y=0,t.width=e,t.height=i,this.$rootContainer.scrollRect=t},i.prototype.setupScroll=function(e,i,n,s,r,o){this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.$scrollPane=new t.ScrollPane(this,i,e,n,s,r,o),this.setBoundsChangedFlag()},i.prototype.setupOverflow=function(t){1==t?(this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.updateScrollRect(),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top):0==this.$margin.left&&0==this.$margin.top||(this.$rootContainer==this.$container&&(this.$container=new PIXI.Container,this.$rootContainer.addChild(this.$container)),this.$container.x=this.$margin.left,this.$container.y=this.$margin.top),this.setBoundsChangedFlag()},i.prototype.handleSizeChanged=function(){this.$scrollPane?this.$scrollPane.onOwnerSizeChanged():null!=this.$rootContainer.scrollRect&&this.updateScrollRect(),this.$opaque&&this.updateOpaque()},i.prototype.handleGrayedChanged=function(){var t=this.getController("grayed");if(null!=t)return void(t.selectedIndex=this.grayed?1:0);var e=this.grayed;this.$children.forEach(function(t){t.grayed=e})},i.prototype.setBoundsChangedFlag=function(){(this.$scrollPane||this.$trackBounds)&&(this.$boundsChanged||(this.$boundsChanged=!0,t.GTimer.inst.callLater(this.$validate,this)))},i.prototype.$validate=function(t){this.$boundsChanged&&this.updateBounds()},i.prototype.ensureBoundsCorrect=function(){this.$boundsChanged&&this.updateBounds()},i.prototype.updateBounds=function(){var t=0,e=0,i=0,n=0,s=this.$children.length;if(s>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0;this.$children.forEach(function(i){i.ensureSizeCorrect(),h=i.x,t>h&&(t=h),h=i.y,e>h&&(e=h),h=i.x+i.actualWidth,h>r&&(r=h),h=i.y+i.actualHeight,h>o&&(o=h)}),i=r-t,n=o-e}this.setBounds(t,e,i,n)},i.prototype.setBounds=function(t,e,i,n){void 0===n&&(n=0),this.$boundsChanged=!1,this.$scrollPane&&this.$scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},Object.defineProperty(i.prototype,"viewWidth",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewWidth:this.width-this.$margin.left-this.$margin.right},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewWidth=t:this.width=t+this.$margin.left+this.$margin.right},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewHeight",{get:function(){return null!=this.$scrollPane?this.$scrollPane.viewHeight:this.height-this.$margin.top-this.$margin.bottom},set:function(t){null!=this.$scrollPane?this.$scrollPane.viewHeight=t:this.height=t+this.$margin.top+this.$margin.bottom},enumerable:!0,configurable:!0}),i.prototype.getSnappingPosition=function(t,e,i){i||(i=new PIXI.Point);var n=this.$children.length;if(0>=n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var s=null,r=null,o=0;if(0!=e){for(;n>o;o++)if(s=this.$children[o],e<s.y){if(0==o){e=0;break}r=this.$children[o-1],e=e<r.y+r.actualHeight/2?r.y:s.y;break}o==n&&(e=s.y)}if(0!=t){for(o>0&&o--;n>o;o++)if(s=this.$children[o],t<s.x){if(0==o){t=0;break}r=this.$children[o-1],t=t<r.x+r.actualWidth/2?r.x:s.x;break}o==n&&(t=s.x)}return i.x=t,i.y=e,i},i.prototype.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this.$sortingChildCount--,this.setChildIndex(t,this.$children.length);else{0==e&&this.$sortingChildCount++;var n=this.$children.indexOf(t),s=this.getInsertPosForSortingChild(t);s>n?this.$setChildIndex(t,n,s-1):this.$setChildIndex(t,n,s)}},i.prototype.constructFromResource=function(){this.constructInternal(null,0)},i.prototype.constructInternal=function(e,i){var n=this,s=this.packageItem.owner.getItemAsset(this.packageItem);this.$inProgressBuilding=!0;var r,o;r=s.attributes.size,o=r.split(","),this.$sourceWidth=parseInt(o[0]),this.$sourceHeight=parseInt(o[1]),this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),r=s.attributes.pivot,r&&(o=r.split(","),r=s.attributes.anchor,this.internalSetPivot(parseFloat(o[0]),parseFloat(o[1]),"true"==r)),r=s.attributes.opaque,this.opaque="false"!=r;var h;if(r=s.attributes.overflow,h=r?t.ParseOverflowType(r):0,r=s.attributes.margin,r&&this.$margin.parse(r),2==h){var a;r=s.attributes.scroll,a=r?t.ParseScrollType(r):1;var l=void 0;r=s.attributes.scrollBar,l=r?t.ParseScrollBarDisplayType(r):0;var c=void 0;r=s.attributes.scrollBarFlags,c=r?parseInt(r):0;var u=new t.utils.Margin;r=s.attributes.scrollBarMargin,r&&u.parse(r);var p=void 0,$=void 0;r=s.attributes.scrollBarRes,r&&(o=r.split(","),p=o[0],$=o[1]),this.setupScroll(u,a,l,c,p,$)}else this.setupOverflow(h);this.$buildingDisplayList=!0;var d=s.children;d.forEach(function(e){if("controller"==e.nodeName){var i=new t.controller.Controller;n.$controllers.push(i),i.$parent=n,i.setup(e)}});var f=this.packageItem.displayList;if(f.forEach(function(s,r){var o;null!=e?o=e[i+r]:s.packageItem?(o=t.UIObjectFactory.newObject(s.packageItem),o.packageItem=s.packageItem,o.constructFromResource()):o=t.UIObjectFactory.newObjectDirectly(s.type),o.$inProgressBuilding=!0,o.setupBeforeAdd(s.desc),o.parent=n,n.$children.push(o)},this),this.relations.setup(s),this.$children.forEach(function(t,e){t.relations.setup(f[e].desc),t.setupAfterAdd(f[e].desc),t.$inProgressBuilding=!1}),r=s.attributes.mask){var g=this.getChildById(r).displayObject;if(!(g instanceof PIXI.Graphics||g instanceof PIXI.Sprite))throw new Error("only PIXI.Sprite or PIXI.Graphics can be applied as mask object");this.mask=g}d.forEach(function(e){if("transition"==e.nodeName){var i=new t.Transition(n);n.$transitions.push(i),i.setup(e)}},this),this.$transitions.length>0&&(this.on("added",this.$added,this),this.on("removed",this.$removed,this)),this.applyAllControllers(),this.$buildingDisplayList=!1,this.$inProgressBuilding=!1,this.appendChildrenList(),this.setBoundsChangedFlag(),this.constructFromXML(s)},i.prototype.appendChildrenList=function(){var t=this;this.$children.forEach(function(e){null!=e.displayObject&&e.finalVisible&&t.$container.addChild(e.displayObject)},this)},i.prototype.constructFromXML=function(t){},i.prototype.$added=function(t){this.$transitions.forEach(function(t){t.autoPlay&&t.play({times:t.autoPlayRepeat,delay:t.autoPlayDelay})})},i.prototype.$removed=function(t){this.$transitions.forEach(function(t){t.stop(!1,!1)})},i}(t.GObject);t.GComponent=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$mode=0,i.$title="",i.$icon="",i.$pageOption=new t.controller.PageOption,i.$changeStateOnClick=!0,i.$downEffect=0,i.$downEffectValue=.8,i}return __extends(i,e),i.prototype.setDisplayObject=function(t){e.prototype.setDisplayObject.call(this,t),this.$displayObject.buttonMode=!0},Object.defineProperty(i.prototype,"icon",{get:function(){return this.$icon},set:function(t){this.$icon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIcon",{get:function(){return this.$selectedIcon},set:function(t){this.$selectedIcon=t,t=this.$selected&&this.$selectedIcon?this.$selectedIcon:this.$icon,null!=this.$iconObject&&(this.$iconObject.icon=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.$title},set:function(t){this.$title=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedTitle",{get:function(){return this.$selectedTitle},set:function(t){this.$selectedTitle=t,this.$titleObject&&(this.$titleObject.text=this.$selected&&this.$selectedTitle?this.$selectedTitle:this.$title)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(t){if(0!=this.$mode&&this.$selected!=t){if(this.$selected=t,this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.$selected?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this.$selected?this.setState(this.$over?i.SELECTED_OVER:i.DOWN):this.setState(this.$over?i.OVER:i.UP),this.$selectedTitle&&this.$titleObject&&(this.$titleObject.text=this.$selected?this.$selectedTitle:this.$title),this.$selectedIcon){var e=this.$selected?this.$selectedIcon:this.$icon;null!=this.$iconObject&&(this.$iconObject.icon=e)}this.$relatedController&&this.$parent&&!this.$parent.$buildingDisplayList&&(this.$selected?(this.$relatedController.selectedPageId=this.$pageOption.id,this.$relatedController.$autoRadioGroupDepth&&this.$parent.adjustRadioGroupDepth(this,this.$relatedController)):1==this.$mode&&this.$relatedController.selectedPageId==this.$pageOption.id&&(this.$relatedController.oppositePageId=this.$pageOption.id))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this.$mode},set:function(t){this.$mode!=t&&(0==t&&(this.selected=!1),this.$mode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"relatedController",{get:function(){return this.$relatedController},set:function(t){t!=this.$relatedController&&(this.$relatedController=t,this.$pageOption.controller=t,this.$pageOption.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageOption",{get:function(){return this.$pageOption},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"changeStateOnClick",{get:function(){return this.$changeStateOnClick},set:function(t){this.$changeStateOnClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkedPopup",{get:function(){return this.$linkedPopup},set:function(t){this.$linkedPopup=t},enumerable:!0,configurable:!0}),i.prototype.addStateListener=function(t,e){this.on("__stateChanged",t,e)},i.prototype.removeStateListener=function(t,e){this.off("__stateChanged",t,e)},i.prototype.fireClick=function(e){void 0===e&&(e=!0),e&&0==this.$mode&&(this.setState(i.OVER),t.GTimer.inst.add(100,1,this.setState,this,i.DOWN),t.GTimer.inst.add(200,1,this.setState,this,i.UP)),this.$click(null)},i.prototype.setState=function(e){if(this.$buttonController&&(this.$buttonController.selectedPage=e),1==this.$downEffect)if(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED){var n=255*this.$downEffectValue,s=(n<<16)+(n<<8)+n;this.$children.forEach(function(e){t.isColorGear(e)&&(e.color=s)})}else this.$children.forEach(function(e){t.isColorGear(e)&&(e.color=16777215)});else 2==this.$downEffect&&(e==i.DOWN||e==i.SELECTED_OVER||e==i.SELECTED_DISABLED?this.setScale(this.$downEffectValue,this.$downEffectValue):this.setScale(1,1))},i.prototype.handleControllerChanged=function(t){e.prototype.handleControllerChanged.call(this,t),this.$relatedController==t&&(this.selected=this.$pageOption.id==t.selectedPageId)},i.prototype.handleGrayedChanged=function(){this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.grayed?this.$selected&&this.$buttonController.hasPage(i.SELECTED_DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DISABLED):this.$selected?this.setState(i.DOWN):this.setState(i.UP):e.prototype.handleGrayedChanged.call(this)},i.prototype.constructFromXML=function(n){e.prototype.constructFromXML.call(this,n),n=t.utils.XmlParser.getChildNodes(n,"Button")[0];var s;s=n.attributes.mode,s&&(this.$mode=t.ParseButtonMode(s)),s=n.attributes.downEffect,s&&(this.$downEffect="dark"==s?1:"scale"==s?2:0,s=n.attributes.downEffectValue,this.$downEffectValue=parseFloat(s),2==this.$downEffect&&this.setPivot(.5,.5)),this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),null!=this.$titleObject&&(this.$title=this.$titleObject.text),null!=this.$iconObject&&(this.$icon=this.$iconObject.icon),0==this.$mode&&this.setState(i.UP),this.on(t.InteractiveEvents.Over,this.$rollover,this),this.on(t.InteractiveEvents.Out,this.$rollout,this),this.on(t.InteractiveEvents.Down,this.$mousedown,this),this.on(t.InteractiveEvents.Click,this.$click,this)},i.prototype.setupAfterAdd=function(i){if(e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"Button")[0]){var n=void 0;n=i.attributes.title,n&&(this.title=n),n=i.attributes.icon,n&&(this.icon=n),n=i.attributes.selectedTitle,n&&(this.selectedTitle=n),n=i.attributes.selectedIcon,n&&(this.selectedIcon=n),n=i.attributes.titleColor,n&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(n)),n=i.attributes.titleFontSize,n&&(this.fontSize=parseInt(n)),n=i.attributes.controller,n?this.$relatedController=this.$parent.getController(n):this.$relatedController=null,this.$pageOption.id=i.attributes.page,this.selected="true"==i.attributes.checked}},i.prototype.$rollover=function(t){this.$buttonController&&this.$buttonController.hasPage(i.OVER)&&(this.$over=!0,this.$down||this.setState(this.$selected?i.SELECTED_OVER:i.OVER))},i.prototype.$rollout=function(t){this.$buttonController&&this.$buttonController.hasPage(i.OVER)&&(this.$over=!1,this.$down||this.setState(this.$selected?i.DOWN:i.UP))},i.prototype.$mousedown=function(e){this.$down=!0,t.GRoot.inst.on(t.InteractiveEvents.Up,this.$mouseup,this),0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.setState(i.SELECTED_DISABLED):this.setState(i.DOWN)),null!=this.$linkedPopup&&(this.$linkedPopup instanceof t.Window?this.$linkedPopup.toggleVisible():this.root.togglePopup(this.$linkedPopup,this))},i.prototype.$mouseup=function(e){this.$down&&(t.GRoot.inst.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$down=!1,0==this.$mode&&(this.grayed&&this.$buttonController&&this.$buttonController.hasPage(i.DISABLED)?this.setState(i.DISABLED):this.$over?this.setState(i.OVER):this.setState(i.UP)))},i.prototype.$click=function(t){this.$changeStateOnClick&&(1==this.$mode?(this.selected=!this.$selected,this.emit("__stateChanged",this)):2==this.$mode&&(this.$selected||(this.selected=!0,this.emit("__stateChanged",this))))},i.prototype.dispose=function(){t.GTimer.inst.remove(this.setState,this),t.GTimer.inst.remove(this.setState,this),t.GRoot.inst.off(t.InteractiveEvents.Up,this.$mouseup,this),e.prototype.dispose.call(this)},i.UP="up",i.DOWN="down",i.OVER="over",i.SELECTED_OVER="selectedOver",i.DISABLED="disabled",i.SELECTED_DISABLED="selectedDisabled",i}(t.GComponent);t.GButton=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$visibleItemCount=0,i.$selectedIndex=0,i.$popupDir=1,i.$visibleItemCount=t.UIConfig.defaultComboBoxVisibleItemCount,i.$itemsUpdated=!0,i.$selectedIndex=-1,i.$items=[],i.$values=[],i}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this.$iconObject?this.$iconObject.icon:null},set:function(t){this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleItemCount",{get:function(){return this.$visibleItemCount},set:function(t){this.$visibleItemCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupDirection",{get:function(){return this.$popupDir},set:function(t){this.$popupDir=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this.$items},set:function(t){t?this.$items=t.concat():this.$items.length=0,this.$items.length>0?(this.$selectedIndex>=this.$items.length?this.$selectedIndex=this.$items.length-1:-1==this.$selectedIndex&&(this.$selectedIndex=0),this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null),this.$selectedIndex=-1),this.$itemsUpdated=!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icons",{get:function(){return this.$icons},set:function(t){this.$icons=t,null!=this.$icons&&-1!=this.$selectedIndex&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this.$values},set:function(t){t?this.$values=t.concat():this.$values.length=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){this.$selectedIndex!=t&&(this.$selectedIndex=t,this.selectedIndex>=0&&this.selectedIndex<this.$items.length?(this.text=this.$items[this.$selectedIndex],null!=this.$icons&&this.$selectedIndex<this.$icons.length&&(this.icon=this.$icons[this.$selectedIndex])):(this.text="",null!=this.$icons&&(this.icon=null)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$values[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$values.indexOf(t)},enumerable:!0,configurable:!0}),i.prototype.setState=function(t){this.$buttonController&&(this.$buttonController.selectedPage=t)},i.prototype.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ComboBox")[0];var n;if(this.$buttonController=this.getController("button"),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon"),n=i.attributes.dropdown){if(this.$dropdown=t.UIPackage.createObjectFromURL(n),!this.$dropdown)throw new Error("the 'dropdown' is not specified, it must be a component definied in the package pool");if(this.$dropdown.name="this.dropdown",this.$list=this.$dropdown.getChild("list"),null==this.$list)throw new Error(this.resourceURL+": the dropdown component must have a GList child and named 'list'.");this.$list.on("__itemClick",this.$clickItem,this),this.$list.addRelation(this.$dropdown,14),this.$list.removeRelation(this.$dropdown,15),this.$dropdown.addRelation(this.$list,15),this.$dropdown.removeRelation(this.$list,14),this.$dropdown.on("removed",this.$popupWinClosed,this)}PIXI.utils.isMobile.any||(this.on(t.InteractiveEvents.Over,this.$rollover,this),this.on(t.InteractiveEvents.Out,this.$rollout,this)),this.on(t.InteractiveEvents.Down,this.$mousedown,this)},i.prototype.dispose=function(){t.GTimer.inst.remove(this.delayedClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$dropdown.off("removed",this.$popupWinClosed,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$popupWinClosed(null),this.$dropdown&&(this.$dropdown.dispose(),this.$dropdown=null),e.prototype.dispose.call(this)},i.prototype.setupAfterAdd=function(i){var n=this;if(e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ComboBox")[0]){var s;s=i.attributes.titleColor,s&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(s)),s=i.attributes.visibleItemCount,s&&(this.$visibleItemCount=parseInt(s));var r=i.children;r&&r.forEach(function(t,e){"item"==t.nodeName&&(n.$items.push(t.attributes.title),n.$values.push(t.attributes.value),s=t.attributes.icon,s&&(n.$icons||(n.$icons=new Array(length)),n.$icons[e]=s))}),s=i.attributes.title,s?(this.text=s,this.$selectedIndex=this.$items.indexOf(s)):this.$items.length>0?(this.$selectedIndex=0,this.text=this.$items[0]):this.$selectedIndex=-1,s=i.attributes.icon,s&&(this.icon=s),s=i.attributes.direction,s&&("up"==s?this.$popupDir=2:"auto"==s&&(this.$popupDir=0))}},i.prototype.showDropdown=function(){var e=this;this.$itemsUpdated&&(this.$itemsUpdated=!1,this.$list.removeChildrenToPool(),this.$items.forEach(function(t,i){var n=e.$list.addItemFromPool();n.name=i<e.$values.length?e.$values[i]:"",n.text=e.$items[i],n.icon=null!=e.$icons&&i<e.$icons.length?e.$icons[i]:null},this),this.$list.resizeToFit(this.$visibleItemCount)),this.$list.selectedIndex=-1,this.$dropdown.width=this.width,this.root.togglePopup(this.$dropdown,this,this.$popupDir),this.$dropdown.parent&&this.setState(t.GButton.DOWN)},i.prototype.$popupWinClosed=function(e){this.$over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)},i.prototype.$clickItem=function(e,i){t.GTimer.inst.add(100,1,this.delayedClickItem,this,this.$list.getChildIndex(i))},i.prototype.delayedClickItem=function(e){this.$dropdown.parent instanceof t.GRoot&&this.$dropdown.parent.hidePopup(),this.$selectedIndex=e,this.$selectedIndex>=0?this.text=this.$items[this.$selectedIndex]:this.text="",this.emit("__stateChanged",this)},i.prototype.$rollover=function(e){this.$over=!0,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(t.GButton.OVER)},i.prototype.$rollout=function(e){this.$over=!1,this.$down||this.$dropdown&&this.$dropdown.parent||this.setState(t.GButton.UP)},i.prototype.$mousedown=function(e){e.stopPropagation(),t.GRoot.inst.checkPopups(e.target),this.$down=!0,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&this.showDropdown()},i.prototype.$mouseup=function(e){this.$down&&(this.$down=!1,t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$mouseup,this),this.$dropdown&&!this.$dropdown.parent&&(this.$over?this.setState(t.GButton.OVER):this.setState(t.GButton.UP)))},i}(t.GComponent);t.GComboBox=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(e){this.$lockToken=0,this.$owner=e,this.$easeType=t.ParseEaseType("Quad.Out"),this.$tweenTime=.3,this.$tweenDelay=0}return Object.defineProperty(e.prototype,"controller",{get:function(){return this.$controller},set:function(t){t!=this.$controller&&(this.$controller=t,this.$controller&&this.init())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tween",{get:function(){return this.$tween},set:function(t){this.$tween=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenDelay",{get:function(){return this.$tweenDelay},set:function(t){this.$tweenDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tweenTime",{get:function(){return this.$tweenTime},set:function(t){this.$tweenTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"easeType",{get:function(){return this.$easeType},set:function(t){this.$easeType=t},enumerable:!0,configurable:!0}),e.prototype.setup=function(e){var i=this;if(this.$controller=this.$owner.parent.getController(e.attributes.controller),null!=this.$controller){this.init();var n;if(n=e.attributes.tween,n&&(this.$tween=!0),n=e.attributes.ease,n&&(this.$easeType=t.ParseEaseType(n)),n=e.attributes.duration,n&&(this.$tweenTime=parseFloat(n)),n=e.attributes.delay,n&&(this.$tweenDelay=parseFloat(n)),this instanceof t.GearDisplay)n=e.attributes.pages,n&&(this.pages=n.split(","));else{var s,r=void 0;n=e.attributes.pages,n&&(s=n.split(",")),n=e.attributes.values,n&&(r=n.split("|")),s&&r&&r.forEach(function(t,e){i.addStatus(s[e],t)}),n=e.attributes["default"],n&&this.addStatus(null,n)}}},e.prototype.updateFromRelations=function(t,e){},e.prototype.addStatus=function(t,e){},e.prototype.init=function(){},e.prototype.apply=function(){},e.prototype.updateState=function(){},e.disableAllTweenEffect=!1,e}();t.GearBase=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this.$default=new i(this.$owner.playing,this.$owner.frame),this.$storage={}},e.prototype.addStatus=function(t,e){if("-"!=e){var n;null==t?n=this.$default:(n=new i,this.$storage[t]=n);var s=e.split(",");n.frame=parseInt(s[0]),n.playing="p"==s[1]}},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];t||(t=this.$default),this.$owner.frame=t.frame,this.$owner.playing=t.playing,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.frame=this.$owner.frame,t.playing=this.$owner.playing}},e}(t.GearBase);t.GearAnimation=e;var i=function(){function t(t,e){void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}return t}()}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.$default=0,i}return __extends(i,e),i.prototype.init=function(){this.$default=this.$owner.color,this.$storage={}},i.prototype.addStatus=function(e,i){if("-"!=i){var n=t.utils.StringUtil.convertFromHtmlColor(i);null==e?this.$default=n:this.$storage[e]=n}},i.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];void 0!=t?this.$owner.color=Math.floor(t):this.$owner.color=Math.floor(this.$default),this.$owner.$gearLocked=!1},i.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.color)},i}(t.GearBase);t.GearColor=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i.$vid=0,i.$lockToken=1,i}return __extends(e,t),e.prototype.init=function(){this.pages=null},e.prototype.lock=function(){return this.$vid++,this.$lockToken},e.prototype.release=function(t){t==this.$lockToken&&this.$vid--},Object.defineProperty(e.prototype,"connected",{get:function(){return null==this.controller||this.$vid>0},enumerable:!0,configurable:!0}),e.prototype.apply=function(){this.$lockToken++,this.$lockToken<=0&&(this.$lockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this.$controller.selectedPageId)?this.$vid=1:this.$vid=0;
},e}(t.GearBase);t.GearDisplay=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this.$default=this.$owner.icon,this.$storage={}},e.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];void 0!=t?this.$owner.icon=t:this.$owner.icon=this.$default,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.icon)},e}(t.GearBase);t.GearIcon=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this.$default=new i(this.$owner.alpha,this.$owner.rotation,this.$owner.grayed),this.$storage={}},n.prototype.addStatus=function(t,e){if("-"!=e){var n,s=e.split(",");null==t?n=this.$default:(n=new i,this.$storage[t]=n),n.alpha=parseFloat(s[0]),n.rotation=parseInt(s[1]),n.grayed="1"==s[2]}},n.prototype.apply=function(){var e=this,i=this.$storage[this.$controller.selectedPageId];if(i||(i=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.grayed=i.grayed,this.$owner.alpha=i.alpha,this.$owner.rotation=i.rotation,this.$owner.$gearLocked=!1;else{if(this.$owner.$gearLocked=!0,this.$owner.grayed=i.grayed,this.$owner.$gearLocked=!1,this.$tweener){if(this.$tweenTarget.alpha==i.alpha&&this.$tweenTarget.rotation==i.rotation)return;this.$tweener.tick(1e8),this.$tweener=null}var n=i.alpha!=this.$owner.alpha,s=i.rotation!=this.$owner.rotation;if(n||s){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=i;var r={onChange:function(){e.$owner.$gearLocked=!0,n&&(e.$owner.alpha=e.$tweenValue.x),s&&(e.$owner.rotation=e.$tweenValue.y),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new PIXI.Point),this.$tweenValue.x=this.$owner.alpha,this.$tweenValue.y=this.$owner.rotation,this.$tweener=createjs.Tween.get(this.$tweenValue,r).wait(1e3*this.$tweenDelay).to({x:i.alpha,y:i.rotation},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},n.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},n.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.alpha=this.$owner.alpha,t.rotation=this.$owner.rotation,t.grayed=this.$owner.grayed}},n}(t.GearBase);t.GearLook=e;var i=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),this.alpha=t,this.rotation=e,this.grayed=i}return t}()}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function n(t){return e.call(this,t)||this}return __extends(n,e),n.prototype.init=function(){this.$default=new i(this.$owner.width,this.$owner.height,this.$owner.scaleX,this.$owner.scaleY),this.$storage={}},n.prototype.addStatus=function(t,e){if("-"!=e){var n,s=e.split(",");null==t?n=this.$default:(n=new i,this.$storage[t]=n),n.width=parseInt(s[0]),n.height=parseInt(s[1]),s.length>2&&(n.scaleX=parseFloat(s[2]),n.scaleY=parseFloat(s[3]))}},n.prototype.apply=function(){var e=this,n=this.$storage[this.$controller.selectedPageId];if(n||(n=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setSize(n.width,n.height,this.$owner.gearXY.controller==this.$controller),this.$owner.setScale(n.scaleX,n.scaleY),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.width==n.width&&this.$tweenTarget.height==n.height&&this.$tweenTarget.scaleX==n.scaleX&&this.$tweenTarget.scaleY==n.scaleY)return;this.$tweener.tick(1e8),this.$tweener=null}var s=n.width!=this.$owner.width||n.height!=this.$owner.height,r=n.scaleX!=this.$owner.scaleX||n.scaleY!=this.$owner.scaleY;if(s||r){this.$owner.hasGearController(0,this.$controller)&&(this.$lockToken=this.$owner.lockGearDisplay()),this.$tweenTarget=n;var o={onChange:function(){e.$owner.$gearLocked=!0,s&&e.$owner.setSize(e.$tweenValue.width,e.$tweenValue.height,e.$owner.gearXY.controller==e.$controller),r&&e.$owner.setScale(e.$tweenValue.scaleX,e.$tweenValue.scaleY),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new i),this.$tweenValue.width=this.$owner.width,this.$tweenValue.height=this.$owner.height,this.$tweenValue.scaleX=this.$owner.scaleX,this.$tweenValue.scaleY=this.$owner.scaleY,this.$tweener=createjs.Tween.get(this.$tweenValue,o).wait(1e3*this.$tweenDelay).to({width:n.width,height:n.height,scaleX:n.scaleX,scaleY:n.scaleY},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},n.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},n.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new i,this.$storage[this.$controller.selectedPageId]=t),t.width=this.$owner.width,t.height=this.$owner.height,t.scaleX=this.$owner.scaleX,t.scaleY=this.$owner.scaleY}},n.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var n=this.$storage[i];n.width+=t,n.height+=e}this.$default.width+=t,this.$default.height+=e,this.updateState()}},n}(t.GearBase);t.GearSize=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}return t}()}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){this.$default=this.$owner.text,this.$storage={}},e.prototype.addStatus=function(t,e){null==t?this.$default=e:this.$storage[t]=e},e.prototype.apply=function(){this.$owner.$gearLocked=!0;var t=this.$storage[this.$controller.selectedPageId];void 0!=t?this.$owner.text=t:this.$owner.text=this.$default,this.$owner.$gearLocked=!1},e.prototype.updateState=function(){null==this.$controller||this.$owner.$gearLocked||this.$owner.$inProgressBuilding||(this.$storage[this.$controller.selectedPageId]=this.$owner.text)},e}(t.GearBase);t.GearText=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),i.prototype.init=function(){this.$default=new PIXI.Point(this.$owner.x,this.$owner.y),this.$storage={}},i.prototype.addStatus=function(t,e){if("-"!=e){var i,n=e.split(",");null==t?i=this.$default:(i=new PIXI.Point,this.$storage[t]=i),i.x=parseInt(n[0]),i.y=parseInt(n[1])}},i.prototype.apply=function(){var e=this,i=this.$storage[this.$controller.selectedPageId];if(i||(i=this.$default),!this.$tween||t.UIPackage.$constructingObjects||t.GearBase.disableAllTweenEffect)this.$owner.$gearLocked=!0,this.$owner.setXY(i.x,i.y),this.$owner.$gearLocked=!1;else{if(this.$tweener){if(this.$tweenTarget.x==i.x&&this.$tweenTarget.y==i.y)return;this.$tweener.tick(1e8),this.$tweener=null}if(this.$owner.x!=i.x||this.$owner.y!=i.y){this.$owner.hasGearController(0,this.$controller),this.$lockToken=this.$owner.lockGearDisplay(),this.$tweenTarget=i;var n={onChange:function(){e.$owner.$gearLocked=!0,e.$owner.setXY(e.$tweenValue.x,e.$tweenValue.y),e.$owner.$gearLocked=!1}};null==this.$tweenValue&&(this.$tweenValue=new PIXI.Point),this.$tweenValue.x=this.$owner.x,this.$tweenValue.y=this.$owner.y,this.$tweener=createjs.Tween.get(this.$tweenValue,n).wait(1e3*this.$tweenDelay).to({x:i.x,y:i.y},1e3*this.$tweenTime,this.$easeType).call(this.tweenComplete,null,this)}}},i.prototype.tweenComplete=function(){0!=this.$lockToken&&(this.$owner.releaseGearDisplay(this.$lockToken),this.$lockToken=0),this.$tweener=null,this.$owner.emit("__gearStop",this)},i.prototype.updateState=function(){if(null!=this.$controller&&!this.$owner.$gearLocked&&!this.$owner.$inProgressBuilding){var t=this.$storage[this.$controller.selectedPageId];t||(t=new PIXI.Point,this.$storage[this.$controller.selectedPageId]=t),t.x=this.$owner.x,t.y=this.$owner.y}},i.prototype.updateFromRelations=function(t,e){if(null!=this.$controller&&null!=this.$storage){for(var i in this.$storage){var n=this.$storage[i];n.x+=t,n.y+=e}this.$default.x+=t,this.$default.y+=e,this.updateState()}},i}(t.GearBase);t.GearXY=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$type=0,t.$lineSize=0,t.$lineColor=0,t.$fillColor=0,t.$lineSize=1,t.$lineAlpha=1,t.$fillAlpha=1,t.$fillColor=16777215,t}return __extends(i,e),i.prototype.drawRect=function(t,e,i,n,s,r){void 0===r&&(r=null),this.$type=1,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=n,this.$fillAlpha=s,this.$corner=r,this.drawGraph()},i.prototype.drawEllipse=function(t,e,i,n,s){this.$type=2,this.$lineSize=t,this.$lineColor=e,this.$lineAlpha=i,this.$fillColor=n,this.$fillAlpha=s,this.$corner=null,this.drawGraph()},Object.defineProperty(i.prototype,"color",{get:function(){return this.$fillColor},set:function(t){this.$fillColor=t,0!=this.$type&&this.drawGraph()},enumerable:!0,configurable:!0}),i.prototype.drawGraph=function(){var t=this.$displayObject;t.interactive=this.touchable,t.clear();var e=this.width,i=this.height;if(0!=e&&0!=i){if(0==this.$lineSize?t.lineStyle(0,0,0):t.lineStyle(this.$lineSize,this.$lineColor,this.$lineAlpha),t.beginFill(this.$fillColor,this.$fillAlpha),1==this.$type)this.$corner&&this.$corner.length>=1?t.drawRoundedRect(0,0,e,i,this.$corner[0]):t.drawRect(0,0,e,i);else{var n=.5*e,s=.5*i;e==i?t.drawCircle(n,n,n):t.drawEllipse(n,s,n,s)}t.endFill()}},i.prototype.replaceMe=function(t){if(!this.$parent)throw new Error("parent not set");t.name=this.name,t.alpha=this.alpha,t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this.$parent.removeChild(this,!0)},i.prototype.addBeforeMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);this.$parent.addChildAt(t,e)},i.prototype.addAfterMe=function(t){if(null==this.$parent)throw new Error("parent not set");var e=this.$parent.getChildIndex(this);e++,this.$parent.addChildAt(t,e)},i.prototype.setNativeObject=function(t){this.$type=0;var e=this.$displayObject;e.interactive=this.touchable,e.clear(),e.removeChildren(),e.addChild(t)},i.prototype.createDisplayObject=function(){this.$displayObject=new t.UISprite(this)},i.prototype.handleSizeChanged=function(){0!=this.$type&&this.drawGraph()},i.prototype.setupBeforeAdd=function(i){e.prototype.setupBeforeAdd.call(this,i);var n=i.attributes.type;if(n&&"empty"!=n){var s=void 0;s=i.attributes.lineSize,s&&(this.$lineSize=parseInt(s));var r=void 0;s=i.attributes.lineColor,s&&(r=t.utils.StringUtil.convertFromHtmlColor(s,!0),this.$lineColor=16777215&r,this.$lineAlpha=(r>>24&255)/255),s=i.attributes.fillColor,s&&(r=t.utils.StringUtil.convertFromHtmlColor(s,!0),this.$fillColor=16777215&r,this.$fillAlpha=(r>>24&255)/255);var o=void 0;s=i.attributes.corner,s&&(o=s.split(","),o.length>1?this.$corner=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]:this.$corner=[parseInt(o[0])]),"rect"==n?this.$type=1:this.$type=2,this.drawGraph()}},i}(t.GObject);t.GGraph=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createDisplayObject=function(){var e=new t.UIContainer(this);e.interactive=!1,this.setDisplayObject(e)},i.prototype.updateBounds=function(){if(!this.$updating&&this.parent){var t=this.$parent.numChildren,e=0,i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;this.$empty=!0;var o,h=0;for(e=0;t>e;e++)o=this.$parent.getChildAt(e),o.group==this&&(h=o.x,i>h&&(i=h),h=o.y,n>h&&(n=h),h=o.x+o.width,h>s&&(s=h),h=o.y+o.height,h>r&&(r=h),this.$empty=!1);this.$updating=!0,this.$empty?this.setSize(0,0):(this.setXY(i,n),this.setSize(s-i,r-n)),this.$updating=!1}},i.prototype.setXY=function(t,i){if(this.$x!=t||this.$y!=i){var n=t-this.$x,s=i-this.$y;e.prototype.setXY.call(this,t,i),this.moveChildren(n,s)}},i.prototype.moveChildren=function(t,e){if(!this.$updating&&this.$parent){this.$updating=!0;var i,n=this.$parent.numChildren,s=0;for(s=0;n>s;s++)i=this.$parent.getChildAt(s),i.group==this&&i.setXY(i.x+t,i.y+e);this.$updating=!1}},i.prototype.updateAlpha=function(){if(e.prototype.updateAlpha.call(this),!this.$inProgressBuilding){var t,i,n=this.$parent.numChildren;for(t=0;n>t;t++)i=this.$parent.getChildAt(t),i.group==this&&(i.alpha=this.alpha)}},i}(t.GObject);t.GGroup=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$content.tint},set:function(t){this.color!=t&&(this.updateGear(4),this.$content.tint=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flip",{get:function(){return this.$flip},set:function(t){if(this.$flip!=t){this.$flip=t;var e=1,i=1;1!=this.$flip&&3!=this.$flip||(e=-1),2!=this.$flip&&3!=this.$flip||(i=-1),this.$content.scale.set(e,i),this.handleXYChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$content.texture},set:function(t){null!=t?(this.$sourceWidth=t.orig.width,this.$sourceHeight=t.orig.height):this.$sourceWidth=this.$sourceHeight=0,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.texture=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this.$content=new t.UIImage(this),this.setDisplayObject(this.$content)},i.prototype.dispose=function(){this.$content.destroy(),e.prototype.dispose.call(this)},i.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.$content.$initDisp(this.packageItem),this.setSize(this.$sourceWidth,this.$sourceHeight)},i.prototype.handleXYChanged=function(){e.prototype.handleXYChanged.call(this),0!=this.$flip&&(-1==this.$content.scale.x&&(this.$content.x+=this.width),-1==this.$content.scale.y&&(this.$content.y+=this.height))},i.prototype.handleSizeChanged=function(){this.$content.width=this.width,this.$content.height=this.height},i.prototype.setupBeforeAdd=function(i){e.prototype.setupBeforeAdd.call(this,i);var n;n=i.attributes.color,n&&(this.color=t.utils.StringUtil.convertFromHtmlColor(n)),n=i.attributes.flip,n&&(this.flip=t.ParseFlipType(n))},i}(t.GObject);t.GImage=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return null!=this.$iconObject?this.$iconObject.icon:null},set:function(t){null!=this.$iconObject&&(this.$iconObject.icon=t),this.updateGear(7)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this.$titleObject?this.$titleObject.text:null},set:function(t){this.$titleObject&&(this.$titleObject.text=t),this.updateGear(6)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.title},set:function(t){this.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleColor",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.titleColor:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.titleColor=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return t.isColorableTitle(this.$titleObject)?this.$titleObject.fontSize:0},set:function(e){t.isColorableTitle(this.$titleObject)&&(this.$titleObject.fontSize=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this.$titleObject&&this.$titleObject instanceof t.GTextInput?this.$titleObject.editable:!1},set:function(t){this.$titleObject&&(this.$titleObject.editable=t)},enumerable:!0,configurable:!0}),i.prototype.constructFromXML=function(t){e.prototype.constructFromXML.call(this,t),this.$titleObject=this.getChild("title"),this.$iconObject=this.getChild("icon")},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i);var n=t.utils.XmlParser.getChildNodes(i,"Label");if(n&&n.length>0){i=n[0];var s=void 0;if(s=i.attributes.title,s&&(this.text=s),s=i.attributes.icon,s&&(this.icon=s),s=i.attributes.titleColor,s&&(this.titleColor=t.utils.StringUtil.convertFromHtmlColor(s)),this.$titleObject instanceof t.GTextInput){s=i.attributes.prompt;var r=this.$titleObject;s&&(r.promptText=s),s=i.attributes.maxLength,s&&(r.maxLength=parseInt(s)),s=i.attributes.restrict,s&&(r.restrict=s),s=i.attributes.password,s&&(r.password="true"==s)}}},i}(t.GComponent);t.GLabel=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.width=0,this.height=0}return t}(),i=function(i){function n(){var e=i.call(this)||this;return e.scrollItemToViewOnClick=!0,e.foldInvisibleItems=!1,e.$lineCount=0,e.$columnCount=0,e.$lineGap=0,e.$columnGap=0,e.$numItems=0,e.$realNumItems=0,e.$firstIndex=0,e.$curLineItemCount=0,e.$curLineItemCount2=0,e.$virtualListChanged=0,e.$apexIndex=0,e.$childrenRenderOrder=0,e.$trackBounds=!0,e.$pool=new t.utils.GObjectRecycler,e.$layout=0,e.$autoResizeItem=!0,e.$selectionMode=0,e.opaque=!0,e.$align="left",e.$verticalAlign=0,e.$container=new PIXI.Container,e.$rootContainer.addChild(e.$container),e}return __extends(n,i),Object.defineProperty(n.prototype,"childrenRenderOrder",{get:function(){return this.$childrenRenderOrder},set:function(t){this.$childrenRenderOrder!=t&&(this.$childrenRenderOrder=t,this.appendChildrenList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"apexIndex",{get:function(){return this.$apexIndex},set:function(t){this.$apexIndex!=t&&(this.$apexIndex=t,2==this.$childrenRenderOrder&&this.appendChildrenList())},enumerable:!0,configurable:!0}),n.prototype.appendChildrenList=function(){var t=this.$children.length;if(0!=t){var e,i;switch(this.$childrenRenderOrder){case 0:for(e=0;t>e;e++)i=this.$children[e],null!=i.displayObject&&i.finalVisible&&this.$container.addChild(i.displayObject);break;case 1:for(e=t-1;e>=0;e--)i=this.$children[e],null!=i.displayObject&&i.finalVisible&&this.$container.addChild(i.displayObject);break;case 2:for(e=0;e<this.$apexIndex;e++)i=this.$children[e],null!=i.displayObject&&i.finalVisible&&this.$container.addChild(i.displayObject);for(e=t-1;e>=this.$apexIndex;e--)i=this.$children[e],null!=i.displayObject&&i.finalVisible&&this.$container.addChild(i.displayObject)}}},n.prototype.setXY=function(e,i){this.$x==e&&this.$y==i||(this.$x=e,this.$y=i,this.handleXYChanged(),this.updateGear(1),t.GObject.draggingObject!=this||t.GObject.sUpdatingWhileDragging||this.localToGlobalRect(0,0,this.width,this.height,t.GObject.sGlobalRect))},n.prototype.$setChildIndex=function(e,i,n){void 0===n&&(n=0);var s=this.$children.length;if(n>s&&(n=s),i==n)return i;if(this.$children.splice(i,1),this.$children.splice(n,0,e),e.inContainer){var r=0,o=void 0,h=void 0;if(0==this.$childrenRenderOrder){for(h=0;n>h;h++)o=this.$children[h],o.inContainer&&r++;r==this.$container.children.length&&r--,this.$container.setChildIndex(e.displayObject,r)}else if(1==this.$childrenRenderOrder){for(h=s-1;h>n;h--)o=this.$children[h],o.inContainer&&r++;r==this.$container.children.length&&r--,this.$container.setChildIndex(e.displayObject,r)}else t.GTimer.inst.callLater(this.appendChildrenList,this);this.setBoundsChangedFlag()}return n},n.prototype.childStateChanged=function(e){var i=this;if(!this.$buildingDisplayList){if(e instanceof t.GGroup)return void this.$children.forEach(function(t){t.group==e&&i.childStateChanged(t)},this);if(e.displayObject)if(e.finalVisible){var n=void 0,s=void 0,r=this.$children.length;if(!e.displayObject.parent){var o=0;if(0==this.$childrenRenderOrder){for(var h=0;r>h&&(s=this.$children[h],s!=e);h++)null!=s.displayObject&&null!=s.displayObject.parent&&o++;this.$container.addChildAt(e.displayObject,o)}else if(1==this.$childrenRenderOrder){for(n=r-1;n>=0&&(s=this.$children[n],s!=e);n--)null!=s.displayObject&&null!=s.displayObject.parent&&o++;this.$container.addChildAt(e.displayObject,o)}else this.$container.addChild(e.displayObject),t.GTimer.inst.callLater(this.appendChildrenList,this)}}else e.displayObject.parent&&this.$container.removeChild(e.displayObject)}},n.prototype.dispose=function(){t.GTimer.inst.remove(this._refreshVirtualList,this),this.$pool.clear(),this.$scrollPane&&(this.$scrollPane.off("__scroll",this.$scrolled,this),this.$scrollPane.dispose()),i.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"layout",{get:function(){return this.$layout},set:function(t){this.$layout!=t&&(this.$layout=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.$lineCount},set:function(t){this.$lineCount!=t&&(this.$lineCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this.$columnCount},set:function(t){this.$columnCount!=t&&(this.$columnCount=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineGap",{get:function(){return this.$lineGap},set:function(t){this.$lineGap!=t&&(this.$lineGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnGap",{get:function(){return this.$columnGap},set:function(t){this.$columnGap!=t&&(this.$columnGap=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"virtualItemSize",{get:function(){return this.$itemSize},set:function(t){this.$virtual&&(null==this.$itemSize&&(this.$itemSize=new PIXI.Point),this.$itemSize.copy(t),this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"defaultItem",{get:function(){return this.$defaultItem},set:function(t){this.$defaultItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoResizeItem",{get:function(){return this.$autoResizeItem},set:function(t){this.$autoResizeItem!=t&&(this.$autoResizeItem=t,this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionMode",{get:function(){return this.$selectionMode},set:function(t){this.$selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectionController",{get:function(){return this.$selectionController},set:function(t){this.$selectionController=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemPool",{get:function(){return this.$pool},enumerable:!0,configurable:!0}),n.prototype.getFromPool=function(t){void 0===t&&(t=null),t||(t=this.$defaultItem);var e=this.$pool.get(t);return null!=e&&(e.visible=!0),e},n.prototype.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this.$pool.recycle(t.resourceURL,t)},n.prototype.addChildAt=function(e,n){if(void 0===n&&(n=0),i.prototype.addChildAt.call(this,e,n),e instanceof t.GButton){var s=e;s.selected=!1,s.changeStateOnClick=!1}return e.click(this.$clickItem,this),e},n.prototype.addItem=function(e){return void 0===e&&(e=null),e||(e=this.$defaultItem),this.addChild(t.UIPackage.createObjectFromURL(e))},n.prototype.addItemFromPool=function(t){return void 0===t&&(t=null),this.addChild(this.getFromPool(t))},n.prototype.removeChildAt=function(e,i){if(void 0===i&&(i=!1),e>=0&&e<this.numChildren){var n=this.$children[e];return n.parent=null,0!=n.sortingOrder&&this.$sortingChildCount--,this.$children.splice(e,1),n.inContainer&&(this.$container.removeChild(n.displayObject),2==this.$childrenRenderOrder&&t.GTimer.inst.callLater(this.appendChildrenList,this)),i===!0&&n.dispose(),this.setBoundsChangedFlag(),n.removeClick(this.$clickItem,this),n}throw new Error("Invalid child index")},n.prototype.removeChildToPoolAt=function(t){void 0===t&&(t=0);var e=i.prototype.removeChildAt.call(this,t);this.returnToPool(e)},n.prototype.removeChildToPool=function(t){i.prototype.removeChild.call(this,t),this.returnToPool(t)},n.prototype.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this.$children.length)&&(e=this.$children.length-1);for(var i=t;e>=i;++i)this.removeChildToPoolAt(t)},Object.defineProperty(n.prototype,"selectedIndex",{get:function(){for(var t=this.$children.length,e=0;t>e;e++){var i=this.$children[e];if(null!=i&&i.selected)return this.childIndexToItemIndex(e)}return-1},set:function(t){this.clearSelection(),t>=0&&t<this.numItems&&this.addSelection(t)},enumerable:!0,configurable:!0}),n.prototype.getSelection=function(){var t=this,e=[];return this.$children.forEach(function(i,n){null!=i&&i.selected&&e.push(t.childIndexToItemIndex(n))},this),e},n.prototype.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this.$selectionMode&&(this.checkVirtualList(),0==this.$selectionMode&&this.clearSelection(),e&&this.scrollToView(t),t=this.itemIndexToChildIndex(t),!(0>t||t>=this.$children.length))){var i=this.getChildAt(t);null==i||i.selected||(i.selected=!0,this.updateSelectionController(t))}},n.prototype.removeSelection=function(t){if(void 0===t&&(t=0),3!=this.$selectionMode&&(t=this.itemIndexToChildIndex(t),!(t>=this.$children.length))){var e=this.getChildAt(t);null!=e&&e.selected&&(e.selected=!1)}},n.prototype.clearSelection=function(){this.$children.forEach(function(t){null!=t&&(t.selected=!1)},this)},n.prototype.selectAll=function(){this.checkVirtualList();var t=-1;this.$children.forEach(function(e,i){e&&(e.selected=!0,t=i)},this),-1!=t&&this.updateSelectionController(t)},n.prototype.selectNone=function(){this.$children.forEach(function(e){e&&e instanceof t.GButton&&(e.selected=!1)},this)},n.prototype.selectReverse=function(){this.checkVirtualList();var e=-1;this.$children.forEach(function(i,n){i&&i instanceof t.GButton&&(i.selected=!i.selected,i.selected&&(e=n))},this),-1!=e&&this.updateSelectionController(e)},n.prototype.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e){var i,n,s,r,o;switch(t){case 1:if(0==this.$layout||3==this.$layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this.$layout||4==this.$layout){n=this.$children[e],r=0;for(var h=e-1;h>=0;h--){if(i=this.$children[h],i.y!=n.y){n=i;break}r++}for(;s>=0;s--)if(i=this.$children[s],i.y!=n.y){this.clearSelection(),this.addSelection(s+r+1,!0);break}}break;case 3:if(1==this.$layout||2==this.$layout||4==this.$layout)e++,e<this.$children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this.$layout){for(n=this.$children[e],r=0,o=this.$children.length,s=e+1;o>s;s++){if(i=this.$children[s],i.x!=n.x){n=i;break}r++}for(;o>s;s++)if(i=this.$children[s],i.x!=n.x){this.clearSelection(),this.addSelection(s-r-1,!0);break}}break;case 5:if(0==this.$layout||3==this.$layout)e++,e<this.$children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this.$layout||4==this.$layout){for(n=this.$children[e],r=0,o=this.$children.length,s=e+1;o>s;s++){if(i=this.$children[s],i.y!=n.y){n=i;break}r++}for(;o>s;s++)if(i=this.$children[s],i.y!=n.y){this.clearSelection(),this.addSelection(s-r-1,!0);break}}break;case 7:if(1==this.$layout||2==this.$layout||4==this.$layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this.$layout){for(n=this.$children[e],r=0,s=e-1;s>=0;s--){if(i=this.$children[s],i.x!=n.x){n=i;break}r++}for(;s>=0;s--)if(i=this.$children[s],i.x!=n.x){this.clearSelection(),this.addSelection(s+r+1,!0);break}}}}},n.prototype.$clickItem=function(e){if(null==this.$scrollPane||!this.$scrollPane.$isDragged){var i=t.GObject.castFromNativeObject(e.currentTarget);i&&(this.setSelectionOnEvent(i),this.$scrollPane&&this.scrollItemToViewOnClick&&this.$scrollPane.scrollToView(i,!0),this.emit("__itemClick",e,i))}},n.prototype.setSelectionOnEvent=function(e){if(e instanceof t.GButton&&3!=this.$selectionMode){var i=this.getChildIndex(e);0==this.$selectionMode?e.selected||(this.clearSelectionExcept(e),e.selected=!0):e.selected?this.clearSelectionExcept(e):(this.clearSelectionExcept(e),e.selected=!0),e.selected&&this.updateSelectionController(i)}},n.prototype.clearSelectionExcept=function(e){this.$children.forEach(function(e){e&&e instanceof t.GButton&&e.selected&&(e.selected=!1)},this)},n.prototype.resizeToFit=function(t,e){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(t>i&&(t=i),this.$virtual){var n=Math.ceil(t/this.$curLineItemCount);0==this.$layout||2==this.$layout?this.viewHeight=n*this.$itemSize.y+Math.max(0,n-1)*this.$lineGap:this.viewWidth=n*this.$itemSize.x+Math.max(0,n-1)*this.$columnGap}else if(0==t)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{for(var s=t-1,r=null;s>=0&&(r=this.getChildAt(s),this.foldInvisibleItems&&!r.visible);)s--;if(0>s)0==this.$layout||2==this.$layout?this.viewHeight=e:this.viewWidth=e;else{var o=0;0==this.$layout||2==this.$layout?(o=r.y+r.height,e>o&&(o=e),this.viewHeight=o):(o=r.x+r.width,e>o&&(o=e),this.viewWidth=o)}}},n.prototype.getMaxItemWidth=function(){var t=0;return this.$children.forEach(function(e){e&&e.width>t&&(t=e.width)},this),t},n.prototype.handleSizeChanged=function(){i.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this.$virtual&&this.setVirtualListChangedFlag(!0)},n.prototype.handleControllerChanged=function(t){i.prototype.handleControllerChanged.call(this,t),this.$selectionController==t&&(this.selectedIndex=t.selectedIndex)},n.prototype.updateSelectionController=function(t){if(null!=this.$selectionController&&!this.$selectionController.$updating&&t<this.$selectionController.pageCount){var e=this.$selectionController;this.$selectionController=null,e.selectedIndex=t,this.$selectionController=e}},n.prototype.getSnappingPosition=function(t,e,s){if(this.$virtual){s||(s=new PIXI.Point);var r=void 0,o=void 0;return 0==this.$layout||2==this.$layout?(r=e,n.posHelper=e,o=this.getIndexOnPos1(!1),e=n.posHelper,o<this.$virtualItems.length&&r-e>this.$virtualItems[o].height/2&&o<this.$realNumItems&&(e+=this.$virtualItems[o].height+this.$lineGap)):1==this.$layout||3==this.$layout?(r=t,n.posHelper=t,o=this.getIndexOnPos2(!1),
t=n.posHelper,o<this.$virtualItems.length&&r-t>this.$virtualItems[o].width/2&&o<this.$realNumItems&&(t+=this.$virtualItems[o].width+this.$columnGap)):(r=t,n.posHelper=t,o=this.getIndexOnPos3(!1),t=n.posHelper,o<this.$virtualItems.length&&r-t>this.$virtualItems[o].width/2&&o<this.$realNumItems&&(t+=this.$virtualItems[o].width+this.$columnGap)),s.x=t,s.y=e,s}return i.prototype.getSnappingPosition.call(this,t,e,s)},n.prototype.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this.$virtual){if(0==this.$numItems)return;if(this.checkVirtualList(),t>=this.$virtualItems.length)throw new Error("Invalid child index: "+t+" is larger than max length: "+this.$virtualItems.length);this.$loop&&(t=Math.floor(this.$firstIndex/this.$numItems)*this.$numItems+t);var n=void 0,s=this.$virtualItems[t],r=0,o=void 0;if(0==this.$layout||2==this.$layout){for(o=0;t>o;o+=this.$curLineItemCount)r+=this.$virtualItems[o].height+this.$lineGap;n=new PIXI.Rectangle(0,r,this.$itemSize.x,s.height)}else if(1==this.$layout||3==this.$layout){for(o=0;t>o;o+=this.$curLineItemCount)r+=this.$virtualItems[o].width+this.$columnGap;n=new PIXI.Rectangle(r,0,s.width,this.$itemSize.y)}else{var h=t/(this.$curLineItemCount*this.$curLineItemCount2);n=new PIXI.Rectangle(h*this.viewWidth+t%this.$curLineItemCount*(s.width+this.$columnGap),t/this.$curLineItemCount%this.$curLineItemCount2*(s.height+this.$lineGap),s.width,s.height)}i=!0,null!=this.$scrollPane&&this.$scrollPane.scrollToView(n,e,i)}else{var a=this.getChildAt(t);null!=a&&(null!=this.$scrollPane?this.$scrollPane.scrollToView(a,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(a,e,i))}},n.prototype.getFirstChildInView=function(){return this.childIndexToItemIndex(i.prototype.getFirstChildInView.call(this))},n.prototype.childIndexToItemIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout){for(var e=this.$firstIndex;e<this.$realNumItems;e++)if(null!=this.$virtualItems[e].obj&&(t--,0>t))return e;return t}return t+=this.$firstIndex,this.$loop&&this.$numItems>0&&(t%=this.$numItems),t},n.prototype.itemIndexToChildIndex=function(t){if(!this.$virtual)return t;if(4==this.$layout)return this.getChildIndex(this.$virtualItems[t].obj);if(this.$loop&&this.$numItems>0){var e=this.$firstIndex%this.$numItems;t=t>=e?this.$firstIndex+(t-e):this.$firstIndex+this.$numItems+(e-t)}else t-=this.$firstIndex;return t},n.prototype.setVirtual=function(){this.$setVirtual(!1)},n.prototype.setVirtualAndLoop=function(){this.$setVirtual(!0)},n.prototype.$setVirtual=function(t){if(!this.$virtual){if(null==this.$scrollPane)throw new Error("Virtual list must be scrollable");if(t){if(2==this.$layout||3==this.$layout)throw new Error("Virtual list with loop mode is not supported for both FlowHorizontal and FlowVertical layout");this.$scrollPane.bouncebackEffect=!1}if(this.$virtual=!0,this.$loop=t,this.$virtualItems=[],this.removeChildrenToPool(),null==this.$itemSize){this.$itemSize=new PIXI.Point;var e=this.getFromPool(null);if(null==e)throw new Error("Virtual list must have a default list item resource specified.");this.$itemSize.x=e.width,this.$itemSize.y=e.height,this.returnToPool(e)}0==this.$layout||2==this.$layout?this.$scrollPane.scrollSpeed=this.$itemSize.y:this.$scrollPane.scrollSpeed=this.$itemSize.x,this.$scrollPane.on("__scroll",this.$scrolled,this),this.setVirtualListChangedFlag(!0)}},Object.defineProperty(n.prototype,"numItems",{get:function(){return this.$virtual?this.$numItems:this.$children.length},set:function(i){if(this.$virtual){if(null==this.itemRenderer)throw new Error("list.itemRenderer is required");this.$numItems=i,this.$loop?this.$realNumItems=5*this.$numItems:this.$realNumItems=this.$numItems;var n=this.$virtualItems.length;if(this.$realNumItems>n)for(var s=n;s<this.$realNumItems;s++){var r=new e;r.width=this.$itemSize.x,r.height=this.$itemSize.y,this.$virtualItems.push(r)}0!=this.$virtualListChanged&&t.GTimer.inst.remove(this._refreshVirtualList,this),this._refreshVirtualList()}else{var o=this.$children.length;if(i>o)for(var s=o;i>s;s++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider(s));else this.removeChildrenToPool(i,o);if(null!=this.itemRenderer)for(var s=0;i>s;s++)this.itemRenderer(s,this.getChildAt(s))}},enumerable:!0,configurable:!0}),n.prototype.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},n.prototype.checkVirtualList=function(){0!=this.$virtualListChanged&&(this._refreshVirtualList(),t.GTimer.inst.remove(this._refreshVirtualList,this))},n.prototype.setVirtualListChangedFlag=function(e){void 0===e&&(e=!1),e?this.$virtualListChanged=2:0==this.$virtualListChanged&&(this.$virtualListChanged=1),t.GTimer.inst.callLater(this._refreshVirtualList,this)},n.prototype._refreshVirtualList=function(){var t=2==this.$virtualListChanged;this.$virtualListChanged=0,this.$eventLocked=!0,t&&(0==this.$layout||1==this.$layout?this.$curLineItemCount=1:2==this.$layout?this.$columnCount>0?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):3==this.$layout?this.$lineCount>0?this.$curLineItemCount=this.$lineCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)):(this.$columnCount>0?this.$curLineItemCount=this.$columnCount:(this.$curLineItemCount=Math.floor((this.$scrollPane.viewWidth+this.$columnGap)/(this.$itemSize.x+this.$columnGap)),this.$curLineItemCount<=0&&(this.$curLineItemCount=1)),this.$lineCount>0?this.$curLineItemCount2=this.$lineCount:(this.$curLineItemCount2=Math.floor((this.$scrollPane.viewHeight+this.$lineGap)/(this.$itemSize.y+this.$lineGap)),this.$curLineItemCount2<=0&&(this.$curLineItemCount2=1))));var e=0,i=0;if(this.$realNumItems>0){var n=void 0,s=Math.ceil(this.$realNumItems/this.$curLineItemCount)*this.$curLineItemCount,r=Math.min(this.$curLineItemCount,this.$realNumItems);if(0==this.$layout||2==this.$layout){for(n=0;s>n;n+=this.$curLineItemCount)e+=this.$virtualItems[n].height+this.$lineGap;if(e>0&&(e-=this.$lineGap),this.$autoResizeItem)i=this.$scrollPane.viewWidth;else{for(n=0;r>n;n++)i+=this.$virtualItems[n].width+this.$columnGap;i>0&&(i-=this.$columnGap)}}else if(1==this.$layout||3==this.$layout){for(n=0;s>n;n+=this.$curLineItemCount)i+=this.$virtualItems[n].width+this.$columnGap;if(i>0&&(i-=this.$columnGap),this.$autoResizeItem)e=this.scrollPane.viewHeight;else{for(n=0;r>n;n++)e+=this.$virtualItems[n].height+this.$lineGap;e>0&&(e-=this.$lineGap)}}else{var o=Math.ceil(s/(this.$curLineItemCount*this.$curLineItemCount2));i=o*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this.$scrollPane.setContentSize(i,e),this.$eventLocked=!1,this.handleScroll(!0)},n.prototype.$scrolled=function(t){this.handleScroll(!1)},n.prototype.getIndexOnPos1=function(t){if(this.$realNumItems<this.$curLineItemCount)return n.posHelper=0,0;var e,i,s;if(this.numChildren>0&&!t){if(i=this.getChildAt(0).y,i>n.posHelper){for(e=this.$firstIndex-this.$curLineItemCount;e>=0;e-=this.$curLineItemCount)if(i-=this.$virtualItems[e].height+this.$lineGap,i<=n.posHelper)return n.posHelper=i,e;return n.posHelper=0,0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if(s=i+this.$virtualItems[e].height+this.$lineGap,s>n.posHelper)return n.posHelper=i,e;i=s}return n.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(i=0,e=0;e<this.$realNumItems;e+=this.$curLineItemCount){if(s=i+this.$virtualItems[e].height+this.$lineGap,s>n.posHelper)return n.posHelper=i,e;i=s}return n.posHelper=i,this.$realNumItems-this.$curLineItemCount},n.prototype.getIndexOnPos2=function(t){if(this.$realNumItems<this.$curLineItemCount)return n.posHelper=0,0;var e,i,s;if(this.numChildren>0&&!t){if(i=this.getChildAt(0).x,i>n.posHelper){for(e=this.$firstIndex-this.$curLineItemCount;e>=0;e-=this.$curLineItemCount)if(i-=this.$virtualItems[e].width+this.$columnGap,i<=n.posHelper)return n.posHelper=i,e;return n.posHelper=0,0}for(e=this.$firstIndex;e<this.$realNumItems;e+=this.$curLineItemCount){if(s=i+this.$virtualItems[e].width+this.$columnGap,s>n.posHelper)return n.posHelper=i,e;i=s}return n.posHelper=i,this.$realNumItems-this.$curLineItemCount}for(i=0,e=0;e<this.$realNumItems;e+=this.$curLineItemCount){if(s=i+this.$virtualItems[e].width+this.$columnGap,s>n.posHelper)return n.posHelper=i,e;i=s}return n.posHelper=i,this.$realNumItems-this.$curLineItemCount},n.prototype.getIndexOnPos3=function(t){if(this.$realNumItems<this.$curLineItemCount)return n.posHelper=0,0;var e,i,s=this.viewWidth,r=Math.floor(n.posHelper/s),o=r*(this.$curLineItemCount*this.$curLineItemCount2),h=r*s;for(i=0;i<this.$curLineItemCount;i++){if(e=h+this.$virtualItems[o+i].width+this.$columnGap,e>n.posHelper)return n.posHelper=h,o+i;h=e}return n.posHelper=h,o+this.$curLineItemCount-1},n.prototype.handleScroll=function(t){if(!this.$eventLocked){var e,i;0==this.$layout||2==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosY,i=this.$numItems*(this.$itemSize.y+this.$lineGap),0==e?this.$scrollPane.posY=i:e==this.$scrollPane.contentHeight-this.$scrollPane.viewHeight&&(this.$scrollPane.posY=this.$scrollPane.contentHeight-i-this.viewHeight)),this.handleScroll1(t)):1==this.$layout||3==this.$layout?(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=this.$numItems*(this.$itemSize.x+this.$columnGap),0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll2(t)):(this.$loop&&(e=this.$scrollPane.scrollingPosX,i=Math.floor(this.$numItems/(this.$curLineItemCount*this.$curLineItemCount2))*this.viewWidth,0==e?this.$scrollPane.posX=i:e==this.$scrollPane.contentWidth-this.$scrollPane.viewWidth&&(this.$scrollPane.posX=this.$scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll3(t)),this.$boundsChanged=!1}},n.prototype.handleScroll1=function(e){if(n.scrollEnterCounter++,!(n.scrollEnterCounter>3)){var i=this.$scrollPane.scrollingPosY,s=i+this.$scrollPane.viewHeight,r=s==this.$scrollPane.contentHeight;n.posHelper=i;var o=this.getIndexOnPos1(e);if(i=n.posHelper,o==this.$firstIndex&&!e)return void n.scrollEnterCounter--;var h=this.$firstIndex;this.$firstIndex=o;var a,l,c,u,p,$=o,d=h>o,f=this.numChildren,g=h+f-1,y=d?g:h,m=0,b=i,v=0,w=0,I=this.defaultItem,x=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(n.posHelper++;$<this.$realNumItems&&(r||s>b);){if(l=this.$virtualItems[$],(null==l.obj||e)&&(null!=this.itemProvider&&(I=this.itemProvider($%this.$numItems),null==I&&(I=this.$defaultItem),I=t.UIPackage.normalizeURL(I)),null!=l.obj&&l.obj.resourceURL!=I&&(this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(p=y;p>=h;p--)if(c=this.$virtualItems[p],null!=c.obj&&c.updateFlag!=n.itemInfoReuseFlag&&c.obj.resourceURL==I){l.obj=c.obj,c.obj=null,p==y&&y--;break}}else for(p=y;g>=p;p++)if(c=this.$virtualItems[p],null!=c.obj&&c.updateFlag!=n.itemInfoReuseFlag&&c.obj.resourceURL==I){l.obj=c.obj,c.obj=null,p==y&&y++;break}null!=l.obj?this.setChildIndex(l.obj,d?$-o:this.numChildren):(l.obj=this.$pool.get(I),d?this.addChildAt(l.obj,$-o):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=!1),a=!0}else a=e;a&&(this.$autoResizeItem&&(0==this.$layout||this.$columnCount>0)&&l.obj.setSize(x,l.obj.height,!0),this.itemRenderer($%this.$numItems,l.obj),$%this.$curLineItemCount==0&&(v+=Math.ceil(l.obj.height)-l.height,$==o&&h>o&&(w=Math.ceil(l.obj.height)-l.height)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=n.itemInfoReuseFlag,l.obj.setXY(m,b),$==o&&(s+=l.height),m+=l.width+this.$columnGap,$%this.$curLineItemCount==this.$curLineItemCount-1&&(m=0,b+=l.height+this.$lineGap),$++}for(u=0;f>u;u++)l=this.$virtualItems[h+u],l.updateFlag!=n.itemInfoReuseFlag&&null!=l.obj&&(this.removeChildToPool(l.obj),l.obj=null);0==v&&0==w||this.$scrollPane.changeContentSizeOnScrolling(0,v,0,w),$>0&&this.numChildren>0&&this.$container.y<0&&this.getChildAt(0).y>-this.$container.y&&this.handleScroll1(!1),n.scrollEnterCounter--}},n.prototype.handleScroll2=function(e){if(n.scrollEnterCounter++,!(n.scrollEnterCounter>3)){var i=this.$scrollPane.scrollingPosX,s=i+this.$scrollPane.viewWidth,r=i==this.$scrollPane.contentWidth;n.posHelper=i;var o=this.getIndexOnPos2(e);if(i=n.posHelper,o==this.$firstIndex&&!e)return void n.scrollEnterCounter--;var h=this.$firstIndex;this.$firstIndex=o;var a,l,c,u,p,$=o,d=h>o,f=this.numChildren,g=h+f-1,y=d?g:h,m=i,b=0,v=0,w=0,I=this.defaultItem,x=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount-1))/this.$curLineItemCount;for(n.itemInfoReuseFlag++;$<this.$realNumItems&&(r||s>m);){if(l=this.$virtualItems[$],(null==l.obj||e)&&(null!=this.itemProvider&&(I=this.itemProvider($%this.$numItems),null==I&&(I=this.$defaultItem),I=t.UIPackage.normalizeURL(I)),null!=l.obj&&l.obj.resourceURL!=I&&(this.removeChildToPool(l.obj),l.obj=null)),null==l.obj){if(d){for(p=y;p>=h;p--)if(c=this.$virtualItems[p],null!=c.obj&&c.updateFlag!=n.itemInfoReuseFlag&&c.obj.resourceURL==I){l.obj=c.obj,c.obj=null,p==y&&y--;break}}else for(p=y;g>=p;p++)if(c=this.$virtualItems[p],null!=c.obj&&c.updateFlag!=n.itemInfoReuseFlag&&c.obj.resourceURL==I){l.obj=c.obj,c.obj=null,p==y&&y++;break}null!=l.obj?this.setChildIndex(l.obj,d?$-o:this.numChildren):(l.obj=this.$pool.get(I),d?this.addChildAt(l.obj,$-o):this.addChild(l.obj)),l.obj instanceof t.GButton&&(l.obj.selected=!1),a=!0}else a=e;a&&(this.$autoResizeItem&&(1==this.$layout||this.$lineCount>0)&&l.obj.setSize(l.obj.width,x,!0),this.itemRenderer($%this.$numItems,l.obj),$%this.$curLineItemCount==0&&(v+=Math.ceil(l.obj.width)-l.width,$==o&&h>o&&(w=Math.ceil(l.obj.width)-l.width)),l.width=Math.ceil(l.obj.width),l.height=Math.ceil(l.obj.height)),l.updateFlag=n.itemInfoReuseFlag,l.obj.setXY(m,b),$==o&&(s+=l.width),b+=l.height+this.$lineGap,$%this.$curLineItemCount==this.$curLineItemCount-1&&(b=0,m+=l.width+this.$columnGap),$++}for(u=0;f>u;u++)l=this.$virtualItems[h+u],l.updateFlag!=n.itemInfoReuseFlag&&null!=l.obj&&(this.removeChildToPool(l.obj),l.obj=null);0==v&&0==w||this.$scrollPane.changeContentSizeOnScrolling(v,0,w,0),$>0&&this.numChildren>0&&this.$container.x<0&&this.getChildAt(0).x>-this.$container.x&&this.handleScroll2(!1),n.scrollEnterCounter--}},n.prototype.handleScroll3=function(e){var i=this.$scrollPane.scrollingPosX;n.posHelper=i;var s=this.getIndexOnPos3(e);if(i=n.posHelper,s!=this.$firstIndex||e){var r=this.$firstIndex;this.$firstIndex=s;var o,h,a,l,c,u=r,p=this.$virtualItems.length,$=this.$curLineItemCount*this.$curLineItemCount2,d=s%this.$curLineItemCount,f=this.viewWidth,g=Math.floor(s/$),y=g*$,m=y+2*$,b=this.$defaultItem,v=(this.$scrollPane.viewWidth-this.$columnGap*(this.$curLineItemCount-1))/this.$curLineItemCount,w=(this.$scrollPane.viewHeight-this.$lineGap*(this.$curLineItemCount2-1))/this.$curLineItemCount2;for(n.itemInfoReuseFlag++,h=y;m>h;h++)if(!(h>=this.$realNumItems)){if(c=h%this.$curLineItemCount,$>h-y){if(d>c)continue}else if(c>d)continue;a=this.$virtualItems[h],a.updateFlag=n.itemInfoReuseFlag}var I=null,x=0;for(h=y;m>h;h++)if(!(h>=this.$realNumItems)&&(a=this.$virtualItems[h],a.updateFlag==n.itemInfoReuseFlag)){if(null==a.obj){for(;p>u;){if(l=this.$virtualItems[u],null!=l.obj&&l.updateFlag!=n.itemInfoReuseFlag){a.obj=l.obj,l.obj=null;break}u++}-1==x&&(x=this.getChildIndex(I)+1),null==a.obj?(null!=this.itemProvider&&(b=this.itemProvider(h%this.$numItems),null==b&&(b=this.$defaultItem),b=t.UIPackage.normalizeURL(b)),a.obj=this.$pool.get(b),this.addChildAt(a.obj,x)):x=this.setChildIndexBefore(a.obj,x),x++,a.obj instanceof t.GButton&&(a.obj.selected=!1),o=!0}else o=e,x=-1,I=a.obj;o&&(this.$autoResizeItem&&(this.$curLineItemCount==this.$columnCount&&this.$curLineItemCount2==this.$lineCount?a.obj.setSize(v,w,!0):this.$curLineItemCount==this.$columnCount?a.obj.setSize(v,a.obj.height,!0):this.$curLineItemCount2==this.$lineCount&&a.obj.setSize(a.obj.width,w,!0)),this.itemRenderer(h%this.$numItems,a.obj),a.width=Math.ceil(a.obj.width),a.height=Math.ceil(a.obj.height))}var C=y/$*f,P=C,O=0,S=0;for(h=y;m>h;h++)h>=this.$realNumItems||(a=this.$virtualItems[h],a.updateFlag==n.itemInfoReuseFlag&&a.obj.setXY(P,O),a.height>S&&(S=a.height),h%this.$curLineItemCount==this.$curLineItemCount-1?(P=C,O+=S+this.$lineGap,S=0,h==y+$-1&&(C+=f,P=C,O=0)):P+=a.width+this.$columnGap);for(h=u;p>h;h++)a=this.$virtualItems[h],a.updateFlag!=n.itemInfoReuseFlag&&null!=a.obj&&(this.removeChildToPool(a.obj),a.obj=null)}},n.prototype.handleAlign=function(t,e){var i=0,n=0;e<this.viewHeight&&(1==this.$verticalAlign?n=Math.floor((this.viewHeight-e)/2):2==this.$verticalAlign&&(n=this.viewHeight-e)),t<this.viewWidth&&("center"==this.$align?i=Math.floor((this.viewWidth-t)/2):"right"==this.$align&&(i=this.viewWidth-t)),i==this.$alignOffset.x&&n==this.$alignOffset.y||(this.$alignOffset.set(i,n),null!=this.$scrollPane?this.$scrollPane.adjustMaskContainer():(this.$container.x=this.$margin.left+this.$alignOffset.x,this.$container.y=this.$margin.top+this.$alignOffset.y))},n.prototype.updateBounds=function(){if(!this.$virtual){var t,e,i=0,n=0,s=0,r=0,o=0,h=0,a=0,l=0,c=0,u=this.$children.length,p=this.viewWidth,$=this.viewHeight,d=0,f=0,g=0;if(0==this.$layout){for(t=0;u>t;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this.$lineGap),e.y=n,this.$autoResizeItem&&e.setSize(p,e.height,!0),n+=Math.ceil(e.height),e.width>s&&(s=e.width));o=Math.ceil(s),h=n}else if(1==this.$layout){for(t=0;u>t;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),e.x=i,this.$autoResizeItem&&e.setSize(e.width,$,!0),i+=Math.ceil(e.width),e.height>r&&(r=e.height));o=i,h=Math.ceil(r)}else if(2==this.$layout)if(this.$autoResizeItem&&this.$columnCount>0){for(t=0;u>t;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceWidth,a++,a==this.$columnCount||t==u-1)){for(g=(p-d-(a-1)*this.$columnGap)/d,i=0,a=f;t>=a;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),t>a?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*g),e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(p-i,e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this.$lineGap,r=0,a=0,f=t+1,d=0}h=n+Math.ceil(r),o=p}else{for(t=0;u>t;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),(0!=this.$columnCount&&a>=this.$columnCount||0==this.$columnCount&&i+e.width>p&&0!=r)&&(i=0,n+=Math.ceil(r)+this.$lineGap,r=0,a=0),e.setXY(i,n),i+=Math.ceil(e.width),i>s&&(s=i),e.height>r&&(r=e.height),a++);h=n+Math.ceil(r),o=Math.ceil(s)}else if(3==this.$layout)if(this.$autoResizeItem&&this.$lineCount>0){for(t=0;u>t;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceHeight,a++,a==this.$lineCount||t==u-1)){for(g=($-d-(a-1)*this.$lineGap)/d,n=0,a=f;t>=a;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(i,n),t>a?(e.setSize(e.width,e.sourceHeight+Math.round(e.sourceHeight*g),!0),n+=Math.ceil(e.height)+this.$lineGap):e.setSize(e.width,$-n,!0),e.width>s&&(s=e.width));i+=Math.ceil(s)+this.$columnGap,s=0,a=0,f=t+1,d=0}o=i+Math.ceil(s),h=$}else{for(t=0;u>t;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=n&&(n+=this.$lineGap),(0!=this.$lineCount&&a>=this.$lineCount||0==this.$lineCount&&n+e.height>$&&0!=s)&&(n=0,i+=Math.ceil(s)+this.$columnGap,s=0,a=0),e.setXY(i,n),n+=Math.ceil(e.height),n>r&&(r=n),e.width>s&&(s=e.width),a++);o=i+Math.ceil(s),h=Math.ceil(r)}else{var y=void 0;if(this.$autoResizeItem&&this.$lineCount>0&&(y=Math.floor(($-(this.$lineCount-1)*this.$lineGap)/this.$lineCount)),this.$autoResizeItem&&this.$columnCount>0){for(t=0;u>t;t++)if(e=this.getChildAt(t),(!this.foldInvisibleItems||e.visible)&&(d+=e.sourceWidth,a++,a==this.$columnCount||t==u-1)){for(g=(p-d-(a-1)*this.$columnGap)/d,i=0,a=f;t>=a;a++)e=this.getChildAt(a),this.foldInvisibleItems&&!e.visible||(e.setXY(l*p+i,n),t>a?(e.setSize(e.sourceWidth+Math.round(e.sourceWidth*g),this.$lineCount>0?y:e.height,!0),i+=Math.ceil(e.width)+this.$columnGap):e.setSize(p-i,this.$lineCount>0?y:e.height,!0),e.height>r&&(r=e.height));n+=Math.ceil(r)+this.$lineGap,r=0,a=0,f=t+1,d=0,c++,(0!=this.$lineCount&&c>=this.$lineCount||0==this.$lineCount&&n+e.height>$)&&(l++,n=0,c=0)}}else for(t=0;u>t;t++)e=this.getChildAt(t),this.foldInvisibleItems&&!e.visible||(0!=i&&(i+=this.$columnGap),this.$autoResizeItem&&this.$lineCount>0&&e.setSize(e.width,y,!0),(0!=this.$columnCount&&a>=this.$columnCount||0==this.$columnCount&&i+e.width>p&&0!=r)&&(i=0,n+=Math.ceil(r)+this.$lineGap,r=0,a=0,c++,(0!=this.$lineCount&&c>=this.$lineCount||0==this.$lineCount&&n+e.height>$&&0!=s)&&(l++,n=0,c=0)),e.setXY(l*p+i,n),i+=Math.ceil(e.width),i>s&&(s=i),e.height>r&&(r=e.height),a++);h=l>0?$:n+Math.ceil(r),o=(l+1)*p}this.handleAlign(o,h),this.setBounds(0,0,o,h)}},n.prototype.setupBeforeAdd=function(e){var n=this;i.prototype.setupBeforeAdd.call(this,e);var s,r;s=e.attributes.layout,s&&(this.$layout=t.ParseListLayoutType(s));var o;if(s=e.attributes.overflow,o=s?t.ParseOverflowType(s):0,s=e.attributes.margin,s&&this.$margin.parse(s),s=e.attributes.align,s&&(this.$align=t.ParseAlignType(s)),s=e.attributes.vAlign,s&&(this.$verticalAlign=t.ParseVertAlignType(s)),2==o){var h;s=e.attributes.scroll,h=s?t.ParseScrollType(s):1;var a=void 0;s=e.attributes.scrollBar,a=s?t.ParseScrollBarDisplayType(s):0;var l=void 0;s=e.attributes.scrollBarFlags,l=s?parseInt(s):0;var c=new t.utils.Margin;s=e.attributes.scrollBarMargin,s&&c.parse(s);var u=void 0,p=void 0;s=e.attributes.scrollBarRes,s&&(r=s.split(","),u=r[0],p=r[1]),this.setupScroll(c,h,a,l,u,p)}else this.setupOverflow(o);s=e.attributes.lineGap,s&&(this.$lineGap=parseInt(s)),s=e.attributes.colGap,s&&(this.$columnGap=parseInt(s)),s=e.attributes.lineItemCount,s&&(2==this.$layout||4==this.$layout?this.$columnCount=parseInt(s):3==this.$layout&&(this.$lineCount=parseInt(s))),s=e.attributes.lineItemCount2,s&&(this.$lineCount=parseInt(s)),s=e.attributes.selectionMode,s&&(this.$selectionMode=t.ParseListSelectionMode(s)),s=e.attributes.defaultItem,s&&(this.$defaultItem=s),s=e.attributes.autoItemSize,1==this.$layout||0==this.$layout?this.$autoResizeItem="false"!=s:this.$autoResizeItem="true"==s,s=e.attributes.renderOrder,s&&(this.$childrenRenderOrder=t.ParseListChildrenRenderOrder(s),2==this.$childrenRenderOrder&&(s=e.attributes.apex,s&&(this.$apexIndex=parseInt(s))));var $=e.children;$.forEach(function(t){if("item"==t.nodeName){var e=t.attributes.url;if(e||(e=n.$defaultItem),e){var i=n.getFromPool(e);null!=i&&(n.addChild(i),s=t.attributes.title,s&&(i.text=s),s=t.attributes.icon,s&&(i.icon=s),s=t.attributes.name,s&&(i.name=s))}}},this)},n.prototype.setupAfterAdd=function(t){i.prototype.setupAfterAdd.call(this,t);var e;e=t.attributes.selectionController,e&&(this.$selectionController=this.parent.getController(e))},n.itemInfoReuseFlag=0,n.scrollEnterCounter=0,n}(t.GComponent);t.GList=i}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){this.$count=0,this.$pool={}}return Object.defineProperty(t.prototype,"count",{get:function(){return this.$count},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t in this.$pool){var e=this.$pool[t];e&&(e.length=0,e=null)}this.$pool={},this.$count=0},t.prototype.get=function(t){var e=this.$pool[t];return null==e&&(e=[],this.$pool[t]=e),e.length?(this.$count--,e.shift()):this.createObject(t)},t.prototype.recycle=function(t,e){if(t){var i=this.$pool[t];null==i&&(i=[],this.$pool[t]=i),this.$count++,i.push(e)}},t}();t.Recycler=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(e){var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.clear=function(){for(var t in this.$pool){var i=this.$pool[t];i&&i.forEach(function(t){t.dispose()})}e.prototype.clear.call(this)},i.prototype.createObject=function(e){return t.UIPackage.createObjectFromURL(e)},i}(e.Recycler);e.GObjectRecycler=i}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$frame=0,t.$color=0,t.$contentSourceWidth=0,t.$contentSourceHeight=0,t.$contentWidth=0,t.$contentHeight=0,t.$playing=!0,t.$url="",t.$fill=0,t.$align="left",t.$verticalAlign=0,t.$showErrorSign=!0,t.$color=16777215,t}return __extends(i,e),i.prototype.createDisplayObject=function(){this.$container=new t.UIContainer(this),this.$container.hitArea=new PIXI.Rectangle,this.setDisplayObject(this.$container),this.$container.interactiveChildren=!1},i.prototype.dispose=function(){this.clearContent(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"url",{get:function(){return this.$url},set:function(t){this.$url!=t&&(this.$url=t,this.loadContent(),this.updateGear(7))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this.$url},set:function(t){this.url=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this.$align},set:function(t){this.$align!=t&&(this.$align=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this.$fill},set:function(t){this.$fill!=t&&(this.$fill=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.updateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this.$playing},set:function(e){this.$playing!=e&&(this.$playing=e,this.$content instanceof t.MovieClip&&(this.$content.playing=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$frame},set:function(e){this.$frame!=e&&(this.$frame=e,this.$content instanceof t.MovieClip&&(this.$content.currentFrame=e),this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$color},set:function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.applyColor())},enumerable:!0,configurable:!0}),i.prototype.applyColor=function(){this.$content&&(this.$content.tint=this.$color)},Object.defineProperty(i.prototype,"showErrorSign",{get:function(){return this.$showErrorSign},set:function(t){this.$showErrorSign=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"content",{get:function(){return this.$content},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$content instanceof t.UIImage?this.$content.texture:null},set:function(e){this.url=null,this.switchToMovieMode(!1),this.$content instanceof t.UIImage&&(this.$content.texture=e),e?(this.$contentSourceWidth=e.orig.width,this.$contentSourceHeight=e.orig.height):this.$contentSourceWidth=this.$contentHeight=0,this.updateLayout()},enumerable:!0,configurable:!0}),i.prototype.loadContent=function(){this.clearContent(),this.$url&&(t.utils.StringUtil.startsWith(this.$url,"ui://")?this.loadFromPackage(this.$url):this.loadExternal())},i.prototype.loadFromPackage=function(e){if(this.$contentItem=t.UIPackage.getItemByURL(e),this.$contentItem)if(this.$contentItem.load(),0==this.$contentItem.type)null==this.$contentItem.texture?this.setErrorState():(this.switchToMovieMode(!1),this.$content.$initDisp(this.$contentItem),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height,this.updateLayout());else if(2==this.$contentItem.type){this.switchToMovieMode(!0),this.$contentSourceWidth=this.$contentItem.width,this.$contentSourceHeight=this.$contentItem.height;var i=this.$content;i.interval=this.$contentItem.interval,i.swing=this.$contentItem.swing,i.repeatDelay=this.$contentItem.repeatDelay,i.frames=this.$contentItem.frames,i.boundsRect=new PIXI.Rectangle(0,0,this.$contentSourceWidth,this.$contentSourceHeight),this.updateLayout()}else this.setErrorState();else this.setErrorState()},i.prototype.switchToMovieMode=function(e){this.$container.removeChildren(),e?this.$content instanceof t.MovieClip||(this.$content=new t.MovieClip(this)):this.$content instanceof t.UIImage||(this.$content=new t.UIImage(null)),this.$container.addChild(this.$content)},i.prototype.loadExternal=function(){var t=PIXI.utils.TextureCache[this.$url];t||(t=new PIXI.Texture(PIXI.BaseTexture.fromImage(this.$url)),PIXI.Texture.addToCache(t,this.$url)),this.$loadResCompleted(t)},i.prototype.freeExternal=function(t){PIXI.Texture.removeFromCache(t),t.destroy(!0)},i.prototype.$loadResCompleted=function(t){t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},i.prototype.onExternalLoadSuccess=function(e){this.$container.removeChildren(),this.$content&&this.$content instanceof t.UIImage?this.$container.addChild(this.$content):(this.$content=new t.UIImage(null),this.$content.$initDisp(),this.$container.addChild(this.$content)),this.$content.texture=e,this.$contentSourceWidth=e.orig.width,this.$contentSourceHeight=e.orig.height,this.updateLayout()},i.prototype.onExternalLoadFailed=function(){this.setErrorState()},i.prototype.setErrorState=function(){this.$showErrorSign&&(null==this.$errorSign&&t.UIConfig.loaderErrorSign&&(this.$errorSign=i.$errorSignPool.get(t.UIConfig.loaderErrorSign)),this.$errorSign&&(this.$errorSign.width=this.width,this.$errorSign.height=this.height,this.$container.addChild(this.$errorSign.displayObject)))},i.prototype.clearErrorState=function(){this.$errorSign&&(this.$container.removeChild(this.$errorSign.displayObject),i.$errorSignPool.recycle(this.$errorSign.resourceURL,this.$errorSign),this.$errorSign=null)},i.prototype.updateLayout=function(){if(null==this.$content)return void(this.$autoSize&&(this.$updatingLayout=!0,this.setSize(50,30),this.$updatingLayout=!1));if(this.$content.position.set(0,0),this.$content.scale.set(1,1),this.$contentWidth=this.$contentSourceWidth,this.$contentHeight=this.$contentSourceHeight,this.$autoSize)this.$updatingLayout=!0,0==this.$contentWidth&&(this.$contentWidth=50),0==this.$contentHeight&&(this.$contentHeight=30),this.setSize(this.$contentWidth,this.$contentHeight),this.$updatingLayout=!1;else{var e=1,i=1;0!=this.$fill&&(e=this.width/this.$contentSourceWidth,i=this.height/this.$contentSourceHeight,1==e&&1==i||(2==this.$fill?e=i:3==this.$fill?i=e:1==this.$fill&&(e>i?e=i:i=e),this.$contentWidth=this.$contentSourceWidth*e,this.$contentHeight=this.$contentSourceHeight*i)),this.$content instanceof t.UIImage?(this.$content.width=this.$contentWidth,this.$content.height=this.$contentHeight):this.$content.scale.set(e,i),"center"==this.$align?this.$content.x=Math.floor((this.width-this.$contentWidth)/2):"right"==this.$align&&(this.$content.x=this.width-this.$contentWidth),1==this.$verticalAlign?this.$content.y=Math.floor((this.height-this.$contentHeight)/2):2==this.$verticalAlign&&(this.$content.y=this.height-this.$contentHeight)}},i.prototype.clearContent=function(){this.clearErrorState(),this.$content&&this.$content.parent&&this.$container.removeChild(this.$content),null==this.$contentItem&&this.$content instanceof t.UIImage&&this.freeExternal(this.$content.texture),this.$content&&this.$content.destroy(),this.$content=null,this.$contentItem=null},i.prototype.handleSizeChanged=function(){this.$updatingLayout||this.updateLayout();var t=this.$container.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.setupBeforeAdd=function(i){e.prototype.setupBeforeAdd.call(this,i);var n;n=i.attributes.url,n&&(this.$url=n),n=i.attributes.align,n&&(this.$align=t.ParseAlignType(n)),
n=i.attributes.vAlign,n&&(this.$verticalAlign=t.ParseVertAlignType(n)),n=i.attributes.fill,n&&(this.$fill=t.ParseLoaderFillType(n)),this.$autoSize="true"==i.attributes.autoSize,n=i.attributes.errorSign,n&&(this.$showErrorSign="true"==n),this.$playing="false"!=i.attributes.playing,n=i.attributes.color,n&&(this.color=t.utils.StringUtil.convertFromHtmlColor(n)),this.$url&&this.loadContent()},i.$errorSignPool=new t.utils.GObjectRecycler,i}(t.GObject);t.GLoader=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.mapPivotWidth=function(t){return t*this.$sourceWidth},i.prototype.mapPivotHeight=function(t){return t*this.$sourceHeight},i.prototype.handleSizeChanged=function(){null!=this.$displayObject&&0!=this.$sourceWidth&&0!=this.$sourceHeight&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},i.prototype.handleScaleChanged=function(){null!=this.$displayObject&&this.$displayObject.scale.set(this.$width/this.$sourceWidth*this.$scaleX,this.$height/this.$sourceHeight*this.$scaleY)},Object.defineProperty(i.prototype,"touchable",{get:function(){return!1},set:function(t){this.$touchable=!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.$movieClip.tint},set:function(t){this.$movieClip.tint=t},enumerable:!0,configurable:!0}),i.prototype.createDisplayObject=function(){this.$movieClip=new t.MovieClip(this),this.setDisplayObject(this.$movieClip)},Object.defineProperty(i.prototype,"playing",{get:function(){return this.$movieClip.playing},set:function(t){this.$movieClip.playing!=t&&(this.$movieClip.playing=t,this.updateGear(5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$movieClip.currentFrame},set:function(t){this.$movieClip.currentFrame!=t&&(this.$movieClip.currentFrame=t,this.updateGear(5))},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$movieClip.setPlaySettings.apply(this.$movieClip,t)},i.prototype.constructFromResource=function(){this.$sourceWidth=this.packageItem.width,this.$sourceHeight=this.packageItem.height,this.$initWidth=this.$sourceWidth,this.$initHeight=this.$sourceHeight,this.setSize(this.$sourceWidth,this.$sourceHeight),this.packageItem.load(),this.$movieClip.interval=this.packageItem.interval,this.$movieClip.swing=this.packageItem.swing,this.$movieClip.repeatDelay=this.packageItem.repeatDelay,this.$movieClip.frames=this.packageItem.frames,this.$movieClip.boundsRect=new PIXI.Rectangle(0,0,this.$sourceWidth,this.$sourceHeight)},i.prototype.setupBeforeAdd=function(i){e.prototype.setupBeforeAdd.call(this,i);var n;n=i.attributes.frame,n&&(this.$movieClip.currentFrame=parseInt(n)),n=i.attributes.playing,this.$movieClip.playing="false"!=n,n=i.attributes.color,n&&(this.color=t.utils.StringUtil.convertFromHtmlColor(n))},i}(t.GObject);t.GMovieClip=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$barStartX=0,t.$barStartY=0,t.$tweenValue=0,t.$titleType=0,t.$value=50,t.$max=100,t}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType!=t&&(this.$titleType=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update(this.$value))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$value},set:function(t){null!=this.$tweener&&(this.$tweener.setPaused(!0),this.$tweener=null),this.$value!=t&&(this.$value=t,this.update(this.$value))},enumerable:!0,configurable:!0}),i.prototype.tweenValue=function(e,n){return this.$value!=e?(this.$tweener&&this.$tweener.setPaused(!0),this.$tweenValue=this.$value,this.$value=e,this.$tweener=createjs.Tween.get(this,{onChange:t.utils.Binder.create(this.onUpdateTween,this)}).to({$tweenValue:e},1e3*n,i.easeLinear),this.$tweener):null},i.prototype.onUpdateTween=function(){this.update(this.$tweenValue)},i.prototype.update=function(e){var i=Math.min(e/this.$max,1);if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*i)+"%";break;case 1:this.$titleObject.text=Math.round(e)+"/"+Math.round(this.$max);break;case 2:this.$titleObject.text=""+Math.round(e);break;case 3:this.$titleObject.text=""+Math.round(this.$max)}var n=this.width-this.$barMaxWidthDelta,s=this.height-this.$barMaxHeightDelta;this.$reverse?(this.$barObjectH&&(this.$barObjectH.width=n*i,this.$barObjectH.x=this.$barStartX+(n-this.$barObjectH.width)),this.$barObjectV&&(this.$barObjectV.height=s*i,this.$barObjectV.y=this.$barStartY+(s-this.$barObjectV.height))):(this.$barObjectH&&(this.$barObjectH.width=n*i),this.$barObjectV&&(this.$barObjectV.height=s*i)),this.$aniObject instanceof t.GMovieClip&&(this.$aniObject.frame=Math.round(100*i))},i.prototype.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ProgressBar")[0];var n;n=i.attributes.titleType,n&&(this.$titleType=t.ParseProgressTitleType(n)),this.$reverse="true"==i.attributes.reverse,this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth,this.$barStartX=this.$barObjectH.x),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight,this.$barStartY=this.$barObjectV.y)},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update(this.$value)},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ProgressBar")[0],i&&(this.$value=parseInt(i.attributes.value)||0,this.$max=parseInt(i.attributes.max)||0),this.update(this.$value)},i.prototype.dispose=function(){this.$tweener&&(this.$tweener.setPaused(!0),this.$tweener.removeAllEventListeners()),createjs.Tween.removeTweens(this),this.$tweener=null,e.prototype.dispose.call(this)},i.easeLinear=t.ParseEaseType("linear"),i}(t.GComponent);t.GProgressBar=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.y=0}return t.get=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.recycle=function(e){t.pool.push(e)},t.recycleMany=function(e){e&&e.length&&e.forEach(function(e){t.pool.push(e)},this),e.length=0},t.pool=[],t}();t.LineInfo=e;var i=function(i){function n(){var e=i.call(this)||this;return e.$verticalAlign=0,e.$offset=new PIXI.Point,e.$singleLine=!0,e.$text="",e.$textWidth=0,e.$textHeight=0,e.$style=new PIXI.TextStyle({fontSize:12,fontFamily:t.UIConfig.defaultFont,align:"left",leading:3,fill:0}),e.$verticalAlign=0,e.$text="",e.$autoSize=1,e.$widthAutoSize=!0,e.$heightAutoSize=!0,e.$bitmapPool=[],e.touchable=!1,e}return __extends(n,i),n.prototype.createDisplayObject=function(){this.$textField=new t.UITextField(this),this.setDisplayObject(this.$textField)},n.prototype.switchBitmapMode=function(e){e&&this.displayObject==this.$textField?(null==this.$btContainer&&(this.$btContainer=new t.UIContainer(this)),this.switchDisplayObject(this.$btContainer)):e||this.displayObject!=this.$btContainer||this.switchDisplayObject(this.$textField)},n.prototype.dispose=function(){t.GTimer.inst.remove(this.$render,this),this.$bitmapFont=null,this.$bitmapPool.length=0,this.$bitmapPool=null,this.$style=null,i.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"text",{get:function(){return this.getText()},set:function(t){this.setText(t)},enumerable:!0,configurable:!0}),n.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$text=t,this.updateGear(6),this.parent&&this.parent.$inProgressBuilding?this.renderNow():this.render())},n.prototype.getText=function(){return this.$text},Object.defineProperty(n.prototype,"color",{get:function(){return this.getColor()},set:function(t){this.setColor(t)},enumerable:!0,configurable:!0}),n.prototype.getColor=function(){return this.$color},n.prototype.setColor=function(t){this.$color!=t&&(this.$color=t,this.updateGear(4),this.$style.fill=this.$color,this.render())},Object.defineProperty(n.prototype,"titleColor",{get:function(){return this.color},set:function(t){this.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this.$style.lineHeight>0?this.$style.lineHeight:this.$fontProperties?this.$fontProperties.fontSize+this.$style.strokeThickness+this.$style.leading:+this.$style.fontSize+this.$style.strokeThickness},set:function(t){this.$style.lineHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"font",{get:function(){return this.$font||t.UIConfig.defaultFont},set:function(e){this.$font!=e&&(this.$font=e,this.$font&&t.utils.StringUtil.startsWith(this.$font,"ui://")?this.$bitmapFont=t.UIPackage.getBitmapFontByURL(this.$font):this.$style.fontFamily=this.$font||t.UIConfig.defaultFont,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return+this.$style.fontSize},set:function(t){0>=t||this.$style.fontSize!=t&&(this.$style.fontSize=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this.$style.align},set:function(t){this.$style.align!=t&&(this.$style.align=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$inProgressBuilding||this.layoutAlign())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this.$style.leading},set:function(t){this.$style.leading!=t&&(this.$style.leading=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this.$style.letterSpacing},set:function(t){this.$style.letterSpacing!=t&&(this.$style.letterSpacing=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"underline",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bold",{get:function(){return"bold"==this.$style.fontWeight},set:function(t){var e=t===!0?"bold":"normal";this.$style.fontWeight!=e&&(this.$style.fontWeight=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"weight",{get:function(){return this.$style.fontWeight},set:function(t){this.$style.fontWeight!=t&&(this.$style.fontWeight=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"variant",{get:function(){return this.$style.fontVariant},set:function(t){this.$style.fontVariant!=t&&(this.$style.fontVariant=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"italic",{get:function(){return"italic"==this.$style.fontStyle},set:function(t){var e=t===!0?"italic":"normal";this.$style.fontStyle!=e&&(this.$style.fontStyle=e,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"multipleLine",{get:function(){return!this.$singleLine},set:function(t){t=!t,this.$singleLine!=t&&(this.$singleLine=t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return+this.$style.strokeThickness},set:function(t){this.$style.strokeThickness!=t&&(this.$style.strokeThickness=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeColor",{get:function(){return this.$style.stroke},set:function(t){this.$style.stroke!=t&&(this.$style.stroke=t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoSize",{get:function(){return this.$autoSize},set:function(t){this.$autoSize!=t&&(this.$autoSize=t,this.$widthAutoSize=1==t||3==t,this.$heightAutoSize=1==t||2==t,this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.$requireRender&&this.renderNow(),this.$textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.$requireRender&&this.renderNow(),this.$textHeight},enumerable:!0,configurable:!0}),n.prototype.ensureSizeCorrect=function(){this.$sizeDirty&&this.$requireRender&&this.renderNow()},n.prototype.render=function(){this.$requireRender||(this.$requireRender=!0,t.GTimer.inst.callLater(this.$render,this)),this.$sizeDirty||!this.$widthAutoSize&&!this.$heightAutoSize||(this.$sizeDirty=!0,this.emit("__sizeDelayChange",this))},n.prototype.applyStyle=function(){this.$textField.style.stroke=this.$style.stroke,this.$textField.style.strokeThickness=this.$style.strokeThickness,this.$textField.style.fontStyle=this.$style.fontStyle,this.$textField.style.fontVariant=this.$style.fontVariant,this.$textField.style.fontWeight=this.$style.fontWeight,this.$textField.style.letterSpacing=this.$style.letterSpacing,this.$textField.style.align=this.$style.align,this.$textField.style.fontSize=this.$style.fontSize,this.$textField.style.fontFamily=this.$style.fontFamily,this.$textField.style.fill=this.$style.fill,this.$textField.style.leading=this.$style.leading},n.prototype.$render=function(){this.$requireRender&&this.renderNow()},n.prototype.renderNow=function(t){if(void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,null!=this.$bitmapFont)return void this.renderWithBitmapFont(t);this.switchBitmapMode(!1),this.applyStyle(),this.$textField.$updateMinHeight();var e=!this.$widthAutoSize&&this.multipleLine;this.$textField.width=this.$textField.style.wordWrapWidth=e||0==this.autoSize?Math.ceil(this.width):1e4,this.$textField.style.wordWrap=e,this.$textField.style.breakWords=e,this.$textField.text=this.$text,this.$fontProperties=PIXI.TextMetrics.measureFont(this.$style.toFontString()),this.$textWidth=Math.ceil(this.$textField.textWidth),this.$textWidth>0&&(this.$textWidth+=2*n.GUTTER_X),this.$textHeight=Math.ceil(this.$textField.textHeight),this.$textHeight>0&&(this.$textHeight+=2*n.GUTTER_Y);var i=this.width,s=this.height;3==this.autoSize?this.shrinkTextField():(this.$textField.scale.set(1,1),this.$widthAutoSize?(i=this.$textWidth,this.$textField.width=i):(i=this.width,this.$heightAutoSize?(s=this.$textHeight,this.$textField.height!=this.$textHeight&&(this.$textField.height=this.$textHeight)):(s=this.height,this.$textHeight>s&&(this.$textHeight=s)))),t&&(this.$updatingSize=!0,this.setSize(i,s),this.$updatingSize=!1),this.layoutAlign()},n.prototype.renderWithBitmapFont=function(i){var s=this;this.switchBitmapMode(!0),this.$btContainer.children.forEach(function(t,e){s.$bitmapPool.push(s.$btContainer.getChildAt(e))},this),this.$btContainer.removeChildren(),this.$lines?e.recycleMany(this.$lines):this.$lines=[];var r,o,h=this.letterSpacing,a=this.leading-1,l=this.width-2*n.GUTTER_X,c=0,u=0,p=0,$=0,d=0,f=0,g=0,y=0,m=0,b="",v=n.GUTTER_Y,w=!this.$widthAutoSize&&this.multipleLine,I=this.$bitmapFont.resizable?this.fontSize/this.$bitmapFont.size:1;this.$textWidth=0,this.$textHeight=0;for(var x=this.text.length,C=0;x>C;++C){var P=this.$text.charAt(C),O=P.charCodeAt(C);if("\n"!=P)if(O>256||32>=O?(f>0&&(y=c),f=0):(0==f&&(g=c),f++)," "==P?($=Math.ceil(this.fontSize/2),d=Math.ceil(this.fontSize)):(o=this.$bitmapFont.glyphs[P],o?($=Math.ceil(o.advance*I),d=Math.ceil(o.lineHeight*I)):" "==P?($=Math.ceil(this.$bitmapFont.size*I/2),d=Math.ceil(this.$bitmapFont.size*I)):($=0,d=0)),d>p&&(p=d),d>u&&(u=d),0!=c&&(c+=h),c+=$,!w||l>=c)b+=P;else{if(r=e.get(),r.height=u,r.textHeight=p,0==b.length)r.text=P;else if(f>0&&y>0){b+=P;var S=b.length-f;r.text=t.utils.StringUtil.trimRight(b.substr(0,S)),r.width=y,b=b.substr(S+1),c-=g}else r.text=b,r.width=c-($+h),b=P,c=$,u=d,p=d;r.y=v,v+=r.height+a,r.width>this.$textWidth&&(this.$textWidth=r.width),f=0,g=0,y=0,this.$lines.push(r)}else b+=P,r=e.get(),r.width=c,0==p&&(0==m&&(m=Math.ceil(this.fontSize*I)),0==u&&(u=m),p=u),r.height=u,m=u,r.textHeight=p,r.text=b,r.y=v,v+=r.height+a,r.width>this.$textWidth&&(this.$textWidth=r.width),this.$lines.push(r),b="",c=0,u=0,p=0,f=0,g=0,y=0}(b.length>0||this.$lines.length>0&&t.utils.StringUtil.endsWith(this.$lines[this.$lines.length-1].text,"\n"))&&(r=e.get(),r.width=c,0==u&&(u=m),0==p&&(p=u),r.height=u,r.textHeight=p,r.text=b,r.y=v,r.width>this.$textWidth&&(this.$textWidth=r.width),this.$lines.push(r)),this.$textWidth>0&&(this.$textWidth+=2*n.GUTTER_X);var j=this.$lines.length;0==j?this.$textHeight=0:(r=this.$lines[this.$lines.length-1],this.$textHeight=r.y+r.height+n.GUTTER_Y);var T,k=0;T=this.$widthAutoSize?0==this.$textWidth?0:this.$textWidth:this.width,k=this.$heightAutoSize?0==this.$textHeight?0:this.$textHeight:this.height,i&&(this.$updatingSize=!0,this.setSize(T,k),this.$updatingSize=!1),0!=T&&0!=k&&(l=this.width-2*n.GUTTER_X,this.$lines.forEach(function(t){var e=n.GUTTER_X,i=0,r=0;i="center"==s.align?(l-t.width)/2:"right"==s.align?l-t.width:0,x=t.text.length;for(var a=0;x>a;a++){var c=t.text.charAt(a);if(o=s.$bitmapFont.glyphs[c],null!=o){r=(t.height+t.textHeight)/2-Math.ceil(o.lineHeight*I);var u=void 0;u=s.$bitmapPool.length?s.$bitmapPool.pop():new PIXI.Sprite,u.x=e+i+Math.ceil(o.offsetX*I),u.y=t.y+r+Math.ceil(o.offsetY*I),u.texture=o.texture,u.scale.set(I,I),u.tint=s.$color,s.$btContainer.addChild(u),e+=h+Math.ceil(o.advance*I)}else e+=" "==c?h+Math.ceil(s.$bitmapFont.size*I/2):h}}))},n.prototype.localToGlobal=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),t-=this.$offset.x,e-=this.$offset.y,i.prototype.localToGlobal.call(this,t,e,n)},n.prototype.globalToLocal=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var s=i.prototype.globalToLocal.call(this,t,e,n);return s.x-=this.$offset.x,s.y-=this.$offset.y,s},n.prototype.handleSizeChanged=function(){this.$updatingSize||(null!=this.$bitmapFont?this.$widthAutoSize||this.render():this.$inProgressBuilding?(this.$textField.width=this.width,this.$textField.height=this.height):3==this.$autoSize?this.shrinkTextField():this.$widthAutoSize||(this.$heightAutoSize?this.$textField.width=this.width:(this.$textField.width=this.width,this.$textField.height=this.height)),this.layoutAlign())},n.prototype.shrinkTextField=function(){var t=Math.min(1,this.width/this.$textWidth);this.$textField.scale.set(t,t)},n.prototype.layoutAlign=function(){var t=this.$textWidth,e=this.$textHeight;if(3==this.autoSize&&(t*=this.displayObject.scale.x,e*=this.displayObject.scale.y),0==this.$verticalAlign||0==e)this.$offset.y=n.GUTTER_Y;else{var i=Math.max(0,this.height-e);1==this.$verticalAlign?this.$offset.y=.5*i:2==this.$verticalAlign&&(this.$offset.y=i)}var s=0;switch(this.$style.align){case"center":s=.5*(this.width-t);break;case"right":s=this.width-t}this.$offset.x=s,this.updatePosition()},n.prototype.updatePosition=function(){this.displayObject.position.set(Math.floor(this.x+this.$offset.x),Math.floor(this.y+this.$offset.y))},n.prototype.handleXYChanged=function(){i.prototype.handleXYChanged.call(this),this.$displayObject&&this.updatePosition()},n.prototype.setupBeforeAdd=function(e){i.prototype.setupBeforeAdd.call(this,e);var n=e.attributes.font;n&&(this.font=n),n=e.attributes.vAlign,n&&(this.verticalAlign=t.ParseVertAlignType(n)),n=e.attributes.leading,n&&(this.$style.leading=parseInt(n)),n=e.attributes.letterSpacing,n&&(this.$style.letterSpacing=parseInt(n)),n=e.attributes.fontSize,n&&(this.$style.fontSize=parseInt(n)),n=e.attributes.color,n&&(this.color=t.utils.StringUtil.convertFromHtmlColor(n)),n=e.attributes.align,n&&(this.align=t.ParseAlignType(n)),n=e.attributes.autoSize,n&&(this.autoSize=t.ParseAutoSizeType(n),this.$widthAutoSize=1==this.$autoSize||3==this.$autoSize,this.$heightAutoSize=1==this.$autoSize||2==this.$autoSize),this.underline="true"==e.attributes.underline,this.italic="true"==e.attributes.italic,this.bold="true"==e.attributes.bold,this.multipleLine="true"!=e.attributes.singleLine,n=e.attributes.strokeColor,n&&(this.strokeColor=t.utils.StringUtil.convertFromHtmlColor(n),n=e.attributes.strokeSize,n?this.stroke=parseInt(n)+1:this.stroke=2)},n.prototype.setupAfterAdd=function(t){i.prototype.setupAfterAdd.call(this,t);var e=t.attributes.text;null!=e&&e.length>0&&(this.text=e),this.$sizeDirty=!1},n.GUTTER_X=2,n.GUTTER_Y=2,n}(t.GObject);t.GTextField=i}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){}return t}();t.TextBlock=e;var i=function(t){function e(){var e=t.call(this)||this;return e.$textField.interactive=!0,e.$textField.interactiveChildren=!1,e.on("__linkClick",e.$clickLink,e),e}return __extends(e,t),Object.defineProperty(e.prototype,"ubbEnabled",{get:function(){return this.$ubbEnabled},set:function(t){this.$ubbEnabled!=t&&(this.$ubbEnabled=t,this.render())},enumerable:!0,configurable:!0}),e.prototype.setupBeforeAdd=function(e){t.prototype.setupBeforeAdd.call(this,e),this.$ubbEnabled="true"==e.attributes.ubb},Object.defineProperty(e.prototype,"textFlow",{set:function(t){this.$textFlow=t,this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{set:function(t){this.$text=t,null==this.$text&&(this.$text=""),this.$textField.width=this.width,this.updateGear(6),this.render()},enumerable:!0,configurable:!0}),e.prototype.$clickLink=function(t){this.emit("__linkClick",t.text,this)},e.prototype.dispose=function(){this.off("__linkClick",this.$clickLink,this),t.prototype.dispose.call(this)},e}(t.GTextField);t.GRichTextField=i}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.touchDown=!1,this.mouseX=0,this.mouseY=0}return t}();t.GRootStatus=e;var i=function(i){function n(){var t=i.call(this)||this;return null==n.$inst&&(n.$inst=t),t.opaque=!1,t.$popupStack=[],t.$justClosedPopups=[],t.$uid=n.uniqueID++,t}return __extends(n,i),Object.defineProperty(n,"inst",{get:function(){return null==n.$inst&&new n,n.$inst},enumerable:!0,configurable:!0}),Object.defineProperty(n,"statusData",{get:function(){return n.$retStatus},enumerable:!0,configurable:!0}),n.prototype.getObjectUnderPoint=function(e,i){var s=this.$uiStage.applicationContext.renderer.plugins.interaction.hitTest(n.sHelperPoint,this.nativeStage);return t.GObject.castFromNativeObject(s)},n.prototype.attachTo=function(e,i){var n=createjs;n.Ticker.timingMode=n.Ticker.RAF,t.GTimer.inst.setTicker(e.ticker),this.$uiStage&&(this.$uiStage.off("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.off(t.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.removeChild(this.$displayObject),this.$uiStage.dispose()),this.$uiStage=new t.UIStage(e,i),this.$uiStage.on("__sizeChanged",this.$winResize,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Down,this.$stageDown,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Up,this.$stageUp,this),this.$uiStage.nativeStage.on(t.InteractiveEvents.Move,this.$stageMove,this),this.$uiStage.nativeStage.addChild(this.$displayObject),this.$winResize(this.$uiStage),this.$modalLayer||(this.$modalLayer=new t.GGraph,this.$modalLayer.setSize(this.width,this.height),this.$modalLayer.drawRect(0,0,0,t.UIConfig.modalLayerColor,t.UIConfig.modalLayerAlpha),this.$modalLayer.addRelation(this,24))},Object.defineProperty(n.prototype,"uniqueID",{get:function(){return this.$uid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageWidth",{get:function(){return this.$uiStage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"stageHeight",{get:function(){return this.$uiStage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentScaleFactor",{get:function(){return this.$uiStage.resolution},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"applicationContext",{get:function(){return this.$uiStage.applicationContext},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nativeStage",{get:function(){return this.$uiStage.nativeStage},enumerable:!0,configurable:!0}),n.prototype.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},n.prototype.hideWindow=function(t){t.hide()},n.prototype.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},n.prototype.bringToFront=function(e){var i;for(i=null==this.$modalLayer.parent||e.modal?this.numChildren-1:this.getChildIndex(this.$modalLayer)-1;i>=0;i--){var n=this.getChildAt(i);if(n==e)return;if(n instanceof t.Window)break}i>=0&&this.setChildIndex(e,i)},n.prototype.showModalWait=function(e){void 0===e&&(e=null),null!=t.UIConfig.globalModalWaiting&&(null==this.$modalWaitPane&&(this.$modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.globalModalWaiting),this.$modalWaitPane.addRelation(this,24)),this.$modalWaitPane.setSize(this.width,this.height),this.addChild(this.$modalWaitPane),this.$modalWaitPane.text=e)},n.prototype.closeModalWait=function(){null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane)},n.prototype.closeAllExceptModals=function(){var e=this.$children.slice();e.forEach(function(e){e instanceof t.Window&&!e.modal&&e.hide()},this)},n.prototype.closeAllWindows=function(){var e=this.$children.slice();e.forEach(function(e){e instanceof t.Window&&e.hide()},this)},n.prototype.getTopWindow=function(){for(var e=this.numChildren,i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window)return n}return null},Object.defineProperty(n.prototype,"hasModalWindow",{get:function(){return null!=this.$modalLayer.parent},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&this.$modalWaitPane.inContainer},enumerable:!0,configurable:!0}),n.prototype.showPopup=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=0),this.$popupStack.length>0){var s=this.$popupStack.indexOf(t);if(-1!=s)for(var r=this.$popupStack.length-1;r>=s;r--)this.removeChild(this.$popupStack.pop())}this.$popupStack.push(t),this.addChild(t),this.adjustModalLayer();var o,h=0,a=0;e?(o=e.localToRoot(),h=e.width,a=e.height):o=this.globalToLocal(n.$retStatus.mouseX,n.$retStatus.mouseY);var l,c;l=o.x,l+t.width>this.width&&(l=l+h-t.width),c=o.y+a,(0==i&&c+t.height>this.height||2==i)&&(c=o.y-t.height-1,0>c&&(c=0,l+=.5*h)),t.x=l,t.y=c},n.prototype.togglePopup=function(t,e,i){void 0===e&&(e=null),-1==this.$justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},n.prototype.hidePopup=function(t){void 0===t&&(t=null);var e;if(null!=t){var i=this.$popupStack.indexOf(t);if(-1!=i)for(e=this.$popupStack.length-1;e>=i;e--)this.closePopup(this.$popupStack.pop())}else{var n=this.$popupStack.length;for(e=n-1;e>=0;e--)this.closePopup(this.$popupStack[e]);this.$popupStack.length=0}},Object.defineProperty(n.prototype,"hasAnyPopup",{get:function(){return 0!=this.$popupStack.length},enumerable:!0,configurable:!0}),n.prototype.closePopup=function(e){null!=e.parent&&(e instanceof t.Window?e.hide():this.removeChild(e))},n.prototype.showTooltips=function(e){if(null==this.$defaultTooltipWin){var i=t.UIConfig.tooltipsWin;if(!i)return void console.error("UIConfig.tooltipsWin not defined");this.$defaultTooltipWin=t.UIPackage.createObjectFromURL(i)}this.$defaultTooltipWin.text=e,this.showTooltipsWin(this.$defaultTooltipWin)},n.prototype.showTooltipsWin=function(t,e){void 0===e&&(e=null),this.hideTooltips(),this.$tooltipWin=t;var i=0,s=0;null==e?(i=n.$retStatus.mouseX+10,s=n.$retStatus.mouseY+20):(i=e.x,s=e.y);var r=this.globalToLocal(i,s);i=r.x,s=r.y,i+this.$tooltipWin.width>this.width&&(i=i-this.$tooltipWin.width-1,0>i&&(i=10)),s+this.$tooltipWin.height>this.height&&(s=s-this.$tooltipWin.height-1,i-this.$tooltipWin.width-1>0&&(i=i-this.$tooltipWin.width-1),0>s&&(s=10)),this.$tooltipWin.x=i,this.$tooltipWin.y=s,this.addChild(this.$tooltipWin)},n.prototype.hideTooltips=function(){null!=this.$tooltipWin&&(this.$tooltipWin.parent&&this.removeChild(this.$tooltipWin),this.$tooltipWin=null)},Object.defineProperty(n.prototype,"focus",{get:function(){return this.$focusedObject&&!this.$focusedObject.onStage&&(this.$focusedObject=null),this.$focusedObject},set:function(t){if(t&&(!t.focusable||!t.onStage))throw new Error("Invalid target to focus");this.setFocus(t)},enumerable:!0,configurable:!0}),n.prototype.setFocus=function(t){this.$focusedObject!=t&&(this.$focusedObject=t,this.emit("__focusChanged",this))},n.prototype.adjustModalLayer=function(){var e=this.numChildren;null!=this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.setChildIndex(this.$modalWaitPane,e-1);for(var i=e-1;i>=0;i--){var n=this.getChildAt(i);if(n instanceof t.Window&&n.modal)return void(null==this.$modalLayer.parent?this.addChildAt(this.$modalLayer,i):this.setChildIndexBefore(this.$modalLayer,i))}null!=this.$modalLayer.parent&&this.removeChild(this.$modalLayer)},n.prototype.$stageDown=function(e){n.$retStatus.mouseX=e.data.global.x,n.$retStatus.mouseY=e.data.global.y,n.$retStatus.touchDown=!0;for(var i=e.target;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var s=i.UIOwner;if(s.touchable&&s.focusable){this.setFocus(s);break}}i=i.parent}null!=this.$tooltipWin&&this.hideTooltips(),this.checkPopups(e.target)},n.prototype.checkPopups=function(e){if(!this.$checkingPopups&&(this.$checkingPopups=!0,this.$justClosedPopups.length=0,this.$popupStack.length>0)){for(var i=e;i&&i!=this.nativeStage;){if(t.isUIObject(i)){var n=this.$popupStack.indexOf(i.UIOwner);if(-1!=n){for(var s=void 0,r=this.$popupStack.length-1;r>n;r--)s=this.$popupStack.pop(),this.closePopup(s),this.$justClosedPopups.push(s);return}}i=i.parent}for(var o=this.$popupStack.length,h=void 0,r=o-1;r>=0;r--)h=this.$popupStack[r],this.closePopup(h),this.$justClosedPopups.push(h);this.$popupStack.length=0}},n.prototype.$stageMove=function(t){n.$retStatus.mouseX=t.data.global.x,n.$retStatus.mouseY=t.data.global.y},n.prototype.$stageUp=function(t){n.$retStatus.touchDown=!1,this.$checkingPopups=!1},n.prototype.$winResize=function(t){this.setSize(t.stageWidth,t.stageHeight)},n.uniqueID=0,n.$retStatus=new e,n}(t.GComponent);t.GRoot=i}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$dragOffset=new PIXI.Point,t.$scrollPerc=0,t}return __extends(i,e),i.prototype.setScrollPane=function(t,e){this.$target=t,this.$vertical=e},Object.defineProperty(i.prototype,"displayPerc",{set:function(t){this.$vertical?(this.$fixedGripSize||(this.$grip.height=t*this.$bar.height),this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc):(this.$fixedGripSize||(this.$grip.width=t*this.$bar.width),this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollPerc",{set:function(t){this.$scrollPerc=t,this.$vertical?this.$grip.y=this.$bar.y+(this.$bar.height-this.$grip.height)*this.$scrollPerc:this.$grip.x=this.$bar.x+(this.$bar.width-this.$grip.width)*this.$scrollPerc},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minSize",{get:function(){return this.$vertical?(null!=this.$arrowButton1?this.$arrowButton1.height:0)+(null!=this.$arrowButton2?this.$arrowButton2.height:0):(null!=this.$arrowButton1?this.$arrowButton1.width:0)+(null!=this.$arrowButton2?this.$arrowButton2.width:0);
},enumerable:!0,configurable:!0}),i.prototype.constructFromXML=function(i){return e.prototype.constructFromXML.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"ScrollBar")[0],null!=i&&(this.$fixedGripSize="true"==i.attributes.fixedGripSize),this.$grip=this.getChild("grip"),this.$grip?(this.$bar=this.getChild("bar"),this.$bar?(this.$arrowButton1=this.getChild("arrow1"),this.$arrowButton2=this.getChild("arrow2"),this.$grip.on(t.InteractiveEvents.Down,this.$gripMouseDown,this),this.$arrowButton1&&this.$arrowButton1.on(t.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.on(t.InteractiveEvents.Down,this.$arrowButton2Click,this),void this.on(t.InteractiveEvents.Down,this.$barMouseDown,this)):void console.error("please create and define 'bar' in the Editor for the scrollbar")):void console.error("please create and define 'grip' in the Editor for the scrollbar")},i.prototype.$gripMouseDown=function(e){if(this.$bar){e.stopPropagation(),this.$dragOffset=e.data.getLocalPosition(this.displayObject,this.$dragOffset),this.$dragOffset.x-=this.$grip.x,this.$dragOffset.y-=this.$grip.y;var i=t.GRoot.inst.nativeStage;i.on(t.InteractiveEvents.Move,this.$gripDragging,this),i.on(t.InteractiveEvents.Up,this.$gripDraggingEnd,this)}},i.prototype.$gripDragging=function(t){var e=t.data.getLocalPosition(this.displayObject,i.sScrollbarHelperPoint);if(this.$vertical){var n=e.y-this.$dragOffset.y;this.$target.setPercY((n-this.$bar.y)/(this.$bar.height-this.$grip.height),!1)}else{var s=e.x-this.$dragOffset.x;this.$target.setPercX((s-this.$bar.x)/(this.$bar.width-this.$grip.width),!1)}},i.prototype.$gripDraggingEnd=function(e){var i=t.GRoot.inst.nativeStage;i.off(t.InteractiveEvents.Move,this.$gripDragging,this),i.off(t.InteractiveEvents.Up,this.$gripDraggingEnd,this)},i.prototype.$arrowButton1Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollUp():this.$target.scrollLeft()},i.prototype.$arrowButton2Click=function(t){t.stopPropagation(),this.$vertical?this.$target.scrollDown():this.$target.scrollRight()},i.prototype.$barMouseDown=function(t){var e=t.data.getLocalPosition(this.$grip.displayObject,i.sScrollbarHelperPoint);this.$vertical?e.y<0?this.$target.scrollUp(4):this.$target.scrollDown(4):e.x<0?this.$target.scrollLeft(4):this.$target.scrollRight(4)},i.prototype.dispose=function(){this.off(t.InteractiveEvents.Down,this.$barMouseDown,this),this.$arrowButton1&&this.$arrowButton1.off(t.InteractiveEvents.Down,this.$arrowButton1Click,this),this.$arrowButton2&&this.$arrowButton2.off(t.InteractiveEvents.Down,this.$arrowButton2Click,this),this.$grip.off(t.InteractiveEvents.Down,this.$gripMouseDown,this),this.$gripDraggingEnd(null),e.prototype.dispose.call(this)},i.sScrollbarHelperPoint=new PIXI.Point,i}(t.GComponent);t.GScrollBar=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$max=0,t.$value=0,t.$barMaxWidth=0,t.$barMaxHeight=0,t.$barMaxWidthDelta=0,t.$barMaxHeightDelta=0,t.$titleType=0,t.$value=50,t.$max=100,t.$clickPos=new PIXI.Point,t}return __extends(i,e),Object.defineProperty(i.prototype,"titleType",{get:function(){return this.$titleType},set:function(t){this.$titleType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this.$max},set:function(t){this.$max!=t&&(this.$max=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.$value},set:function(t){this.$value!=t&&(this.$value=t,this.update())},enumerable:!0,configurable:!0}),i.prototype.update=function(){var t=Math.min(this.$value/this.$max,1);this.updateWidthPercent(t)},i.prototype.updateWidthPercent=function(e){if(this.$titleObject)switch(this.$titleType){case 0:this.$titleObject.text=Math.round(100*e)+"%";break;case 1:this.$titleObject.text=this.$value+"/"+this.$max;break;case 2:this.$titleObject.text=""+this.$value;break;case 3:this.$titleObject.text=""+this.$max}this.$barObjectH&&(this.$barObjectH.width=(this.width-this.$barMaxWidthDelta)*e),this.$barObjectV&&(this.$barObjectV.height=(this.height-this.$barMaxHeightDelta)*e),this.$aniObject instanceof t.GMovieClip&&(this.$aniObject.frame=Math.round(100*e))},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this),this.$barObjectH&&(this.$barMaxWidth=this.width-this.$barMaxWidthDelta),this.$barObjectV&&(this.$barMaxHeight=this.height-this.$barMaxHeightDelta),this.$inProgressBuilding||this.update()},i.prototype.setupAfterAdd=function(i){e.prototype.setupAfterAdd.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"Slider")[0],i&&(this.$value=parseInt(i.attributes.value),this.$max=parseInt(i.attributes.max)),this.update()},i.prototype.constructFromXML=function(i){e.prototype.constructFromXML.call(this,i),i=t.utils.XmlParser.getChildNodes(i,"Slider")[0];var n;i&&(n=i.attributes.titleType,n&&(this.$titleType=t.ParseProgressTitleType(n))),this.$titleObject=this.getChild("title"),this.$barObjectH=this.getChild("bar"),this.$barObjectV=this.getChild("bar_v"),this.$aniObject=this.getChild("ani"),this.$gripObject=this.getChild("grip"),this.$barObjectH&&(this.$barMaxWidth=this.$barObjectH.width,this.$barMaxWidthDelta=this.width-this.$barMaxWidth),this.$barObjectV&&(this.$barMaxHeight=this.$barObjectV.height,this.$barMaxHeightDelta=this.height-this.$barMaxHeight),this.$gripObject&&this.$gripObject.on(t.InteractiveEvents.Down,this.$gripMouseDown,this)},i.prototype.$gripMouseDown=function(e){this.$clickPos=this.globalToLocal(e.data.global.x,e.data.global.y),this.$clickPercent=this.$value/this.$max,t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.on(t.InteractiveEvents.Up,this.$gripMouseUp,this)},i.prototype.$gripMouseMove=function(t){var e,n=this.globalToLocal(t.data.global.x,t.data.global.y,i.sSilderHelperPoint),s=n.x-this.$clickPos.x,r=n.y-this.$clickPos.y;e=this.$barObjectH?this.$clickPercent+s/this.$barMaxWidth:this.$clickPercent+r/this.$barMaxHeight,e>1?e=1:0>e&&(e=0);var o=Math.round(this.$max*e);o!=this.$value&&(this.$value=o,this.emit("__stateChanged",this)),this.updateWidthPercent(e)},i.prototype.$gripMouseUp=function(e){var i=this.$value/this.$max;this.updateWidthPercent(i),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$gripMouseUp,this)},i.prototype.dispose=function(){this.$gripObject&&this.$gripObject.off(t.InteractiveEvents.Down,this.$gripMouseDown,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Move,this.$gripMouseMove,this),t.GRoot.inst.nativeStage.off(t.InteractiveEvents.Up,this.$gripMouseUp,this),e.prototype.dispose.call(this)},i.sSilderHelperPoint=new PIXI.Point,i}(t.GComponent);t.GSlider=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$util=null,t.$isTyping=!1,t.focusable=!0,t.editable=!0,t.type="text",t.on("removed",t.removed,t),t.$util.initialize(),t}return __extends(i,e),i.prototype.createDisplayObject=function(){e.prototype.createDisplayObject.call(this),this.$displayObject.hitArea=new PIXI.Rectangle},i.prototype.handleSizeChanged=function(){e.prototype.handleSizeChanged.call(this);var t=this.$displayObject.hitArea;t.x=t.y=0,t.width=this.width,t.height=this.height},i.prototype.removed=function(t){this.$util&&this.$util.destroy()},i.prototype.requestFocus=function(){this.root.focus=this,this.$util.$onFocus()},Object.defineProperty(i.prototype,"editable",{get:function(){return this.$editable},set:function(e){e!=this.$editable&&(this.$editable=e,this.$editable?(this.$util||(this.$util=new t.utils.InputDelegate(this)),this.$util.initialize()):this.$util&&this.$util.destroy(),this.touchable=this.$editable)},enumerable:!0,configurable:!0}),i.prototype.changeToPassText=function(t){for(var e="",i=0,n=t.length;n>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e},i.prototype.getText=function(){return this.$util.text},i.prototype.setText=function(t){null==t&&(t=""),this.$text!=t&&(this.$util.text=t,e.prototype.setText.call(this,t))},i.prototype.setColor=function(t){e.prototype.setColor.call(this,t),this.$util.setColor(t)},Object.defineProperty(i.prototype,"promptText",{get:function(){return this.$util.$getProperty("placeholder")},set:function(t){null==t&&(t=""),this.$util.$setProperty("placeholder",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){return parseInt(this.$util.$getProperty("maxlength"))||0},set:function(t){this.$util.$setProperty("maxlength",String(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restrict",{get:function(){return this.$util.$restrict},set:function(t){this.$util.$restrict=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return"password"==this.type},set:function(t){this.type="password"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this.$util.type},set:function(t){this.$util.type=t},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.off("removed",this.removed,this),this.$util.destroy(),this.$util=null},i.prototype.renderNow=function(t){void 0===t&&(t=!0),this.$requireRender=!1,this.$sizeDirty=!1,this.$util.$updateProperties(),this.$isTyping&&this.decorateInputbox();var i=this.$text;"password"==this.type&&(this.$text=this.changeToPassText(this.$text)),e.prototype.renderNow.call(this,t),this.$text=i},i.prototype.decorateInputbox=function(){},i.prototype.setupBeforeAdd=function(t){e.prototype.setupBeforeAdd.call(this,t);var i=t.attributes.maxLength;null!=i&&(this.maxLength=parseInt(i)),i=t.attributes.restrict,null!=i&&(this.restrict=i),i=t.attributes.password,"true"==i?this.password=!0:(i=t.attributes.keyboardType,"4"==i?this.type="number":"3"==i?this.type="url":"5"==i?this.type="tel":"6"==i&&(this.type="email"))},i}(t.GTextField);t.GTextInput=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.$enumIdx=0,this.$enumCount=0,this.$items=[],this.$itemPool=[]}return t.prototype.getItem=function(){return this.$itemPool.length?this.$itemPool.pop():new i},t.prototype.findItem=function(t,e){for(var i=this.$items.length,n=0;i>n;n++){var s=this.$items[n];if(s.callback==t&&s.thisObj==e)return s}return null},t.prototype.add=function(t,e,i,n,s){var r=this.findItem(i,n);r||(r=this.getItem(),r.callback=i,r.thisObj=n,this.$items.push(r)),r.delay=t,r.counter=0,r.repeat=e,r.param=s,r.end=!1},t.prototype.callLater=function(t,e,i){this.add(1,1,t,e,i)},t.prototype.callDelay=function(t,e,i,n){this.add(t,1,e,i,n)},t.prototype.exists=function(t,e){var i=this.findItem(t,e);return null!=i},t.prototype.remove=function(t,e){var i=this.findItem(t,e);if(i){var n=this.$items.indexOf(i);this.$items.splice(n,1),n<this.$enumIdx&&this.$enumIdx--,this.$enumCount--,i.callback=null,i.param=null,this.$itemPool.push(i)}},t.prototype.advance=function(){for(this.$enumIdx=0,this.$enumCount=this.$items.length;this.$enumIdx<this.$enumCount;){var t=this.$items[this.$enumIdx];this.$enumIdx++;var e=this.$ticker.elapsedMS;if(t.advance(e)){if(t.end&&(this.$enumIdx--,this.$enumCount--,this.$items.splice(this.$enumIdx,1),this.$itemPool.push(t)),t.callback){var i=[e];t.param&&t.param instanceof Array?i=t.param.concat(i):void 0!==t.param&&i.unshift(t.param),t.callback.apply(t.thisObj,i)}t.end&&(t.callback=t.thisObj=t.param=null)}}},t.prototype.setTicker=function(t){this.$ticker&&this.$ticker.remove(this.advance,this,PIXI.UPDATE_PRIORITY.NORMAL),this.$ticker=t,this.$ticker.add(this.advance,this,PIXI.UPDATE_PRIORITY.NORMAL),this.$ticker.started||this.$ticker.start()},t.inst=new t,t}();t.GTimer=e;var i=function(){function t(){this.delay=0,this.counter=0,this.repeat=0}return t.prototype.advance=function(t){return void 0===t&&(t=0),this.counter+=t,this.counter>=this.delay?(this.counter-=this.delay,this.counter>this.delay&&(this.counter=this.delay),this.repeat>0&&(this.repeat--,0==this.repeat&&(this.end=!0)),!0):!1},t}()}(fgui||(fgui={}));var fgui;!function(t){t.isAnimationGear=function(t){return t&&"playing"in t&&"frame"in t}}(fgui||(fgui={}));var fgui;!function(t){t.isColorableTitle=function(t){return t&&"titleColor"in t&&"fontSize"in t}}(fgui||(fgui={}));var fgui;!function(t){t.isColorGear=function(t){return t&&"color"in t}}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(e){if(void 0===e&&(e=null),!e&&(e=t.UIConfig.popupMenu,!e))throw new Error("UIConfig.popupMenu not defined");this.$contentPane=t.UIPackage.createObjectFromURL(e),this.$contentPane.on("added",this.$addedToStage,this),this.$list=this.$contentPane.getChild("list"),this.$list.removeChildrenToPool(),this.$list.addRelation(this.$contentPane,14),this.$list.removeRelation(this.$contentPane,15),this.$contentPane.addRelation(this.$list,15),this.$list.on("__itemClick",this.$clickItem,this)}return e.prototype.dispose=function(){t.GTimer.inst.remove(this.$delayClickItem,this),this.$list.off("__itemClick",this.$clickItem,this),this.$contentPane.off("added",this.$addedToStage,this),this.$contentPane.dispose()},e.prototype.addItem=function(t,e){var i=this.$list.addItemFromPool();i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},e.prototype.addItemAt=function(t,e,i){var n=this.$list.getFromPool();this.$list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var s=n.getController("checked");return null!=s&&(s.selectedIndex=0),n},e.prototype.addSeperator=function(){if(null==t.UIConfig.popupMenuSeperator)throw new Error("UIConfig.popupMenuSeperator not defined");this.$list.addItemFromPool(t.UIConfig.popupMenuSeperator)},e.prototype.getItemName=function(t){var e=this.$list.getChildAt(t);return e.name},e.prototype.setItemText=function(t,e){var i=this.$list.getChild(t);i.title=e},e.prototype.setItemVisible=function(t,e){var i=this.$list.getChild(t);i.visible!=e&&(i.visible=e,this.$list.setBoundsChangedFlag())},e.prototype.setItemGrayed=function(t,e){var i=this.$list.getChild(t);i.grayed=e},e.prototype.setItemCheckable=function(t,e){var i=this.$list.getChild(t),n=i.getController("checked");null!=n&&(e?0==n.selectedIndex&&(n.selectedIndex=1):n.selectedIndex=0)},e.prototype.setItemChecked=function(t,e){var i=this.$list.getChild(t),n=i.getController("checked");null!=n&&(n.selectedIndex=e?2:1)},e.prototype.isItemChecked=function(t){var e=this.$list.getChild(t),i=e.getController("checked");return null!=i?2==i.selectedIndex:!1},e.prototype.removeItem=function(t){var e=this.$list.getChild(t);if(null!=e){var i=this.$list.getChildIndex(e);return this.$list.removeChildToPoolAt(i),!0}return!1},e.prototype.clearItems=function(){this.$list.removeChildrenToPool()},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this.$list.numChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentPane",{get:function(){return this.$contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"list",{get:function(){return this.$list},enumerable:!0,configurable:!0}),e.prototype.show=function(e,i){void 0===e&&(e=null);var n=null!=e?e.root:t.GRoot.inst;n.showPopup(this.contentPane,e instanceof t.GRoot?null:e,i)},e.prototype.$clickItem=function(e,i){t.GTimer.inst.add(100,1,this.$delayClickItem,this,i)},e.prototype.$delayClickItem=function(e){if(e instanceof t.GButton){if(e.grayed)return void(this.$list.selectedIndex=-1);var i=e.getController("checked");null!=i&&0!=i.selectedIndex&&(1==i.selectedIndex?i.selectedIndex=2:i.selectedIndex=1);var n=this.$contentPane.parent;n&&n.hidePopup(this.contentPane),null!=e.data&&e.data.call(null),t.GTimer.inst.remove(this.$delayClickItem,this)}},e.prototype.$addedToStage=function(){this.$list.selectedIndex=-1,this.$list.resizeToFit(1e5,10)},e}();t.PopupMenu=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(t){this.$owner=t,this.$defs=[]}return Object.defineProperty(t.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.$target},set:function(t){this.$target!=t&&(this.$target&&this.releaseRefTarget(this.$target),this.$target=t,this.$target&&this.addRefTarget(this.$target))},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var i=this.$defs.length,n=0;i>n;n++){var s=this.$defs[n];if(s.type==t)return}this.internalAdd(t,e)},t.prototype.internalAdd=function(t,e){if(24==t)return this.internalAdd(14,e),void this.internalAdd(15,e);var n=new i;n.percent=e,n.type=t,this.$defs.push(n),(e||1==t||3==t||5==t||8==t||10==t||12==t)&&(this.$owner.pixelSnapping=!0)},t.prototype.remove=function(t){if(void 0===t&&(t=0),24==t)return this.remove(14),void this.remove(15);for(var e=this.$defs.length,i=e-1;i>=0;i--)if(this.$defs[i].type==t){this.$defs.splice(i,1);break}},t.prototype.copyFrom=function(t){var e=this;this.target=t.target,this.$defs.length=0,t.$defs.forEach(function(t){var n=new i;n.copyFrom(t),e.$defs.push(n)},this)},t.prototype.dispose=function(){null!=this.$target&&(this.releaseRefTarget(this.$target),this.$target=null)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.$defs.length},enumerable:!0,configurable:!0}),t.prototype.applyOnSelfResized=function(t,e){var i=this,n=this.$owner.x,s=this.$owner.y;this.$defs.forEach(function(n){switch(n.type){case 3:case 5:i.$owner.x-=t/2;break;case 4:case 6:i.$owner.x-=t;break;case 10:case 12:i.$owner.y-=e/2;break;case 11:case 13:i.$owner.y-=e}},this),n==this.$owner.x&&s==this.$owner.y||(n=this.$owner.x-n,s=this.$owner.y-s,this.$owner.updateGearFromRelations(1,n,s),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(i.$owner.id,n,s)},this))},t.prototype.applyOnXYChanged=function(t,e,i){var n;switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this.$owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this.$owner.y+=i;break;case 14:case 15:break;case 16:case 17:n=this.$owner.x,this.$owner.x+=e,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-n);break;case 18:case 19:this.$owner.width=this.$owner.$rawWidth+e;break;case 20:case 21:n=this.$owner.y,this.$owner.y+=i,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-n);break;case 22:case 23:this.$owner.height=this.$owner.$rawHeight+i}},t.prototype.applyOnSizeChanged=function(t){var e,i;this.$target!=this.$owner.parent?(e=this.$target.x,i=this.$target.y):(e=0,i=0);var n,s;switch(t.type){case 0:break;case 1:n=this.$owner.x-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n;break;case 2:n=this.$owner.x-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+n;break;case 3:n=this.$owner.x+this.$owner.$rawWidth/2-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n-this.$owner.$rawWidth/2;break;case 4:n=this.$owner.x+this.$owner.$rawWidth-e,t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+n-this.$owner.$rawWidth;break;case 5:n=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth/2),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth/2+n-this.$owner.$rawWidth;break;case 6:n=this.$owner.x+this.$owner.$rawWidth-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner.x=e+this.$target.$rawWidth+n-this.$owner.$rawWidth;break;case 7:break;case 8:n=this.$owner.y-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n;break;case 9:n=this.$owner.y-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+n;break;case 10:n=this.$owner.y+this.$owner.$rawHeight/2-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n-this.$owner.$rawHeight/2;break;case 11:n=this.$owner.y+this.$owner.$rawHeight-i,t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+n-this.$owner.$rawHeight;break;case 12:n=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight/2),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight/2+n-this.$owner.$rawHeight;break;case 13:n=this.$owner.y+this.$owner.$rawHeight-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner.y=i+this.$target.$rawHeight+n-this.$owner.$rawHeight;break;case 14:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-this.$target.$initWidth:this.$owner.$rawWidth-this.$targetWidth,t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$target==this.$owner.parent?this.$owner.setSize(this.$target.$rawWidth+n,this.$owner.$rawHeight,!0):this.$owner.width=this.$target.$rawWidth+n;break;case 15:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-this.$target.$initHeight:this.$owner.$rawHeight-this.$targetHeight,t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$target==this.$owner.parent?this.$owner.setSize(this.$owner.$rawWidth,this.$target.$rawHeight+n,!0):this.$owner.height=this.$target.$rawHeight+n;break;case 16:break;case 17:n=this.$owner.x-(e+this.$targetWidth),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),s=this.$owner.x,this.$owner.x=e+this.$target.$rawWidth+n,this.$owner.width=this.$owner.$rawWidth-(this.$owner.x-s);break;case 18:break;case 19:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceWidth-(e+this.$target.$initWidth):this.$owner.width-(e+this.$targetWidth),this.$owner!=this.$target.parent&&(n+=this.$owner.x),t.percent&&(n=n/this.$targetWidth*this.$target.$rawWidth),this.$owner!=this.$target.parent?this.$owner.width=e+this.$target.$rawWidth+n-this.$owner.x:this.$owner.width=e+this.$target.$rawWidth+n;break;case 20:break;case 21:n=this.$owner.y-(i+this.$targetHeight),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),s=this.$owner.y,this.$owner.y=i+this.$target.$rawHeight+n,this.$owner.height=this.$owner.$rawHeight-(this.$owner.y-s);break;case 22:break;case 23:n=this.$owner.$inProgressBuilding&&this.$owner==this.$target.parent?this.$owner.sourceHeight-(i+this.$target.$initHeight):this.$owner.$rawHeight-(i+this.$targetHeight),this.$owner!=this.$target.parent&&(n+=this.$owner.y),t.percent&&(n=n/this.$targetHeight*this.$target.$rawHeight),this.$owner!=this.$target.parent?this.$owner.height=i+this.$target.$rawHeight+n-this.$owner.y:this.$owner.height=i+this.$target.$rawHeight+n}},t.prototype.addRefTarget=function(t){t!=this.$owner.parent&&t.on("__xyChanged",this.$targetXYChanged,this),t.on("__sizeChanged",this.$targetSizeChanged,this),t.on("__sizeDelayChange",this.$targetSizeWillChange,this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight},t.prototype.releaseRefTarget=function(t){t.off("__xyChanged",this.$targetXYChanged,this),t.off("__sizeChanged",this.$targetSizeChanged,this),t.off("__sizeDelayChange",this.$targetSizeWillChange,this)},t.prototype.$targetXYChanged=function(t){var e=this;if(null!=this.$owner.relations.$dealing||null!=this.$owner.group&&this.$owner.group.$updating)return this.$targetX=this.$target.x,void(this.$targetY=this.$target.y);this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,n=this.$owner.y,s=this.$target.x-this.$targetX,r=this.$target.y-this.$targetY;this.$defs.forEach(function(t){e.applyOnXYChanged(t,s,r)},this),this.$targetX=this.$target.x,this.$targetY=this.$target.y,i==this.$owner.x&&n==this.$owner.y||(i=this.$owner.x-i,n=this.$owner.y-n,this.$owner.updateGearFromRelations(1,i,n),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,n)},this)),this.$owner.relations.$dealing=null},t.prototype.$targetSizeChanged=function(t){var e=this;if(null==this.$owner.relations.$dealing){this.$owner.relations.$dealing=this.$target;var i=this.$owner.x,n=this.$owner.y,s=this.$owner.$rawWidth,r=this.$owner.$rawHeight;this.$defs.forEach(function(t){e.applyOnSizeChanged(t)},this),this.$targetWidth=this.$target.$rawWidth,this.$targetHeight=this.$target.$rawHeight,i==this.$owner.x&&n==this.$owner.y||(i=this.$owner.x-i,n=this.$owner.y-n,this.$owner.updateGearFromRelations(1,i,n),null!=this.$owner.parent&&this.$owner.parent.$transitions.forEach(function(t){t.updateFromRelations(e.$owner.id,i,n)},this)),s==this.$owner.$rawWidth&&r==this.$owner.$rawHeight||(s=this.$owner.$rawWidth-s,r=this.$owner.$rawHeight-r,this.$owner.updateGearFromRelations(2,s,r)),this.$owner.relations.$dealing=null}},t.prototype.$targetSizeWillChange=function(t){this.$owner.relations.sizeDirty=!0},t}();t.RelationItem=e;var i=function(){function t(){}return t.prototype.copyFrom=function(t){this.percent=t.percent,this.type=t.type},t}();t.RelationDef=i}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(t){this.sizeDirty=!1,this.$owner=t,this.$items=[]}return e.prototype.add=function(e,i,n){void 0===n&&(n=!1);for(var s=this.$items.length,r=0;s>r;r++){var o=this.$items[r];if(o.target==e)return void o.add(i,n)}var h=new t.RelationItem(this.$owner);h.target=e,h.add(i,n),this.$items.push(h)},e.prototype.addItems=function(t,i){for(var n,s,r=i.split(","),o=0;2>o;o++)if(n=r[o]){"%"==n.charAt(n.length-1)?(n=n.substr(0,n.length-1),s=!0):s=!1,-1==n.indexOf("-")&&(n=n+"-"+n);var h=e.RELATION_NAMES.indexOf(n);if(-1==h)throw new Error("Invalid relation type");this.add(t,h,s)}},e.prototype.remove=function(t,e){void 0===e&&(e=0);for(var i=this.$items.length,n=0;i>n;){var s=this.$items[n];s.target==t?(s.remove(e),s.isEmpty?(s.dispose(),this.$items.splice(n,1),i--):n++):n++}},e.prototype.contains=function(t){for(var e=this.$items.length,i=0;e>i;i++)if(this.$items[i].target==t)return!0;return!1},e.prototype.clearFor=function(t){for(var e=this.$items.length,i=0;e>i;){var n=this.$items[i];n.target==t?(n.dispose(),this.$items.splice(i,1),e--):i++}},e.prototype.clearAll=function(){this.$items.forEach(function(t){t.dispose()},this),this.$items.length=0},e.prototype.copyFrom=function(e){var i=this;this.clearAll(),e.$items.forEach(function(e){var n=new t.RelationItem(i.$owner);n.copyFrom(e),i.$items.push(n)},this)},e.prototype.dispose=function(){this.clearAll()},e.prototype.onOwnerSizeChanged=function(t,e){this.$items.length<=0||this.$items.forEach(function(i){i.applyOnSelfResized(t,e)},this)},e.prototype.ensureRelationsSizeCorrect=function(){0!=this.$items.length&&(this.sizeDirty=!1,this.$items.forEach(function(t){t.target.ensureSizeCorrect()},this))},Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this.$items.length},enumerable:!0,configurable:!0}),e.prototype.setup=function(t){var e=this;t.children.forEach(function(t){if("relation"==t.nodeName){var i,n;i=t.attributes.target,n=e.$owner.parent?i?e.$owner.parent.getChildById(i):e.$owner.parent:e.$owner.getChildById(i),n&&e.addItems(n,t.attributes.sidePair)}},this)},e.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"],e}();t.Relations=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function n(s,r,o,h,a,l,c){var u=e.call(this)||this;if(u.$viewWidth=0,u.$viewHeight=0,u.$contentWidth=0,u.$contentHeight=0,u.$scrollType=0,u.$scrollSpeed=0,u.$mouseWheelSpeed=0,u.$onStage=!1,null==n.$easeTypeFunc&&(n.$easeTypeFunc=t.ParseEaseType("cubeOut")),u.$throwTween=new i,u.$owner=s,u.$maskContainer=new t.UIContainer(null),u.$owner.$rootContainer.addChild(u.$maskContainer),u.$container=u.$owner.$container,u.$container.x=0,u.$container.y=0,u.$maskContainer.addChild(u.$container),u.$scrollType=r,u.$scrollBarMargin=o,u.$bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,u.$touchEffect=t.UIConfig.defaultScrollTouchEffect,u.$scrollSpeed=t.UIConfig.defaultScrollSpeed,u.$mouseWheelSpeed=2*u.$scrollSpeed,u.$displayOnLeft=0!=(1&a),u.$snapToItem=0!=(2&a),u.$displayOnDemand=0!=(4&a),u.$pageMode=0!=(8&a),16&a?u.$touchEffect=!0:32&a?u.$touchEffect=!1:u.$touchEffect=t.UIConfig.defaultScrollTouchEffect,64&a?u.$bouncebackEffect=!0:128&a?u.$bouncebackEffect=!1:u.$bouncebackEffect=t.UIConfig.defaultScrollBounceEffect,u.$inertiaDisabled=0!=(256&a),0==(512&a)&&(u.$maskContainer.scrollRect=new PIXI.Rectangle),u.$xPerc=0,u.$yPerc=0,u.$xPos=0,u.$yPos=0,u.$xOverlap=0,u.$yOverlap=0,u.$aniFlag=0,u.$scrollBarVisible=!0,u.$mouseWheelEnabled=!1,u.$holdAreaPoint=new PIXI.Point,0==h&&(h=t.UIConfig.defaultScrollBarDisplay),3!=h){if(2==u.$scrollType||1==u.$scrollType){var p=l?l:t.UIConfig.verticalScrollBar;if(p){if(u.$vtScrollBar=t.UIPackage.createObjectFromURL(p),!u.$vtScrollBar)throw new Error("Cannot create scrollbar from "+p);u.$vtScrollBar.setScrollPane(u,!0),u.$owner.$rootContainer.addChild(u.$vtScrollBar.displayObject)}}if(2==u.$scrollType||0==u.$scrollType){var p=c?c:t.UIConfig.horizontalScrollBar;if(p){if(u.$hzScrollBar=t.UIPackage.createObjectFromURL(p),!u.$hzScrollBar)throw new Error("Cannot create scrollbar from "+p);u.$hzScrollBar.setScrollPane(u,!1),u.$owner.$rootContainer.addChild(u.$hzScrollBar.displayObject)}}u.$scrollBarDisplayAuto=2==h,u.$scrollBarDisplayAuto&&(u.$scrollBarVisible=!1,u.$vtScrollBar&&(u.$vtScrollBar.displayObject.visible=!1),u.$hzScrollBar&&(u.$hzScrollBar.displayObject.visible=!1))}return u.$contentWidth=0,u.$contentHeight=0,u.setSize(s.width,s.height),u.$owner.on(t.InteractiveEvents.Over,u.$rollOver,u),u.$owner.on(t.InteractiveEvents.Out,u.$rollOut,u),u.$owner.on(t.InteractiveEvents.Down,u.$mouseDown,u),u.$owner.$rootContainer.on("added",u.$ownerAdded,u),u.$owner.$rootContainer.on("removed",u.$ownerRemoved,u),u}return __extends(n,e),n.prototype.$ownerAdded=function(t){this.$onStage=!0},n.prototype.$ownerRemoved=function(t){this.$onStage=!1},Object.defineProperty(n.prototype,"owner",{get:function(){return this.$owner},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bouncebackEffect",{get:function(){return this.$bouncebackEffect},set:function(t){this.$bouncebackEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"touchEffect",{get:function(){return this.$touchEffect},set:function(t){this.$touchEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollSpeed",{get:function(){return this.$scrollSpeed},set:function(e){this.$scrollSpeed=this.scrollSpeed,0==this.$scrollSpeed&&(this.$scrollSpeed=t.UIConfig.defaultScrollSpeed),this.$mouseWheelSpeed=2*this.$scrollSpeed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"snapToItem",{get:function(){return this.$snapToItem},set:function(t){this.$snapToItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"percX",{get:function(){return this.$xPerc},set:function(t){this.setPercX(t,!1)},enumerable:!0,configurable:!0}),n.prototype.setPercX=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),e=t.utils.NumberUtil.clamp01(e),e!=this.$xPerc&&(this.$xPerc=e,this.$xPos=this.$xPerc*this.$xOverlap,this.posChanged(i))},Object.defineProperty(n.prototype,"percY",{get:function(){return this.$yPerc},set:function(t){this.setPercY(t,!1)},enumerable:!0,configurable:!0}),n.prototype.setPercY=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),e=t.utils.NumberUtil.clamp01(e),e!=this.$yPerc&&(this.$yPerc=e,
this.$yPos=this.$yPerc*this.$yOverlap,this.posChanged(i))},Object.defineProperty(n.prototype,"posX",{get:function(){return this.$xPos},set:function(t){this.setPosX(t,!1)},enumerable:!0,configurable:!0}),n.prototype.setPosX=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),e=t.utils.NumberUtil.clamp(e,0,this.$xOverlap),e!=this.$xPos&&(this.$xPos=e,this.$xPerc=0==this.$xOverlap?0:this.$xPos/this.$xOverlap,this.posChanged(i))},Object.defineProperty(n.prototype,"posY",{get:function(){return this.$yPos},set:function(t){this.setPosY(t,!1)},enumerable:!0,configurable:!0}),n.prototype.setPosY=function(e,i){void 0===i&&(i=!1),this.$owner.ensureBoundsCorrect(),e=t.utils.NumberUtil.clamp(e,0,this.$yOverlap),e!=this.$yPos&&(this.$yPos=e,this.$yPerc=0==this.$yOverlap?0:this.$yPos/this.$yOverlap,this.posChanged(i))},Object.defineProperty(n.prototype,"isBottomMost",{get:function(){return 1==this.$yPerc||0==this.$yOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRightMost",{get:function(){return 1==this.$xPerc||0==this.$xOverlap},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPageX",{get:function(){return this.$pageMode?Math.floor(this.posX/this.$pageSizeH):0},set:function(t){this.$pageMode&&this.$xOverlap>0&&this.setPosX(t*this.$pageSizeH,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPageY",{get:function(){return this.$pageMode?Math.floor(this.posY/this.$pageSizeV):0},set:function(t){this.$pageMode&&this.$yOverlap>0&&this.setPosY(t*this.$pageSizeV,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollingPosX",{get:function(){return t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollingPosY",{get:function(){return t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentWidth",{get:function(){return this.$contentWidth},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentHeight",{get:function(){return this.$contentHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewWidth",{get:function(){return this.$viewWidth},set:function(t){t=t+this.$owner.margin.left+this.$owner.margin.right,null!=this.$vtScrollBar&&(t+=this.$vtScrollBar.width),this.$owner.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"viewHeight",{get:function(){return this.$viewHeight},set:function(t){t=t+this.$owner.margin.top+this.$owner.margin.bottom,null!=this.$hzScrollBar&&(t+=this.$hzScrollBar.height),this.$owner.height=t},enumerable:!0,configurable:!0}),n.prototype.getDeltaX=function(t){return t/(this.$contentWidth-this.$viewWidth)},n.prototype.getDeltaY=function(t){return t/(this.$contentHeight-this.$viewHeight)},n.prototype.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},n.prototype.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},n.prototype.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc-this.getDeltaY(this.$scrollSpeed*t),e)},n.prototype.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this.$yPerc+this.getDeltaY(this.$scrollSpeed*t),e)},n.prototype.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc-this.getDeltaX(this.$scrollSpeed*t),e)},n.prototype.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this.$xPerc+this.getDeltaX(this.$scrollSpeed*t),e)},n.prototype.scrollToView=function(e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1),this.$owner.ensureBoundsCorrect(),this.$needRefresh&&this.refresh();var r;if(e instanceof t.GObject?e.parent!=this.$owner?(e.parent.localToGlobalRect(e.x,e.y,e.width,e.height,n.sHelperRect),r=this.$owner.globalToLocalRect(n.sHelperRect.x,n.sHelperRect.y,n.sHelperRect.width,n.sHelperRect.height,n.sHelperRect)):(r=n.sHelperRect,r.x=e.x,r.y=e.y,r.width=e.width,r.height=e.height):r=e,this.$yOverlap>0){var o=this.posY,h=o+this.$viewHeight;s||r.y<o||r.height>=this.$viewHeight?this.$pageMode?this.setPosY(Math.floor(r.y/this.$pageSizeV)*this.$pageSizeV,i):this.setPosY(r.y,i):r.y+r.height>h&&(this.$pageMode?this.setPosY(Math.floor(r.y/this.$pageSizeV)*this.$pageSizeV,i):r.height<=this.$viewHeight/2?this.setPosY(r.y+2*r.height-this.$viewHeight,i):this.setPosY(r.y+r.height-this.$viewHeight,i))}if(this.$xOverlap>0){var a=this.posX,l=a+this.$viewWidth;s||r.x<a||r.width>=this.$viewWidth?this.$pageMode?this.setPosX(Math.floor(r.x/this.$pageSizeH)*this.$pageSizeH,i):this.setPosX(r.x,i):r.x+r.width>l&&(this.$pageMode?this.setPosX(Math.floor(r.x/this.$pageSizeH)*this.$pageSizeH,i):r.width<=this.$viewWidth/2?this.setPosX(r.x+2*r.width-this.$viewWidth,i):this.setPosX(r.x+r.width-this.$viewWidth,i))}!i&&this.$needRefresh&&this.refresh()},n.prototype.isChildInView=function(t){var e;return this.$yOverlap>0&&(e=t.y+this.$container.y,e<-t.height-20||e>this.$viewHeight+20)?!1:!(this.$xOverlap>0&&(e=t.x+this.$container.x,e<-t.width-20||e>this.$viewWidth+20))},n.prototype.cancelDragging=function(){var e=t.GRoot.inst.nativeStage;e.off(t.InteractiveEvents.Move,this.$touchMove,this),e.off(t.InteractiveEvents.Up,this.$touchEnd,this),e.off(t.InteractiveEvents.Click,this.$touchTap,this),n.draggingPane==this&&(n.draggingPane=null),n.$gestureFlag=0,this.$isDragged=!1,this.$maskContainer.interactiveChildren=!0},n.prototype.onOwnerSizeChanged=function(){this.setSize(this.$owner.width,this.$owner.height),this.posChanged(!1)},n.prototype.adjustMaskContainer=function(){var t,e;t=this.$displayOnLeft&&null!=this.$vtScrollBar?Math.floor(this.$owner.margin.left+this.$vtScrollBar.width):Math.floor(this.$owner.margin.left),e=Math.floor(this.$owner.margin.top),t+=this.$owner.$alignOffset.x,e+=this.$owner.$alignOffset.y,this.$maskContainer.x=t,this.$maskContainer.y=e},n.prototype.setSize=function(t,e){this.adjustMaskContainer(),this.$hzScrollBar&&(this.$hzScrollBar.y=e-this.$hzScrollBar.height,this.$vtScrollBar&&!this.$vScrollNone?(this.$hzScrollBar.width=t-this.$vtScrollBar.width-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$displayOnLeft?this.$hzScrollBar.x=this.$scrollBarMargin.left+this.$vtScrollBar.width:this.$hzScrollBar.x=this.$scrollBarMargin.left):(this.$hzScrollBar.width=t-this.$scrollBarMargin.left-this.$scrollBarMargin.right,this.$hzScrollBar.x=this.$scrollBarMargin.left)),this.$vtScrollBar&&(this.$displayOnLeft||(this.$vtScrollBar.x=t-this.$vtScrollBar.width),this.$hzScrollBar?this.$vtScrollBar.height=e-this.$hzScrollBar.height-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom:this.$vtScrollBar.height=e-this.$scrollBarMargin.top-this.$scrollBarMargin.bottom,this.$vtScrollBar.y=this.$scrollBarMargin.top),this.$viewWidth=t,this.$viewHeight=e,this.$hzScrollBar&&!this.$hScrollNone&&(this.$viewHeight-=this.$hzScrollBar.height),this.$vtScrollBar&&!this.$vScrollNone&&(this.$viewWidth-=this.$vtScrollBar.width),this.$viewWidth-=this.$owner.margin.left+this.$owner.margin.right,this.$viewHeight-=this.$owner.margin.top+this.$owner.margin.bottom,this.$viewWidth=Math.max(1,this.$viewWidth),this.$viewHeight=Math.max(1,this.$viewHeight),this.$pageSizeH=this.$viewWidth,this.$pageSizeV=this.$viewHeight,this.handleSizeChanged()},n.prototype.setContentSize=function(t,e){this.$contentWidth==t&&this.$contentHeight==e||(this.$contentWidth=t,this.$contentHeight=e,this.handleSizeChanged())},n.prototype.changeContentSizeOnScrolling=function(t,e,i,n){if(this.$contentWidth+=t,this.$contentHeight+=e,this.$isDragged){0!=i&&(this.$container.x-=i),0!=n&&(this.$container.y-=n),this.validateHolderPos(),this.$xOffset+=i,this.$yOffset+=n;var s=this.$y2-this.$y1;this.$y1=this.$container.y,this.$y2=this.$y1+s,s=this.$x2-this.$x1,this.$x1=this.$container.x,this.$x2=this.$x1+s,this.$yPos=-this.$container.y,this.$xPos=-this.$container.x}else 2==this.$tweening&&(0!=i&&(this.$container.x-=i,this.$throwTween.start.x-=i),0!=n&&(this.$container.y-=n,this.$throwTween.start.y-=n));this.handleSizeChanged(!0)},n.prototype.handleSizeChanged=function(e){void 0===e&&(e=!1),this.$displayOnDemand&&(this.$vtScrollBar&&(this.$contentHeight<=this.$viewHeight?this.$vScrollNone||(this.$vScrollNone=!0,this.$viewWidth+=this.$vtScrollBar.width):this.$vScrollNone&&(this.$vScrollNone=!1,this.$viewWidth-=this.$vtScrollBar.width)),this.$hzScrollBar&&(this.$contentWidth<=this.$viewWidth?this.$hScrollNone||(this.$hScrollNone=!0,this.$viewHeight+=this.$hzScrollBar.height):this.$hScrollNone&&(this.$hScrollNone=!1,this.$viewHeight-=this.$hzScrollBar.height))),this.$vtScrollBar&&(this.$viewHeight<this.$vtScrollBar.minSize?this.$vtScrollBar.displayObject.visible=!1:(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone,0==this.$contentHeight?this.$vtScrollBar.displayPerc=0:this.$vtScrollBar.displayPerc=Math.min(1,this.$viewHeight/this.$contentHeight))),this.$hzScrollBar&&(this.$viewWidth<this.$hzScrollBar.minSize?this.$hzScrollBar.displayObject.visible=!1:(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone,0==this.$contentWidth?this.$hzScrollBar.displayPerc=0:this.$hzScrollBar.displayPerc=Math.min(1,this.$viewWidth/this.$contentWidth)));var i=this.$maskContainer.scrollRect;null!=i&&(i.x=i.y=0,i.width=this.$viewWidth,i.height=this.$viewHeight,this.$maskContainer.scrollRect=i),0==this.$scrollType||2==this.$scrollType?this.$xOverlap=Math.ceil(Math.max(0,this.$contentWidth-this.$viewWidth)):this.$xOverlap=0,1==this.$scrollType||2==this.$scrollType?this.$yOverlap=Math.ceil(Math.max(0,this.$contentHeight-this.$viewHeight)):this.$yOverlap=0,0==this.$tweening&&e?(0!=this.$xPerc&&1!=this.$xPerc||(this.$xPos=this.$xPerc*this.$xOverlap,this.$container.x=-this.$xPos),0!=this.$yPerc&&1!=this.$yPerc||(this.$yPos=this.$yPerc*this.$yOverlap,this.$container.y=-this.$yPos)):(this.$xPos=t.utils.NumberUtil.clamp(this.$xPos,0,this.$xOverlap),this.$xPerc=this.$xOverlap>0?this.$xPos/this.$xOverlap:0,this.$yPos=t.utils.NumberUtil.clamp(this.$yPos,0,this.$yOverlap),this.$yPerc=this.$yOverlap>0?this.$yPos/this.$yOverlap:0),this.validateHolderPos(),null!=this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),null!=this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc)},n.prototype.validateHolderPos=function(){this.$container.x=t.utils.NumberUtil.clamp(this.$container.x,-this.$xOverlap,0),this.$container.y=t.utils.NumberUtil.clamp(this.$container.y,-this.$yOverlap,0)},n.prototype.posChanged=function(e){0==this.$aniFlag?this.$aniFlag=e?1:-1:1!=this.$aniFlag||e||(this.$aniFlag=-1),this.$needRefresh=!0,t.GTimer.inst.callLater(this.refresh,this),2==this.$tweening&&this.killTween()},n.prototype.killTween=function(){1==this.$tweening?(this.$tweener.setPaused(!0),this.$tweening=0,this.$tweener=null,this.syncScrollBar(!0)):2==this.$tweening&&(this.$tweener.setPaused(!0),this.$tweener=null,this.$tweening=0,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scrollEnd",this))},n.prototype.refresh=function(){if(this.$needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),this.$pageMode){var e=void 0,i=void 0;this.$yOverlap>0&&1!=this.$yPerc&&0!=this.$yPerc&&(e=Math.floor(this.$yPos/this.$pageSizeV),i=this.$yPos-e*this.$pageSizeV,i>this.$pageSizeV/2&&e++,this.$yPos=e*this.$pageSizeV,this.$yPos>this.$yOverlap?(this.$yPos=this.$yOverlap,this.$yPerc=1):this.$yPerc=this.$yPos/this.$yOverlap),this.$xOverlap>0&&1!=this.$xPerc&&0!=this.$xPerc&&(e=Math.floor(this.$xPos/this.$pageSizeH),i=this.$xPos-e*this.$pageSizeH,i>this.$pageSizeH/2&&e++,this.$xPos=e*this.$pageSizeH,this.$xPos>this.$xOverlap?(this.$xPos=this.$xOverlap,this.$xPerc=1):this.$xPerc=this.$xPos/this.$xOverlap)}else if(this.$snapToItem){var s=this.$owner.getSnappingPosition(1==this.$xPerc?0:this.$xPos,1==this.$yPerc?0:this.$yPos,n.sHelperPoint);1!=this.$xPerc&&s.x!=this.$xPos&&(this.$xPos=s.x,this.$xPerc=this.$xPos/this.$xOverlap,this.$xPerc>1&&(this.$xPerc=1,this.$xPos=this.$xOverlap)),1!=this.$yPerc&&s.y!=this.$yPos&&(this.$yPos=s.y,this.$yPerc=this.$yPos/this.$yOverlap,this.$yPerc>1&&(this.$yPerc=1,this.$yPos=this.$yOverlap))}this.refresh2(),this.emit("__scroll",this),this.$needRefresh&&(this.$needRefresh=!1,t.GTimer.inst.remove(this.refresh,this),this.refresh2()),this.$aniFlag=0},n.prototype.refresh2=function(){var e=Math.floor(this.$xPos),i=Math.floor(this.$yPos);if(1!=this.$aniFlag||this.$isDragged)null!=this.$tweener&&this.killTween(),this.$isDragged&&(this.$xOffset+=this.$container.x- -e,this.$yOffset+=this.$container.y- -i),this.$container.y=-i,this.$container.x=-e,this.$isDragged&&(this.$y1=this.$y2=this.$container.y,this.$x1=this.$x2=this.$container.x),this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=this.$yPerc),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=this.$xPerc);else{var s=this.$container.x,r=this.$container.y;this.$yOverlap>0?r=-i:0!=this.$container.y&&(this.$container.y=0),this.$xOverlap>0?s=-e:0!=this.$container.x&&(this.$container.x=0),s==this.$container.x&&r==this.$container.y||(null!=this.$tweener&&this.killTween(),this.$tweening=1,this.$maskContainer.interactiveChildren=!1,this.$tweener=createjs.Tween.get(this.$container,{onChange:t.utils.Binder.create(this.$tweenUpdate,this)}).to({x:s,y:r},500,n.$easeTypeFunc).call(this.$tweenComplete,null,this))}},n.prototype.syncPos=function(){this.$xOverlap>0&&(this.$xPos=t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap),this.$xPerc=this.$xPos/this.$xOverlap),this.$yOverlap>0&&(this.$yPos=t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap),this.$yPerc=this.$yPos/this.$yOverlap)},n.prototype.syncScrollBar=function(e){void 0===e&&(e=!1),e?(this.$vtScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$hzScrollBar&&this.$scrollBarDisplayAuto&&this.showScrollBar(!1),this.$maskContainer.interactiveChildren=!0):(this.$vtScrollBar&&(this.$vtScrollBar.scrollPerc=0==this.$yOverlap?0:t.utils.NumberUtil.clamp(-this.$container.y,0,this.$yOverlap)/this.$yOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)),this.$hzScrollBar&&(this.$hzScrollBar.scrollPerc=0==this.$xOverlap?0:t.utils.NumberUtil.clamp(-this.$container.x,0,this.$xOverlap)/this.$xOverlap,this.$scrollBarDisplayAuto&&this.showScrollBar(!0)))},n.prototype.$mouseDown=function(e){if(this.$touchEffect){null!=this.$tweener&&this.killTween(),n.sHelperPoint=e.data.getLocalPosition(this.$maskContainer,n.sHelperPoint),this.$x1=this.$x2=this.$container.x,this.$y1=this.$y2=this.$container.y,this.$xOffset=n.sHelperPoint.x-this.$container.x,this.$yOffset=n.sHelperPoint.y-this.$container.y,this.$time1=this.$time2=Date.now(),this.$holdAreaPoint.x=n.sHelperPoint.x,this.$holdAreaPoint.y=n.sHelperPoint.y,this.$isHoldAreaDone=!1,this.$isDragged=!1;var i=t.GRoot.inst.nativeStage;i.on(t.InteractiveEvents.Move,this.$touchMove,this),i.on(t.InteractiveEvents.Up,this.$touchEnd,this),i.on(t.InteractiveEvents.Click,this.$touchTap,this)}},n.prototype.$touchMove=function(e){if(this.$onStage&&this.$owner.finalVisible&&this.$touchEffect&&(null==n.draggingPane||n.draggingPane==this)&&null==t.GObject.draggingObject){var i,s,r,o,h,a=t.UIConfig.touchScrollSensitivity,l=e.data.getLocalPosition(this.$maskContainer,n.sHelperPoint);if(1==this.$scrollType){if(!this.$isHoldAreaDone){if(n.$gestureFlag|=1,i=Math.abs(this.$holdAreaPoint.y-l.y),a>i)return;if(0!=(2&n.$gestureFlag)&&(s=Math.abs(this.$holdAreaPoint.x-l.x),s>i))return}r=!0}else if(0==this.$scrollType){if(!this.$isHoldAreaDone){if(n.$gestureFlag|=2,i=Math.abs(this.$holdAreaPoint.x-l.x),a>i)return;if(0!=(1&n.$gestureFlag)&&(s=Math.abs(this.$holdAreaPoint.y-l.y),s>i))return}o=!0}else{if(n.$gestureFlag=3,!this.$isHoldAreaDone&&(i=Math.abs(this.$holdAreaPoint.y-l.y),a>i&&(i=Math.abs(this.$holdAreaPoint.x-l.x),a>i)))return;r=o=!0}var c=Date.now();if(c-this.$time2>50&&(this.$time2=this.$time1,this.$time1=c,h=!0),r){var u=Math.floor(n.sHelperPoint.y-this.$yOffset);u>0?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.y=0:this.$container.y=Math.floor(.5*u):u<-this.$yOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.y=Math.floor(.5*(u-this.$yOverlap)):this.$container.y=-Math.floor(this.$yOverlap):this.$container.y=u,h&&(this.$y2=this.$y1,this.$y1=this.$container.y)}if(o){var p=Math.floor(n.sHelperPoint.x-this.$xOffset);p>0?!this.$bouncebackEffect||this.$inertiaDisabled?this.$container.x=0:this.$container.x=Math.floor(.5*p):p<0-this.$xOverlap||this.$inertiaDisabled?this.$bouncebackEffect?this.$container.x=Math.floor(.5*(p-this.$xOverlap)):this.$container.x=-Math.floor(this.$xOverlap):this.$container.x=p,h&&(this.$x2=this.$x1,this.$x1=this.$container.x)}n.draggingPane=this,this.$maskContainer.interactiveChildren=!1,this.$isHoldAreaDone=!0,this.$isDragged=!0,this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)}},n.prototype.$touchEnd=function(e){var s=t.GRoot.inst.nativeStage;if(s.off(t.InteractiveEvents.Move,this.$touchMove,this),s.off(t.InteractiveEvents.Up,this.$touchEnd,this),s.off(t.InteractiveEvents.Click,this.$touchTap,this),n.draggingPane==this&&(n.draggingPane=null),n.$gestureFlag=0,this.$isDragged&&this.$touchEffect&&!this.$inertiaDisabled&&this.$owner.onStage){var r=(Date.now()-this.$time2)/1e3;0==r&&(r=.001);var o=(this.$container.y-this.$y2)/r*2*t.UIConfig.defaultTouchScrollSpeedRatio,h=(this.$container.x-this.$x2)/r*2*t.UIConfig.defaultTouchScrollSpeedRatio,a=.3;this.$throwTween.start.x=this.$container.x,this.$throwTween.start.y=this.$container.y;var l,c=this.$throwTween.change1,u=this.$throwTween.change2,p=0,$=0,d=0,f=0,g=0;if(2==this.$scrollType||0==this.$scrollType?(this.$container.x>t.UIConfig.touchDragSensitivity?g=1:this.$container.x<-this.$xOverlap-t.UIConfig.touchDragSensitivity&&(g=2),c.x=i.calculateChange(h,a),u.x=0,p=this.$container.x+c.x,this.$pageMode&&0>p&&p>-this.$xOverlap&&(d=Math.floor(-p/this.$pageSizeH),l=Math.min(this.$pageSizeH,this.$contentWidth-(d+1)*this.$pageSizeH),f=-p-d*this.$pageSizeH,Math.abs(c.x)>this.$pageSizeH?f>.5*l&&d++:f>l*(c.x<0?.3:.7)&&d++,p=-d*this.$pageSizeH,p<-this.$xOverlap&&(p=-this.$xOverlap),c.x=p-this.$container.x)):c.x=u.x=0,2==this.$scrollType||1==this.$scrollType?(this.$container.y>t.UIConfig.touchDragSensitivity?g=1:this.$container.y<-this.$yOverlap-t.UIConfig.touchDragSensitivity&&(g=2),c.y=i.calculateChange(o,a),u.y=0,$=this.$container.y+c.y,this.$pageMode&&0>$&&$>-this.$yOverlap&&(d=Math.floor(-$/this.$pageSizeV),l=Math.min(this.$pageSizeV,this.$contentHeight-(d+1)*this.$pageSizeV),f=-$-d*this.$pageSizeV,Math.abs(c.y)>this.$pageSizeV?f>.5*l&&d++:f>l*(c.y<0?.3:.7)&&d++,$=-d*this.$pageSizeV,$<-this.$yOverlap&&($=-this.$yOverlap),c.y=$-this.$container.y)):c.y=u.y=0,this.$snapToItem&&!this.$pageMode){p=-p,$=-$;var y=this.$owner.getSnappingPosition(p,$,n.sHelperPoint);p=-y.x,$=-y.y,c.x=p-this.$container.x,c.y=$-this.$container.y}this.$bouncebackEffect?(p>0?u.x=0-this.$container.x-c.x:p<-this.$xOverlap&&(u.x=-this.$xOverlap-this.$container.x-c.x),$>0?u.y=0-this.$container.y-c.y:$<-this.$yOverlap&&(u.y=-this.$yOverlap-this.$container.y-c.y)):(p>0?c.x=0-this.$container.x:p<-this.$xOverlap&&(c.x=-this.$xOverlap-this.$container.x),$>0?c.y=0-this.$container.y:$<-this.$yOverlap&&(c.y=-this.$yOverlap-this.$container.y)),this.$throwTween.value=0,this.$throwTween.change1=c,this.$throwTween.change2=u,null!=this.$tweener&&this.killTween(),this.$tweening=2,this.$tweener=createjs.Tween.get(this.$throwTween,{onChange:t.utils.Binder.create(this.$tweenUpdate2,this)}).to({value:1},1e3*a,n.$easeTypeFunc).call(this.$tweenComplete2,null,this),1==g?this.emit("__pullDownRelease",this):2==g&&this.emit("__pullUpRelease",this)}},n.prototype.$touchTap=function(t){this.$isDragged=!1},n.prototype.$rollOver=function(t){this.showScrollBar(!0)},n.prototype.$rollOut=function(t){this.showScrollBar(!1)},n.prototype.dispose=function(){t.GTimer.inst.remove(this.refresh,this),t.GTimer.inst.remove(this.setScrollBarVisible,this),createjs.Tween.removeTweens(this.$throwTween),createjs.Tween.removeTweens(this.$container),this.$tweener&&(this.$tweener.removeAllEventListeners(),this.$tweener=null),this.$owner.$rootContainer.off("added",this.$ownerAdded,this),this.$owner.$rootContainer.off("removed",this.$ownerRemoved,this),this.$owner.off(t.InteractiveEvents.Over,this.$rollOver,this),this.$owner.off(t.InteractiveEvents.Out,this.$rollOut,this),this.$owner.off(t.InteractiveEvents.Down,this.$mouseDown,this);var e=t.GRoot.inst.nativeStage;e.off(t.InteractiveEvents.Move,this.$touchMove,this),e.off(t.InteractiveEvents.Up,this.$touchEnd,this),e.off(t.InteractiveEvents.Click,this.$touchTap,this)},n.prototype.showScrollBar=function(e){e?(this.setScrollBarVisible(!0),t.GTimer.inst.remove(this.setScrollBarVisible,this)):t.GTimer.inst.add(500,1,this.setScrollBarVisible,this,e)},n.prototype.setScrollBarVisible=function(t){this.$scrollBarVisible=t&&this.$viewWidth>0&&this.$viewHeight>0,this.$vtScrollBar&&(this.$vtScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$vScrollNone),this.$hzScrollBar&&(this.$hzScrollBar.displayObject.visible=this.$scrollBarVisible&&!this.$hScrollNone)},n.prototype.$tweenUpdate=function(){this.syncScrollBar(),this.emit("__scroll",this)},n.prototype.$tweenComplete=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncScrollBar(!0),this.emit("__scroll",this)},n.prototype.$tweenUpdate2=function(){this.$throwTween.update(this.$container),this.syncPos(),this.syncScrollBar(),this.emit("__scroll",this)},n.prototype.$tweenComplete2=function(){this.$tweening=0,this.$tweener=null,this.validateHolderPos(),this.syncPos(),this.syncScrollBar(!0),this.emit("__scroll",this),this.emit("__scrollEnd",this)},n.$gestureFlag=0,n.sHelperRect=new PIXI.Rectangle,n.sHelperPoint=new PIXI.Point,n}(PIXI.utils.EventEmitter);t.ScrollPane=e;var i=function(){function t(){this.start=new PIXI.Point,this.change1=new PIXI.Point,this.change2=new PIXI.Point}return t.prototype.update=function(t){t.x=Math.floor(this.start.x+this.change1.x*this.value+this.change2.x*this.value*this.value),t.y=Math.floor(this.start.y+this.change1.y*this.value+this.change2.y*this.value*this.value)},t.calculateChange=function(e,i){return i*t.checkpoint*e/t.easeOutCubic(t.checkpoint,0,1,1)},t.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.checkpoint=.05,t}()}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(t){this.autoPlayRepeat=1,this.autoPlayDelay=0,this.$ownerBaseX=0,this.$ownerBaseY=0,this.$totalTimes=0,this.$totalTasks=0,this.$playing=!1,this.$options=0,this.$maxTime=0,this.$owner=t,this.$items=[],this.$owner.on("__visibleChanged",this.$ownerVisibleChanged,this)}return e.prototype.$ownerVisibleChanged=function(t,i){0==(this.$options&e.OPTION_AUTO_STOP_DISABLED)&&t===!1&&this.stop(0!=(this.$options&e.OPTION_AUTO_STOP_AT_END),!1)},Object.defineProperty(e.prototype,"autoPlay",{get:function(){return this.$autoPlay},set:function(t){this.$autoPlay!=t&&(this.$autoPlay=t,this.$autoPlay?this.$owner.onStage&&this.play({times:this.autoPlayRepeat,delay:this.autoPlayDelay}):this.$owner.onStage||this.stop(!1,!0))},enumerable:!0,configurable:!0}),e.prototype.changeRepeat=function(t){this.$totalTimes=0|t},e.prototype.play=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==typeof t[0]){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!1)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!1)},e.prototype.playReverse=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length&&"object"==typeof t[0]){var i=t[0];this.$play(i.onComplete,i.onCompleteObj,i.onCompleteParam,i.times||1,i.delay||0,!0)}else this.$play(t[0],t[1],t[2],t[3]||1,t[4]||0,!0)},e.prototype.$play=function(t,i,n,s,r,o){var h=this;void 0===o&&(o=!1),this.stop(),0==s?s=1:-1==s&&(s=Number.MAX_VALUE),this.$totalTimes=s,this.$reversed=o,this.internalPlay(r),this.$playing=this.$totalTasks>0,this.$playing?(this.$onComplete=t,this.$onCompleteParam=n,this.$onCompleteObj=i,0!=(this.$options&e.OPTION_IGNORE_DISPLAY_CONTROLLER)&&this.$items.forEach(function(t){null!=t.target&&t.target!=h.$owner&&(t.lockToken=t.target.lockGearDisplay())},this)):null!=t&&(n&&n.length?t.apply(i,n):t.call(i,n))},e.prototype.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this.$playing){this.$playing=!1,this.$totalTasks=0,this.$totalTimes=0;var i=this.$onComplete,n=this.$onCompleteParam,s=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null;var r=this.$items.length,o=void 0;if(this.$reversed)for(var h=r-1;h>=0;h--)o=this.$items[h],null!=o.target&&this.stopItem(o,t);else for(var h=0;r>h;h++)o=this.$items[h],null!=o.target&&this.stopItem(o,t);e&&null!=i&&(n&&n.length>0?i.apply(s,n):i.call(s,n))}},e.prototype.stopItem=function(e,i){if(0!=e.lockToken&&(e.target.releaseGearDisplay(e.lockToken),e.lockToken=0),12==e.type&&e.filterCreated&&(e.target.filters=null),!e.completed)if(this.disposeTween(e),10==e.type){var n=e.target.getTransition(e.value.s);null!=n&&n.stop(i,!1)}else 11==e.type?(t.GTimer.inst.remove(e.$shake,e),e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1,e.target.y-e.startValue.f2),e.target.$gearLocked=!1):i&&(e.tween?e.yoyo&&e.repeat%2!=0?this.applyValue(e,this.$reversed?e.endValue:e.startValue):this.applyValue(e,this.$reversed?e.startValue:e.endValue):9!=e.type&&this.applyValue(e,e.value))},e.prototype.dispose=function(){var e=this;t.GTimer.inst.remove(this.internalPlay,this),this.$owner.off("__visibleChanged",this.$ownerVisibleChanged,this),this.$playing=!1,this.$items.forEach(function(i){if(null!=i.target&&!i.completed)if(e.disposeTween(i),10==i.type){var n=i.target.getTransition(i.value.s);null!=n&&n.dispose()}else 11==i.type&&t.GTimer.inst.remove(i.$shake,i)},this)},Object.defineProperty(e.prototype,"playing",{get:function(){return this.$playing},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.$items.forEach(function(i){if(null!=i.label||null!=i.label2){var n;if(i.label==t)n=i.tween?i.startValue:i.value;else{if(i.label2!=t)return;n=i.endValue}switch(i.type){case 0:case 1:case 3:case 2:case 13:n.b1=!0,n.b2=!0,n.f1=parseFloat(e[0]),n.f2=parseFloat(e[1]);break;case 4:n.f1=parseFloat(e[0]);break;case 5:n.i=parseInt(e[0]);break;case 6:n.c=parseFloat(e[0]);break;case 7:n.i=parseInt(e[0]),e.length>1&&(n.b=e[1]);break;case 8:n.b=e[0];break;case 9:n.s=e[0],e.length>1&&(n.f1=parseFloat(e[1]));break;case 10:n.s=e[0],e.length>1&&(n.i=parseInt(e[1]));break;case 11:n.f1=parseFloat(e[0]),e.length>1&&(n.f2=parseFloat(e[1]));break;case 12:n.f1=parseFloat(e[0]),n.f2=parseFloat(e[1]),n.f3=parseFloat(e[2]),n.f4=parseFloat(e[3])}}},this)},e.prototype.setHook=function(t,e,i){for(var n=this.$items.length,s=0;n>s;s++){var r=this.$items[s];if(r.label==t){r.hook=e,r.hookObj=i;break}if(r.label2==t){r.hook2=e,r.hook2Obj=i;break}}},e.prototype.clearHooks=function(){this.$items.forEach(function(t){t.hook=null,t.hookObj=null,t.hook2=null,t.hook2Obj=null},this)},e.prototype.setTarget=function(t,e){this.$items.forEach(function(i){i.label==t&&(i.targetId=e.id)},this)},e.prototype.setDuration=function(t,e){this.$items.forEach(function(i){i.tween&&i.label==t&&(i.duration=e)},this)},e.prototype.updateFromRelations=function(t,e,i){this.$items.forEach(function(n){0==n.type&&n.targetId==t&&(n.tween?(n.startValue.f1+=e,n.startValue.f2+=i,n.endValue.f1+=e,n.endValue.f2+=i):(n.value.f1+=e,n.value.f2+=i))},this)},e.prototype.internalPlay=function(t){var e=this;void 0===t&&(t=0),this.$ownerBaseX=this.$owner.x,this.$ownerBaseY=this.$owner.y,this.$totalTasks=0,this.$items.forEach(function(i){if(i.targetId?i.target=e.$owner.getChildById(i.targetId):i.target=e.$owner,null!=i.target){var n;e.disposeTween(i),i.tween?(n=e.$reversed?t+e.$maxTime-i.time-i.duration:t+i.time,n>0?(e.$totalTasks++,i.completed=!1,i.tweener=createjs.Tween.get(i.value).wait(1e3*n).call(e.$delayCall,[i],e)):e.startTween(i)):(n=e.$reversed?t+e.$maxTime-i.time:t+i.time,0>=n?e.applyValue(i,i.value):(e.$totalTasks++,i.completed=!1,i.tweener=createjs.Tween.get(i.value).wait(1e3*n).call(e.$delayCall2,[i],e)))}},this)},e.prototype.prepareValue=function(t,e,i){void 0===i&&(i=!1);var n,s;switch(i?(n=t.endValue,s=t.startValue):(n=t.startValue,s=t.endValue),t.type){case 0:case 1:0==t.type?t.target==this.$owner?(n.b1||(n.f1=0),n.b2||(n.f2=0)):(n.b1||(n.f1=t.target.x),n.b2||(n.f2=t.target.y)):(n.b1||(n.f1=t.target.width),n.b2||(n.f2=t.target.height)),t.value.f1=n.f1,t.value.f2=n.f2,s.b1||(s.f1=t.value.f1),s.b2||(s.f2=t.value.f2),t.value.b1=n.b1||s.b1,t.value.b2=n.b2||s.b2,e.f1=s.f1,e.f2=s.f2;break;case 2:case 13:t.value.f1=n.f1,t.value.f2=n.f2,e.f1=s.f1,e.f2=s.f2;break;case 4:t.value.f1=n.f1,e.f1=s.f1;break;case 5:t.value.i=n.i,e.i=s.i;break;case 12:t.value.f1=n.f1,t.value.f2=n.f2,t.value.f3=n.f3,t.value.f4=n.f4,e.f1=s.f1,e.f2=s.f2,e.f3=s.f3,e.f4=s.f4}},e.prototype.startTween=function(e){var i=new n;this.prepareValue(e,i,this.$reversed),this.applyValue(e,e.value);var s;0!=e.repeat?(e.tweenTimes=0,s=t.utils.Binder.create(this.$tweenRepeatComplete,this,e)):s=t.utils.Binder.create(this.$tweenComplete,this,e),this.$totalTasks++,e.completed=!1,this.prepareValue(e,i,this.$reversed),e.tweener=createjs.Tween.get(e.value,{onChange:t.utils.Binder.create(this.$tweenUpdate,this,e)}).to(i,1e3*e.duration,e.easeType).call(s),null!=e.hook&&e.hook.call(e.hookObj)},e.prototype.$delayCall=function(t){this.disposeTween(t),this.$totalTasks--,this.startTween(t)},e.prototype.$delayCall2=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.call(t.hookObj),this.checkAllComplete()},e.prototype.$tweenUpdate=function(t,e){this.applyValue(e,e.value)},e.prototype.$tweenComplete=function(t,e){this.disposeTween(e),this.$totalTasks--,e.completed=!0,null!=e.hook2&&e.hook2.call(e.hook2Obj),this.checkAllComplete()},e.prototype.$tweenRepeatComplete=function(e,i){if(i.tweenTimes++,-1==i.repeat||i.tweenTimes<i.repeat+1){var s=new n,r=void 0;r=i.yoyo?this.$reversed?i.tweenTimes%2==0:i.tweenTimes%2==1:this.$reversed,this.prepareValue(i,s,r),this.disposeTween(i),i.tweener=createjs.Tween.get(i.value,{onChange:t.utils.Binder.create(this.$tweenUpdate,this,i)}).to(s,1e3*i.duration,i.easeType).call(this.$tweenRepeatComplete,[null,i],this)}else this.$tweenComplete(null,i)},e.prototype.disposeTween=function(t){t&&t.tweener&&(t.tweener.setPaused(!0),t.tweener.removeAllEventListeners(),createjs.Tween.removeTweens(t.value),t.tweener=null)},e.prototype.$playTransComplete=function(t){this.disposeTween(t),this.$totalTasks--,t.completed=!0,this.checkAllComplete()},e.prototype.checkAllComplete=function(){var e=this;if(this.$playing&&0==this.$totalTasks)if(this.$totalTimes<0)t.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$totalTimes--,this.$totalTimes>0)t.GTimer.inst.callLater(this.internalPlay,this,0);else if(this.$playing=!1,this.$items.forEach(function(t){null!=t.target&&(0!=t.lockToken&&(t.target.releaseGearDisplay(t.lockToken),t.lockToken=0),t.filterCreated&&(t.filterCreated=!1,t.target.filters=null),e.disposeTween(t))}),null!=this.$onComplete){var i=this.$onComplete,n=this.$onCompleteParam,s=this.$onCompleteObj;this.$onComplete=null,this.$onCompleteParam=null,this.$onCompleteObj=null,n&&n.length?i.apply(s,n):i.call(s,n)}},e.prototype.applyValue=function(e,i){switch(e.target.$gearLocked=!0,e.type){case 0:if(e.target==this.$owner){var n=0,s=0;n=i.b1?i.f1+this.$ownerBaseX:e.target.x,s=i.b2?i.f2+this.$ownerBaseY:e.target.y,e.target.setXY(n,s)}else i.b1||(i.f1=e.target.x),i.b2||(i.f2=e.target.y),e.target.setXY(i.f1,i.f2);break;case 1:i.b1||(i.f1=e.target.width),i.b2||(i.f2=e.target.height),e.target.setSize(i.f1,i.f2);break;case 3:e.target.setPivot(i.f1,i.f2);break;case 4:e.target.alpha=i.f1;break;case 5:e.target.rotation=i.i;break;case 2:e.target.setScale(i.f1,i.f2);break;case 13:e.target.setSkew(i.f1,i.f2);break;case 6:t.isColorGear(e.target)&&(e.target.color=i.c);
break;case 7:t.isAnimationGear(e.target)&&(i.b1||(i.i=e.target.frame),e.target.frame=i.i,e.target.playing=i.b);break;case 8:e.target.visible=i.b;break;case 10:var r=e.target.getTransition(i.s);null!=r&&(0==i.i?r.stop(!1,!0):r.playing?r.$totalTimes=-1==i.i?Number.MAX_VALUE:i.i:(e.completed=!1,this.$totalTasks++,this.$reversed?r.playReverse(this.$playTransComplete,this,e,e.value.i):r.play(this.$playTransComplete,this,e,e.value.i)));break;case 9:break;case 11:e.startValue.f1=0,e.startValue.f2=0,e.startValue.f3=e.value.f2,t.GTimer.inst.add(1,0,e.$shake,e,[this]),this.$totalTasks++,e.completed=!1;break;case 12:e.target.updateColorComponents(i.f1,i.f2,i.f3,i.f4)}e.target.$gearLocked=!1},e.prototype.$shakeItem=function(e,i){var n=Math.ceil(e.value.f1*e.startValue.f3/e.value.f2),s=(2*Math.random()-1)*n,r=(2*Math.random()-1)*n;s=s>0?Math.ceil(s):Math.floor(s),r=r>0?Math.ceil(r):Math.floor(r),e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1+s,e.target.y-e.startValue.f2+r),e.target.$gearLocked=!1,e.startValue.f1=s,e.startValue.f2=r,e.startValue.f3-=i/1e3,e.startValue.f3<=0&&(e.target.$gearLocked=!0,e.target.setXY(e.target.x-e.startValue.f1,e.target.y-e.startValue.f2),e.target.$gearLocked=!1,e.completed=!0,this.$totalTasks--,t.GTimer.inst.remove(e.$shake,e),this.checkAllComplete())},e.prototype.setup=function(n){var s=this;this.name=n.attributes.name;var r=n.attributes.options;r&&(this.$options=parseInt(r)),this.$autoPlay="true"==n.attributes.autoPlay,this.$autoPlay&&(r=n.attributes.autoPlayRepeat,r&&(this.autoPlayRepeat=parseInt(r)),r=n.attributes.autoPlayDelay,r&&(this.autoPlayDelay=parseFloat(r)));var o=n.children;o.forEach(function(n){if("item"==n.nodeName){var o=new i;switch(s.$items.push(o),o.time=parseInt(n.attributes.time)/e.FRAME_RATE,o.targetId=n.attributes.target,r=n.attributes.type){case"XY":o.type=0;break;case"Size":o.type=1;break;case"Scale":o.type=2;break;case"Pivot":o.type=3;break;case"Alpha":o.type=4;break;case"Rotation":o.type=5;break;case"Color":o.type=6;break;case"Animation":o.type=7;break;case"Visible":o.type=8;break;case"Sound":o.type=9;break;case"Transition":o.type=10;break;case"Shake":o.type=11;break;case"ColorFilter":o.type=12;break;case"Skew":o.type=13;break;default:o.type=14}if(o.tween="true"==n.attributes.tween,o.label=n.attributes.label,o.tween){o.duration=parseInt(n.attributes.duration)/e.FRAME_RATE,o.time+o.duration>s.$maxTime&&(s.$maxTime=o.time+o.duration),r=n.attributes.ease,r&&(o.easeType=t.ParseEaseType(r)),r=n.attributes.repeat,r&&(o.repeat=parseInt(r)),o.yoyo="true"==n.attributes.yoyo,o.label2=n.attributes.label2;var h=n.attributes.endValue;h?(s.decodeValue(o.type,n.attributes.startValue,o.startValue),s.decodeValue(o.type,h,o.endValue)):(o.tween=!1,s.decodeValue(o.type,n.attributes.startValue,o.value))}else o.time>s.$maxTime&&(s.$maxTime=o.time),s.decodeValue(o.type,n.attributes.value,o.value)}},this)},e.prototype.decodeValue=function(e,i,n){var s;switch(e){case 0:case 1:case 3:case 13:s=i.split(","),"-"==s[0]?n.b1=!1:(n.f1=parseFloat(s[0]),n.b1=!0),"-"==s[1]?n.b2=!1:(n.f2=parseFloat(s[1]),n.b2=!0);break;case 4:n.f1=parseFloat(i);break;case 5:n.i=parseInt(i);break;case 2:s=i.split(","),n.f1=parseFloat(s[0]),n.f2=parseFloat(s[1]);break;case 6:n.c=t.utils.StringUtil.convertFromHtmlColor(i);break;case 7:s=i.split(","),"-"==s[0]?n.b1=!1:(n.i=parseInt(s[0]),n.b1=!0),n.b="p"==s[1];break;case 8:n.b="true"==i;break;case 9:if(s=i.split(","),n.s=s[0],s.length>1){var r=parseInt(s[1]);0==r||100==r?n.f1=1:n.f1=r/100}else n.f1=1;break;case 10:s=i.split(","),n.s=s[0],s.length>1?n.i=parseInt(s[1]):n.i=1;break;case 11:s=i.split(","),n.f1=parseFloat(s[0]),n.f2=parseFloat(s[1]);break;case 12:s=i.split(","),n.f1=parseFloat(s[0]),n.f2=parseFloat(s[1]),n.f3=parseFloat(s[2]),n.f4=parseFloat(s[3])}},e.OPTION_IGNORE_DISPLAY_CONTROLLER=1,e.OPTION_AUTO_STOP_DISABLED=0,e.OPTION_AUTO_STOP_AT_END=0,e.FRAME_RATE=24,e}();t.Transition=e;var i=function(){function e(){this.time=0,this.type=0,this.duration=0,this.repeat=0,this.yoyo=!1,this.tween=!1,this.tweenTimes=0,this.completed=!1,this.lockToken=0,this.easeType=t.ParseEaseType("Quad.Out"),this.value=new n,this.startValue=new n,this.endValue=new n}return e.prototype.$shake=function(t,e){t.$shakeItem(this,e)},e}(),n=function(){function t(){this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.i=0,this.c=0,this.b=!1,this.b1=!0,this.b2=!0}return t}()}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$requestingCmd=0,i.focusable=!0,i.$uiSources=[],i.bringToFrontOnClick=t.UIConfig.bringWindowToFrontOnClick,i.on("added",i.$onShown,i),i.on("removed",i.$onHidden,i),i.on(t.InteractiveEvents.Down,i.$mouseDown,i),i}return __extends(i,e),i.prototype.addUISource=function(t){this.$uiSources.push(t)},Object.defineProperty(i.prototype,"contentPane",{get:function(){return this.$contentPane},set:function(t){this.$contentPane!=t&&(null!=this.$contentPane&&this.removeChild(this.$contentPane),this.$contentPane=t,null!=this.$contentPane&&(this.addChild(this.$contentPane),this.setSize(this.$contentPane.width,this.$contentPane.height),this.$contentPane.addRelation(this,24),this.$frame=this.$contentPane.getChild("frame"),null!=this.$frame&&(this.closeButton=this.$frame.getChild("closeButton"),this.dragArea=this.$frame.getChild("dragArea"),this.contentArea=this.$frame.getChild("contentArea"))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this.$frame},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"closeButton",{get:function(){return this.$closeButton},set:function(t){null!=this.$closeButton&&this.$closeButton.removeClick(this.closeEventHandler,this),this.$closeButton=t,null!=this.$closeButton&&this.$closeButton.click(this.closeEventHandler,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragArea",{get:function(){return this.$dragArea},set:function(e){this.$dragArea!=e&&(null!=this.$dragArea&&(this.$dragArea.draggable=!1,this.$dragArea.off("__dragStart",this.$dragStart,this)),this.$dragArea=e,null!=this.$dragArea&&(this.$dragArea instanceof t.GGraph&&this.$dragArea.drawRect(0,0,0,0,0),this.$dragArea.draggable=!0,this.$dragArea.on("__dragStart",this.$dragStart,this)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentArea",{get:function(){return this.$contentArea},set:function(t){this.$contentArea=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){t.GRoot.inst.showWindow(this)},i.prototype.showOn=function(t){t.showWindow(this)},i.prototype.hide=function(){this.isShowing&&this.doHideAnimation()},i.prototype.hideImmediately=function(){var e=this.parent&&this.parent instanceof t.GRoot?this.parent:t.GRoot.inst;e.hideWindowImmediately(this)},i.prototype.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round(.5*(t.width-this.width)),Math.round(.5*(t.height-this.height))),e&&(this.addRelation(t,3),this.addRelation(t,10))},i.prototype.toggleVisible=function(){this.isTop?this.hide():this.show()},Object.defineProperty(i.prototype,"isShowing",{get:function(){return null!=this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"modal",{get:function(){return this.$modal},set:function(t){this.$modal=t},enumerable:!0,configurable:!0}),i.prototype.bringToFront=function(){this.root.bringToFront(this)},i.prototype.showModalWait=function(e,i){void 0===i&&(i=0),0!=i&&(this.$requestingCmd=i),t.UIConfig.windowModalWaiting&&(this.$modalWaitPane||(this.$modalWaitPane=t.UIPackage.createObjectFromURL(t.UIConfig.windowModalWaiting)),this.layoutModalWaitPane(e),this.addChild(this.$modalWaitPane))},i.prototype.layoutModalWaitPane=function(t){if(null!=this.$contentArea){var e=this.$frame.localToGlobal();e=this.globalToLocal(e.x,e.y,e),this.$modalWaitPane.setXY(e.x+this.$contentArea.x,e.y+this.$contentArea.y),this.$modalWaitPane.setSize(this.$contentArea.width,this.$contentArea.height),t&&t.length&&(this.$modalWaitPane.text=t)}else this.$modalWaitPane.setSize(this.width,this.height)},i.prototype.closeModalWait=function(t){return void 0===t&&(t=0),0!=t&&this.$requestingCmd!=t?!1:(this.$requestingCmd=0,this.$modalWaitPane&&null!=this.$modalWaitPane.parent&&this.removeChild(this.$modalWaitPane),!0)},Object.defineProperty(i.prototype,"modalWaiting",{get:function(){return this.$modalWaitPane&&null!=this.$modalWaitPane.parent},enumerable:!0,configurable:!0}),i.prototype.init=function(){var t=this;this.$inited||this.$loading||(this.$uiSources.length>0?(this.$loading=!1,this.$uiSources.forEach(function(e){e.loaded||(e.load(t.$uiLoadComplete,t),t.$loading=!0)},this),this.$loading||this.$init()):this.$init())},i.prototype.onInit=function(){},i.prototype.onShown=function(){},i.prototype.onHide=function(){},i.prototype.doShowAnimation=function(){this.onShown()},i.prototype.doHideAnimation=function(){this.hideImmediately()},i.prototype.$uiLoadComplete=function(){for(var t=this.$uiSources.length,e=0;t>e;e++)if(!this.$uiSources[e].loaded)return;this.$loading=!1,this.$init()},i.prototype.$init=function(){this.$inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.prototype.dispose=function(){this.off("added",this.$onShown,this),this.off("removed",this.$onHidden,this),this.off(t.InteractiveEvents.Down,this.$mouseDown,this),this.$dragArea&&this.$dragArea.off("__dragStart",this.$dragStart,this),null!=this.parent&&this.hideImmediately(),this.$modalWaitPane&&this.$modalWaitPane.dispose(),this.$contentPane&&this.$contentPane.dispose(),e.prototype.dispose.call(this)},i.prototype.closeEventHandler=function(t){this.hide()},i.prototype.$onShown=function(t){this.$inited?this.doShowAnimation():this.init()},i.prototype.$onHidden=function(t){this.closeModalWait(),this.onHide()},i.prototype.$mouseDown=function(t){this.isShowing&&this.bringToFrontOnClick&&this.bringToFront()},i.prototype.$dragStart=function(e){t.GObject.castFromNativeObject(e.currentTarget).stopDrag(),this.startDrag(e.data.pointerID)},i}(t.GComponent);t.Window=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){}return t.defaultFont="Arial",t.modalLayerColor=3355443,t.modalLayerAlpha=.2,t.defaultScrollSpeed=25,t.defaultTouchScrollSpeedRatio=1,t.defaultScrollBarDisplay=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.bringWindowToFrontOnClick=!0,t}();t.UIConfig=e}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function e(){}return e.create=function(e){switch(e){case"play_transition":return new t.PlayTransitionAction;case"change_page":return new t.ChangePageAction}return null},e.prototype.execute=function(t,e,i){this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},e.prototype.enter=function(t){},e.prototype.leave=function(t){},e.prototype.setup=function(t){var e;e=t.attributes.fromPage,e&&(this.fromPage=e.split(",")),e=t.attributes.toPage,e&&(this.toPage=e.split(","))},e}();t.Action=e}(e=t.controller||(t.controller={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.enter=function(t){if(this.controllerName){var e;if(e=this.objectId?t.parent.getChildById(this.objectId):t.parent){var i=e.getController(this.controllerName);i&&i!=t&&!i.$updating&&(i.selectedPageId=this.targetPage)}}},e.prototype.setup=function(e){t.prototype.setup.call(this,e),this.objectId=e.attributes.objectId,this.controllerName=e.attributes.controller,this.targetPage=e.attributes.targetPage},e}(t.Action);t.ChangePageAction=e}(e=t.controller||(t.controller={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$selectedIndex=0,t.$previousIndex=0,t.$pageIds=[],t.$pageNames=[],t.$selectedIndex=-1,t.$previousIndex=-1,t}return __extends(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this.$name},set:function(t){this.$name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$selectedIndex},set:function(t){if(this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.emit("__stateChanged",this),this.$updating=!1}},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(t){if(void 0===t&&(t=0),this.$selectedIndex!=t){if(t>this.$pageIds.length-1)throw new Error("index out of range: "+t);this.$updating=!0,this.$previousIndex=this.$selectedIndex,this.$selectedIndex=t,this.$parent.applyController(this),this.$updating=!1}},Object.defineProperty(i.prototype,"previsousIndex",{get:function(){return this.$previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedPage",{get:function(){return-1==this.$selectedIndex?null:this.$pageNames[this.$selectedIndex]},set:function(t){this.selectedIndex=Math.max(0,this.$pageNames.indexOf(t))},enumerable:!0,configurable:!0}),i.prototype.setSelectedPage=function(t){this.setSelectedIndex(Math.max(0,this.$pageNames.indexOf(t)))},Object.defineProperty(i.prototype,"previousPage",{get:function(){return-1==this.$previousIndex?null:this.$pageNames[this.$previousIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this.$pageIds.length},enumerable:!0,configurable:!0}),i.prototype.getPageName=function(t){return void 0===t&&(t=0),this.$pageNames[t]},i.prototype.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this.$pageIds.length)},i.prototype.addPageAt=function(t,e){void 0===e&&(e=0);var n=""+i.$nextPageId++;e==this.$pageIds.length?(this.$pageIds.push(n),this.$pageNames.push(t)):(this.$pageIds.splice(e,0,n),this.$pageNames.splice(e,0,t))},i.prototype.removePage=function(t){var e=this.$pageNames.indexOf(t);-1!=e&&(this.$pageIds.splice(e,1),this.$pageNames.splice(e,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this))},i.prototype.removePageAt=function(t){void 0===t&&(t=0),this.$pageIds.splice(t,1),this.$pageNames.splice(t,1),this.$selectedIndex>=this.$pageIds.length?this.selectedIndex=this.$selectedIndex-1:this.$parent.applyController(this)},i.prototype.clearPages=function(){this.$pageIds.length=0,this.$pageNames.length=0,-1!=this.$selectedIndex?this.selectedIndex=-1:this.$parent.applyController(this)},i.prototype.hasPage=function(t){return this.$pageNames.indexOf(t)>=0},i.prototype.getPageIndexById=function(t){return this.$pageIds.indexOf(t)},i.prototype.getPageIdByName=function(t){var e=this.$pageNames.indexOf(t);return-1!=e?this.$pageIds[e]:null},i.prototype.getPageNameById=function(t){var e=this.$pageIds.indexOf(t);return-1!=e?this.$pageNames[e]:null},i.prototype.getPageId=function(t){return void 0===t&&(t=0),this.$pageIds[t]},Object.defineProperty(i.prototype,"selectedPageId",{get:function(){return-1==this.$selectedIndex?null:this.$pageIds[this.$selectedIndex]},set:function(t){this.selectedIndex=this.$pageIds.indexOf(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"oppositePageId",{set:function(t){var e=this.$pageIds.indexOf(t);e>0?this.selectedIndex=0:this.$pageIds.length>1&&(this.selectedIndex=1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"previousPageId",{get:function(){return-1==this.$previousIndex?null:this.$pageIds[this.$previousIndex]},enumerable:!0,configurable:!0}),i.prototype.executeActions=function(){var t=this;this.$actions&&this.$actions.length>0&&this.$actions.forEach(function(e){e.execute(t,t.previousPageId,t.selectedPageId)})},i.prototype.setup=function(e){var i=this;this.$name=e.attributes.name,this.$autoRadioGroupDepth="true"==e.attributes.autoRadioGroupDepth;var n=e.attributes.pages;if(n)for(var s=n.split(","),r=s.length,o=0;r>o;o+=2)this.$pageIds.push(s[o]),this.$pageNames.push(s[o+1]);var h=e.children;if(h.length>0&&(this.$actions=this.$actions||[],h.forEach(function(e){var n=t.Action.create(e.attributes.type);n.setup(e),i.$actions.push(n)})),n=e.attributes.transitions){this.$actions=this.$actions||[];var a,l;n.split(",").forEach(function(e){if(e&&e.length){var n=new t.PlayTransitionAction;a=e.indexOf("="),n.transitionName=e.substr(a+1),e=e.substring(0,a),a=e.indexOf("-"),l=parseInt(e.substring(a+1)),l<i.$pageIds.length&&(n.toPage=[i.$pageIds[l]]),e=e.substring(0,a),"*"!=e&&(l=parseInt(e),l<i.$pageIds.length&&(n.fromPage=[i.$pageIds[l]])),n.stopOnExit=!0,i.$actions.push(n)}})}this.$parent&&this.$pageIds.length>0?this.$selectedIndex=0:this.$selectedIndex=-1},i.$nextPageId=0,i}(PIXI.utils.EventEmitter);t.Controller=e}(e=t.controller||(t.controller={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){}return Object.defineProperty(t.prototype,"controller",{set:function(t){this.$controller=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.$id?this.$controller.getPageNameById(this.$id):null},set:function(t){this.$id=this.$controller.getPageIdByName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.$id?this.$controller.getPageIndexById(this.$id):-1},set:function(t){this.$id=this.$controller.getPageId(t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.$id=null},Object.defineProperty(t.prototype,"id",{get:function(){return this.$id},set:function(t){this.$id=t},enumerable:!0,configurable:!0}),t}();t.PageOption=e}(e=t.controller||(t.controller={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=1,e.delay=0,e.stopOnExit=!1,e}return __extends(e,t),e.prototype.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this.$currentTransition&&this.$currentTransition.playing?e.changeRepeat(this.repeat):e.play({times:this.repeat,delay:this.delay}),this.$currentTransition=e)},e.prototype.leave=function(t){this.stopOnExit&&this.$currentTransition&&(this.$currentTransition.stop(),this.$currentTransition=null)},e.prototype.setup=function(e){t.prototype.setup.call(this,e),this.transitionName=e.attributes.transition;var i;i=e.attributes.repeat,i&&(this.repeat=parseInt(i)),i=e.attributes.delay,i&&(this.delay=parseFloat(i)),this.stopOnExit="true"==e.attributes.stopOnExit},e}(t.Action);t.PlayTransitionAction=e}(e=t.controller||(t.controller={}))}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.size=0,this.glyphs={}}return t}();t.BitmapFont=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0}return t}();t.BMGlyph=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._fillDir=0,i._flip=0,i._percent=0,i}return __extends(e,t),Object.defineProperty(e.prototype,"flip",{get:function(){return this._flip},set:function(t){t!=this._flip&&(this._flip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillAmount",{get:function(){return"number"==typeof this._fillAmount?this._fillAmount:100},set:function(t){t!=this._fillAmount&&(this._fillAmount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillBegin",{get:function(){return this._fillBegin},set:function(t){t!=this._fillBegin&&(this._fillBegin=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){t!=this._fillMode&&(this._fillMode=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillDirection",{get:function(){return this._fillDir},set:function(t){t!=this._fillDir&&(this._fillDir=t,this.checkAndFixFillBegin())},enumerable:!0,configurable:!0}),e.prototype.checkAndFixFillBegin=function(){switch(this._fillMode){case 1:0!=this._fillBegin&&1!=this._fillBegin&&(this._fillBegin=0);break;case 2:2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2);break;case 3:4!=this._fillBegin&&6!=this._fillBegin&&5!=this._fillBegin&&7!=this._fillBegin&&(this._fillBegin=4);break;case 4:case 5:0!=this._fillBegin&&1!=this._fillBegin&&2!=this._fillBegin&&3!=this._fillBegin&&(this._fillBegin=2)}},Object.defineProperty(e.prototype,"amount",{get:function(){return this._percent},set:function(t){this._percent=t},enumerable:!0,configurable:!0}),e}(PIXI.Sprite);t.FillSprite=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.addDelay=0}return t}();t.Frame=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(){this.$requestToShow=!1,this.$scaleX=1,this.$scaleY=1}return Object.defineProperty(e,"inst",{get:function(){return e.$instance||(e.$instance=new e),e.$instance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,i){this.$canvas=i;var n;this.$delegateDiv||(n=document.createElement("div"),this.$delegateDiv=n,n.id="__delegateDiv",e.appendChild(n),this.initDomPos(n),this.$wrapper=document.createElement("div"),this.initDomPos(this.$wrapper),this.$wrapper.style.width="0px",this.$wrapper.style.height="0px",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.setTransform(this.$wrapper,"0% 0% 0px"),n.appendChild(this.$wrapper),t.GRoot.inst.on(t.InteractiveEvents.Click,this.canvasClickHandler,this),this.initInputElement(!0),this.initInputElement(!1))},e.prototype.isInputOn=function(){return null!=this.$input},e.prototype.canvasClickHandler=function(t){this.$requestToShow?(this.$requestToShow=!1,this.$input.onClickHandler(t),this.show()):this.$curEle&&(this.clearInputElement(),this.$curEle.blur(),this.$curEle=null)},e.prototype.isInputShown=function(){return null!=this.$input},e.prototype.isCurrentInput=function(t){return this.$input==t},e.prototype.initDomPos=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},e.prototype.setTransform=function(t,e,i){var n=t.style;n.transformOrigin=n.webkitTransformOrigin=n.msTransformOrigin=n.mozTransformOrigin=n.oTransformOrigin=e,i&&i.length>0&&(n.transform=n.webkitTransform=n.msTransform=n.mozTransform=n.oTransform=i)},e.prototype.$updateSize=function(t,e){if(this.$canvas){this.$scaleX=t,this.$scaleY=e,this.$delegateDiv.style.left=this.$canvas.style.left,this.$delegateDiv.style.top=this.$canvas.style.top;var i=this.$canvas.style;this.setTransform(this.$delegateDiv,"0% 0% 0px",i.transform||i.webkitTransform||i.msTransform||i.mozTransform||i.oTransform)}},e.prototype.initInputElement=function(t){var e,i=this;t?(e=document.createElement("textarea"),e.style.resize="none",this.$multiLine=e,e.id="stageTextAreaEle"):(e=document.createElement("input"),this.$singleLine=e,e.type="text",e.id="stageInputEle"),this.$wrapper.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",this.initDomPos(e);var n=e.style;n.outline="thin",n.background="none",n.overflow="hidden",n.wordBreak="break-all",n.opacity=0,e.oninput=function(t){i.$input&&i.$input.onInputHandler()}},e.prototype.show=function(){var e=this;t.GTimer.inst.callLater(function(){e.$curEle.style.opacity="1"},this)},e.prototype.disconnect=function(t){null!=this.$input&&this.$input!=t||(this.clearInputElement(),this.$curEle&&this.$curEle.blur())},e.prototype.clearAttributes=function(t){if(this.$curEle)for(var e in t)this.$curEle.removeAttribute(e)},e.prototype.clearInputElement=function(){if(this.$curEle){this.$curEle.value="",this.$curEle.onblur=null;var t=this.$curEle.style;t.width="1px",t.height="12px",t.left="0px",t.top="0px",t.opacity="0";var i=void 0;i=this.$singleLine==this.$curEle?this.$multiLine:this.$singleLine,i.style.display="block",this.$wrapper.style.left="0px",this.$wrapper.style.top="-100px",this.$wrapper.style.height="0px",this.$wrapper.style.width="0px"}this.$input&&(this.$input.onDisconnect(),this.$input=null,e.isTyping=!1)},e.prototype.requestInput=function(t){this.clearInputElement(),this.$input=t,e.isTyping=!0;var i;return this.$input.textField.multipleLine?(this.$curEle=this.$multiLine,i=this.$singleLine):(this.$curEle=this.$singleLine,i=this.$multiLine),i.style.display="none",this.$curEle},e.isTyping=!1,e}();t.HTMLInput=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.$requestToShow=!1,i.inputElement=null,i.inputDiv=null,i.$scaleX=0,i.$scaleY=0,i.textValue="",i.colorValue=16777215,i.$attrsCache={},i.$textfield=t,i}return __extends(i,e),i.prototype.$addToStage=function(){this.htmlInput=t.HTMLInput.inst},i.prototype.initElement=function(){var t=this.$textfield.localToGlobal(0,0),e=t.x,i=t.y,n=this.htmlInput.$scaleX,s=this.htmlInput.$scaleY;this.$textfield.multipleLine||(this.inputElement.style.top=-this.$textfield.leading*s+"px"),this.inputDiv.style.top=(i+1)*s+"px",this.inputDiv.style.left=e*n+"px";for(var r=this.$textfield,o=1,h=1,a=0;r.parent;)o*=r.scaleX,h*=r.scaleY,a+=r.rotation,r=r.parent;var l=this.inputDiv.style;l.transform=l.webkitTransform=l.msTransform=l.mozTransform=l.oTransform="rotate("+a+"deg)",this.$scaleX=n*o,this.$scaleY=s*h},Object.defineProperty(i.prototype,"textField",{get:function(){return this.$textfield},enumerable:!0,configurable:!0}),i.prototype.$show=function(){if(this.htmlInput.isCurrentInput(this))this.inputElement.onblur=null;else{this.inputElement=this.htmlInput.requestInput(this),this.$textfield.multipleLine||(this.inputElement.type=this.$textfield.type);for(var t in this.$attrsCache)this.inputElement.setAttribute(t,this.$attrsCache[t]);this.inputDiv=this.htmlInput.$wrapper}this.htmlInput.$requestToShow=!0,this.$requestToShow=!0,this.initElement()},i.prototype.onBlurHandler=function(){this.htmlInput.clearInputElement(),this.htmlInput.clearAttributes(this.$attrsCache),window.scrollTo(0,0)},i.prototype.$hide=function(){},Object.defineProperty(i.prototype,"text",{get:function(){return this.textValue||(this.textValue=""),this.textValue},set:function(t){this.textValue=t,this.inputElement&&(this.inputElement.value=this.textValue)},enumerable:!0,configurable:!0}),i.prototype.setColor=function(e){this.colorValue=e,this.inputElement&&this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(this.colorValue))},i.prototype.$onBlur=function(){},i.prototype.onInputHandler=function(){var t=this;window.setTimeout(function(){t.inputElement&&t.inputElement.selectionStart==t.inputElement.selectionEnd&&(t.textValue=t.inputElement.value,t.emit("updateText"))},0)},i.prototype.setAreaHeight=function(){var t=this.$textfield;if(t.multipleLine){var e=t.textHeight;if(t.height<=t.fontSize)this.setElementStyle("height",t.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else if(t.height<e)this.setElementStyle("height",t.height*this.$scaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px");else{this.setElementStyle("height",(e+t.leading)*this.$scaleY+"px");var i=(t.height-e)*this.$scaleY,n=this.getVAlignFactor(t),s=i*n,r=i-s;this.setElementStyle("padding",s+"px 0px "+r+"px 0px"),this.setElementStyle("lineHeight",t.lineHeight*this.$scaleY+"px")}}},i.prototype.getVAlignFactor=function(t){var e=0;switch(t.verticalAlign){case 0:break;case 1:e=.5;break;case 2:e=1}return e},i.prototype.onClickHandler=function(e){this.$requestToShow&&(this.$requestToShow=!1,this.inputElement.value=this.text,null==this.inputElement.onblur&&(this.inputElement.onblur=t.utils.Binder.create(this.onBlurHandler,this)),this.resetInput(),this.$textfield.maxLength>0?this.inputElement.setAttribute("maxlength",String(this.$textfield.maxLength)):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus(),this.emit("__focusChanged","focus",this.inputElement))},i.prototype.onDisconnect=function(){this.inputElement=null,this.emit("__focusChanged","blur",this.inputElement)},i.prototype.setElementStyle=function(t,e){if(null!=e&&this.inputElement){var i=this.inputElement.style;i[t]=e}},i.prototype.setAttribute=function(t,e){null!=t&&null!=e&&(this.$attrsCache[t]=e)},i.prototype.getAttribute=function(t){return this.$attrsCache[t]},i.prototype.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnect(this)},i.prototype.resetInput=function(){if(this.inputElement){var e=this.$textfield;this.setElementStyle("fontFamily",e.font),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.align),this.setElementStyle("fontSize",e.fontSize*this.$scaleY+"px"),this.setElementStyle("color",t.utils.StringUtil.convertToHtmlColor(e.color)),this.setElementStyle("width",e.width*this.$scaleX+"px");var i="middle",n=0;switch(e.verticalAlign){case 0:i="top";break;case 1:i="middle",n=.5;break;case 2:i="bottom",n=1}if(this.setElementStyle("verticalAlign",i),e.multipleLine)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.lineHeight*this.$scaleY+"px"),e.height<e.fontSize)this.setElementStyle("height",e.fontSize*this.$scaleY+"px"),this.setElementStyle("padding","0px 0px "+.5*e.fontSize*this.$scaleX+"px 0px");else{this.setElementStyle("height",e.fontSize*this.$scaleY+"px");var s=(e.height-e.fontSize)*this.$scaleY,r=s*n,o=s-r,h=.5*e.fontSize*this.$scaleY;h>o&&(o=h),this.setElementStyle("padding",r+"px 0px "+o+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this.$scaleX+"px "+e.height*this.$scaleY+"px 0px)",this.inputDiv.style.height=e.height*this.$scaleY+"px",this.inputDiv.style.width=e.width*this.$scaleX+"px"}},i}(PIXI.utils.EventEmitter);t.InputElement=e}(fgui||(fgui={}));var fgui;!function(t){t.isUIObject=function(t){return t&&"UIOwner"in t&&null!=t.UIOwner}}(fgui||(fgui={}));var fgui;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;return n.interval=0,n.repeatDelay=0,n.$frameCount=0,n.$currentFrame=0,n.$status=0,n.UIOwner=i,n.data=new t.MovieClipData,n.$playing=!0,n.interactive=n.interactiveChildren=!1,n.$settings=new t.DefaultMovieClipSettings,n.on("added",n.added,n),n.on("removed",n.removed,n),n}return __extends(i,e),Object.defineProperty(i.prototype,"frames",{get:function(){return this.$frames},set:function(t){this.$frames=t,null!=this.$frames?this.$frameCount=this.$frames.length:this.$frameCount=0,(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),(-1==this.$settings.loopEndAt||this.$settings.loopEndAt>this.$frameCount-1)&&(this.$settings.loopEndAt=this.$frameCount-1),(this.$currentFrame<0||this.$currentFrame>this.$frameCount-1)&&(this.$currentFrame=this.$frameCount-1),this.$frameCount>0?this.setFrame(this.$frames[this.$currentFrame]):this.setFrame(null),this.data.rewind()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameCount",{get:function(){return this.$frameCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsRect",{get:function(){return this._boundsRect},set:function(t){this._boundsRect=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){return this.$currentFrame},set:function(t){this.$currentFrame!=t&&(this.$currentFrame=t,
this.data.currentFrame=t,this.setFrame(this.$currentFrame<this.$frameCount?this.$frames[this.$currentFrame]:null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this.$playing},set:function(e){this.$playing=e,e&&t.GObject.isDisplayObjectOnStage(this)?t.GTimer.inst.add(0,0,this.update,this):t.GTimer.inst.remove(this.update,this)},enumerable:!0,configurable:!0}),i.prototype.setPlaySettings=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(1==e.length&&"object"==typeof e[0])this.$settings.mix(e[0]);else{var n=e[0],s=e[1],r=e[2],o=e[3],h=e[4],a=e[5],l={};t.utils.NumberUtil.isNumber(n)&&(l.startFrame=n),t.utils.NumberUtil.isNumber(s)&&(l.endFrame=s),t.utils.NumberUtil.isNumber(r)&&(l.repeatCount=r),t.utils.NumberUtil.isNumber(o)&&(l.loopEndAt=o),h&&"function"==typeof h&&(l.endCallback=h),a&&(l.endCallbackContext=a),this.$settings.mix(l)}(-1==this.$settings.endFrame||this.$settings.endFrame>this.$frameCount-1)&&(this.$settings.endFrame=this.$frameCount-1),-1==this.$settings.loopEndAt&&(this.$settings.loopEndAt=this.$settings.endFrame),this.$status=0,this.currentFrame=this.$settings.startFrame},i.prototype.update=function(){this.UIOwner.$inProgressBuilding||this.$playing&&0!=this.$frameCount&&3!=this.$status&&(this.data.update(this),this.$currentFrame!=this.data.currentFrame&&(1==this.$status?(this.$currentFrame=this.$settings.startFrame,this.data.currentFrame=this.$currentFrame,this.$status=0):2==this.$status?(this.$currentFrame=this.$settings.loopEndAt,this.data.currentFrame=this.$currentFrame,this.$status=3,null!=this.$settings.endCallback&&t.GTimer.inst.callLater(this.$playEnd,this)):(this.$currentFrame=this.data.currentFrame,this.$currentFrame==this.$settings.endFrame&&this.$settings.repeatCount>0&&(this.$settings.repeatCount--,0==this.$settings.repeatCount?this.$status=2:this.$status=1)),this.setFrame(this.$frames[this.$currentFrame])))},i.prototype.$playEnd=function(){if(null!=this.$settings.endCallback){var t=this.$settings.endCallback,e=this.$settings.endCallbackContext;this.$settings.endCallback=this.$settings.endCallbackContext=null,this.$settings.endCallbackContext=null,t&&t.call(e,this)}},i.prototype.setFrame=function(t){this._texture=null==t?null:t.texture,this._textureID=-1},i.prototype.added=function(e){this.$playing&&t.GTimer.inst.add(0,0,this.update,this)},i.prototype.removed=function(e){this.$playing&&t.GTimer.inst.remove(this.update,this)},i.prototype.destroy=function(){t.GTimer.inst.remove(this.update,this),this.off("added",this.added,this),this.off("removed",this.removed,this),e.prototype.destroy.call(this)},i}(PIXI.Sprite);t.MovieClip=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.repeatedCount=0,this.$curFrame=0,this.$lastTime=0,this.$curFrameDelay=0,this.$lastTime=Date.now()}return t.prototype.update=function(t){var e=Date.now(),i=e-this.$lastTime;this.$lastTime=e;var n=this.$curFrame;n>=t.frameCount&&(n=t.frameCount-1),this.reachesEnd=!1,this.$curFrameDelay+=i;var s=t.interval+t.frames[n].addDelay+(0==n&&this.repeatedCount>0?t.repeatDelay:0);this.$curFrameDelay<s||(this.$curFrameDelay-=s,this.$curFrameDelay>t.interval&&(this.$curFrameDelay=t.interval),t.swing?this.reversed?(this.$curFrame--,this.$curFrame<0&&(this.$curFrame=Math.min(1,t.frameCount-1),this.repeatedCount++,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachesEnd=!0,this.reversed=!this.reversed)):(this.$curFrame++,this.$curFrame>t.frameCount-1&&(this.$curFrame=0,this.repeatedCount++,this.reachesEnd=!0)))},Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this.$curFrame},set:function(t){this.$curFrame=t,this.$curFrameDelay=0},enumerable:!0,configurable:!0}),t.prototype.rewind=function(){this.$curFrame=0,this.$curFrameDelay=0,this.reversed=!1,this.reachesEnd=!1},t.prototype.reset=function(){this.$curFrame=0,this.$curFrameDelay=0,this.repeatedCount=0,this.reachesEnd=!1,this.reversed=!1},t.prototype.copy=function(t){this.$curFrame=t.$curFrame,this.$curFrameDelay=t.$curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachesEnd=t.reachesEnd,this.reversed=t.reversed},t}();t.MovieClipData=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.startFrame=0,this.endFrame=-1,this.repeatCount=0,this.loopEndAt=-1,this.endCallback=null,this.endCallbackContext=null}return t.prototype.mix=function(t){var e=this;for(var i in t)"mix"!=i&&(e[i]=t[i]);return this},t}();t.DefaultMovieClipSettings=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!0,i.interactiveChildren=!0,i}return __extends(e,t),Object.defineProperty(e.prototype,"scrollRect",{get:function(){return this.$scrollRect},set:function(t){this.$scrollRect=t,null!=t?(this.$rectMask||(this.$rectMask=new PIXI.Graphics,this.$rectMask.isMask=!0,this.addChild(this.$rectMask),this.mask=this.$rectMask),this.$rectMask.clear(),t.width>0&&t.height>0&&(this.$rectMask.beginFill(0,1),this.$rectMask.drawRect(this.$scrollRect.x,this.$scrollRect.y,this.$scrollRect.width,this.$scrollRect.height),this.$rectMask.endFill())):this.mask=null},enumerable:!0,configurable:!0}),e}(PIXI.Container);t.UIContainer=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=i.interactiveChildren=!1,i}return __extends(e,t),e.prototype.$initDisp=function(t){if(!this.$disp){if(t)if(t.load(),t.scaleByTile){var e=new PIXI.extras.TilingSprite(t.texture);this.$disp=e}else t.scale9Grid?(this.$disp=new PIXI.mesh.NineSlicePlane(t.texture),this.scale9Grid=t.scale9Grid,this.tiledSlices=t.tiledSlices):this.$disp=new PIXI.Sprite(t.texture);else this.$disp=new PIXI.Sprite;this.addChild(this.$disp)}},Object.defineProperty(e.prototype,"tint",{get:function(){return this.$disp.tint},set:function(t){this.$disp.tint=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.$disp.height},set:function(t){this.$disp.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.$disp.width},set:function(t){this.$disp.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.$disp.texture},set:function(t){this.$disp.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale9Grid",{get:function(){return this.$disp instanceof PIXI.mesh.NineSlicePlane?this.$scale9Rect:null},set:function(t){this.$disp instanceof PIXI.mesh.NineSlicePlane&&(this.$scale9Rect=t,this.$disp.leftWidth=t.x,this.$disp.topHeight=t.y,this.$disp.rightWidth=Math.max(0,this.$disp.width-t.width-t.x),this.$disp.bottomHeight=Math.max(0,this.$disp.height-t.height-t.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiledSlices",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(e){this.$scale9Rect=null,this.$disp&&(this.$disp.destroy(e),this.$disp=null),t.prototype.destroy.call(this,e)},e}(PIXI.Container);t.UIImage=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.UIOwner=e,i.interactive=!1,i.interactiveChildren=!1,i}return __extends(e,t),e}(PIXI.Graphics);t.UISprite=e}(fgui||(fgui={}));var fgui;!function(t){function e(){var t=!!window.navigator.userAgent.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/);o=NaN,r.forEach(function(e){t&&(e.offsetY=(document.body.clientHeight||document.documentElement.clientHeight)-window.innerHeight),e.$updateScreenSize()})}var i=function(){function t(){this.scaleMode="showAll",this.orientation="auto",this.resolution=1,this.designWidth=800,this.designHeight=600,this.alignV=4,this.alignH=1,this.fallbackWidth=0,this.fallbackHeight=0}return t}();t.DefaultUIStageOptions=i;var n=function(){function t(){}return t.prototype.getRect=function(t,e,i){var n=t.parentElement;if(!n)throw new Error("Your view of PIXI are still in memory but not appended to DOM yet? it's necessary that there is a parent element to wrap your view up.");var s=n.getBoundingClientRect(),r={x:0,y:0,width:0,height:0};return!s||s.width<=0||s.height<=0?(console.warn("It seems that you did not set a explicit size for the parent element of your view, now fall back to window size instead."),r.width=window.innerWidth,r.height=window.innerHeight,r.x=0,r.y=0):(r.x=s.left,r.y=s.top,r.width=s.width,r.height=s.height),(r.width<=0||r.height<=0)&&(console.warn("fetch container size to initialize PIXI in all ways have failed, now use default size (fallbackWidth / fallbackHeight) specified in the options instead."),r.width=e,r.height=i),r},t}(),s=function(e){function s(s,o){var h=e.call(this)||this;h.$width=0,h.$height=0,h.$scaleX=1,h.$scaleY=1,h.$canvasMatrix=new PIXI.Matrix,h.offsetX=0,h.offsetY=0,h.$sizeCalcer=new n,r.push(h),h.$appContext=s,h.$appContext.renderer.autoResize=!1,h.$appStage=s.stage,h.$appStage.interactive=!0;var a;if(o instanceof i)a=o;else if(a=new i,null!=o)for(var l in o)a[l]=o[l];if(!a.designWidth||!a.designHeight)throw new Error("Invalid designWidth / designHeight in the parameter 'stageOptions'.");h.$options=a;var c=h.$appContext.view.parentElement;"DIV"!=c.tagName&&(c=document.createElement("DIV"),h.$appContext.view.parentElement.appendChild(c));var u=c.style;return u.position="relative",u.left=u.top="0px",u.width=u.height="100%",u.overflow="hidden",h.$appContext.view.style.position="absolute",t.HTMLInput.inst.initialize(c,h.$appContext.view),h.$updateScreenSize(),h}return __extends(s,e),Object.defineProperty(s.prototype,"orientation",{get:function(){return this.$options.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"stageWidth",{get:function(){return this.$width},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"stageHeight",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"applicationContext",{get:function(){return this.$appContext},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nativeStage",{get:function(){return this.$appStage},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"resolution",{get:function(){return this.$options.resolution},set:function(t){this.$options.resolution=t,this.$updateScreenSize()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scaleX",{get:function(){return this.$scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scaleY",{get:function(){return this.$scaleY},enumerable:!0,configurable:!0}),s.prototype.setDesignSize=function(t,e){var i=this.$options;i.designWidth=t,i.designHeight=e,this.$updateScreenSize()},s.prototype.calculateStageSize=function(t,e,i,n,s){var r=e,o=i,h=n,a=s,l=e/h||0,c=i/a||0;switch(t){case"exactFit":break;case"fixedHeight":h=Math.round(e/c);break;case"fixedWidth":a=Math.round(i/l);break;case"noBorder":l>c?o=Math.round(a*l):r=Math.round(h*c);break;case"showAll":l>c?r=Math.round(h*c):o=Math.round(a*l);break;case"fixedAuto":h/a>r/o?(c=l,a=Math.round(i/l)):(l=c,h=Math.round(e/c));break;default:h=e,a=i}return{stageWidth:h,stageHeight:a,displayWidth:r,displayHeight:o}},s.prototype.$updateScreenSize=function(){if(!t.HTMLInput.isTyping){var e=this.$appContext.view,i=e.style,n=this.$sizeCalcer.getRect(e,this.$options.fallbackWidth,this.$options.fallbackHeight),s=!1,r=this.$options.orientation;"auto"!=r&&(s="portrait"!=r&&n.height>n.width||"portrait"==r&&n.width>n.height);var o=s?n.height:n.width,h=s?n.width:n.height,a=this.calculateStageSize(this.$options.scaleMode,o,h,this.$options.designWidth,this.$options.designHeight),l=a.stageWidth,c=a.stageHeight,u=a.displayWidth,p=a.displayHeight;e.width!==l&&(e.width=l),e.height!==c&&(e.height=c),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.width=u+"px",i.height=p+"px";var $,d,f=this.$canvasMatrix.identity(),g=s?p:u,y=s?u:p;$=0==this.$options.alignH?0:2==this.$options.alignH?n.width-g:.5*(n.width-g),d=3==this.$options.alignV?0:5==this.$options.alignV?n.height-y:.5*(n.height-y);var m=0;s?"landscape"==this.$options.orientation?(f.rotate(Math.PI/2),f.translate(h-$,d),m=90):(f.rotate(-Math.PI/2),f.translate($,o-d),m=-90):f.translate($,d),s?(f.tx+=this.offsetY,f.ty+=this.offsetX):(f.tx+=this.offsetX,f.ty+=this.offsetY),f.a=this.formatData(f.a),f.d=this.formatData(f.d),f.tx=this.formatData(f.tx),f.ty=this.formatData(f.ty),i.transformOrigin=i.webkitTransformOrigin=i.msTransformOrigin=i.mozTransformOrigin=i.oTransformOrigin="0px 0px 0px",i.transform=i.webkitTransform=i.msTransform=i.mozTransform=i.oTransform="matrix("+f.a+","+f.b+","+f.c+","+f.d+","+f.tx+","+f.ty+")",this.$width=l,this.$height=c,this.$scaleX=l/u,this.$scaleY=c/p;var b=this.$appContext.renderer.plugins.interaction;b.stageRotation=m,b.stageScaleX=this.$scaleX,b.stageScaleY=this.$scaleY,this.$appContext.renderer.resize(l,c),t.HTMLInput.inst.$updateSize(u/l,p/c),this.emit("__sizeChanged",this)}},s.prototype.formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},s.prototype.dispose=function(){for(var t=r.length;t-- >=0;)r[t]===this&&r.splice(t,1)},s}(PIXI.utils.EventEmitter);t.UIStage=s;var r=[],o=NaN;window.addEventListener("resize",function(){isNaN(o)&&(o=window.setTimeout(e,300))})}(fgui||(fgui={}));var PIXI;!function(t){var e;!function(e){var i=function(e){function i(n,s,r){var o=e.call(this,n,s,r)||this;return t.extras.Text.__init||(t.extras.Text.__init=!0,t.TextMetrics.wordWrap=function(e,n,s){s||(s=t.TextMetrics._canvas);for(var r=s.getContext("2d"),o="",h=e.charAt(0),a=e.split("\n"),l=n.wordWrapWidth,c={},u=0;u<a.length;u++){for(var p=l,$=a[u].split(" "),d=0;d<$.length;d++){var f=r.measureText($[d]).width;if(n.breakWords&&f>l)for(var g=$[d].split(""),y=0;y<g.length;y++){var m=g[y],b=g[y+1],v=i.isEmojiChar(m.charCodeAt(0),b?b.charCodeAt(0):0);v>1&&(y++,m+=b);var w=c[m];void 0===w&&(w=r.measureText(m).width,c[m]=w),w>p?(o+="\n"+m,p=l-w):(0===y&&(d>0||" "==h)&&(o+=" "),o+=m,p-=w)}else{var I=f+r.measureText(" ").width;0===d||I>p?(d>0&&(o+="\n"),o+=$[d],p=l-f):(p-=I,o+=" "+$[d])}}u<a.length-1&&(o+="\n")}return o}),o}return __extends(i,e),i.isEmojiChar=function(t,e){var i=t,n="number"==typeof e&&!isNaN(e)&&e>0;if(i>=55296&&56319>=i){if(n){var s=1024*(i-55296)+(e-56320)+65536;if(s>=118784&&128895>=s)return 2}}else{if(i>=8448&&10239>=i||i>=11013&&11015>=i||i>=10548&&10549>=i||i>=12951&&12953>=i||169===i||174===i||12349===i||12336===i||11093===i||11036===i||11035===i||11088===i||8986===i)return 1;if(n&&(8419===e||65039===e||55356===e))return 2}return 0},i.__init=!1,i}(t.Text);e.Text=i}(e=t.extras||(t.extras={}))}(PIXI||(PIXI={}));var fgui;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i.$minHeightID=-1,i.UIOwner=t,i.interactive=i.interactiveChildren=!1,i._texture.noFrame=!1,i._width=i._texture.frame.width,i._height=i._texture.frame.height,i.$minHeight=-1,i._texture.on("update",i.updateFrame,i),i}return __extends(i,e),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this.$minHeight},enumerable:!0,configurable:!0}),i.prototype.$updateMinHeight=function(){(this.style.styleID!=this.$minHeightID||this.$minHeight<=0)&&(this.$minHeight=PIXI.TextMetrics.measureText("",this.style,!1).lineHeight,this.$minHeightID=this.style.styleID)},i.prototype.updateFrame=function(){t.GTimer.inst.callLater(this.internalUpdateFrame,this)},i.prototype.internalUpdateFrame=function(){if(this._texture){var t=this._texture.frame;this._height=Math.max(this._height,this.$minHeight);var e=t.x+this._width,i=t.y+this._height;e>this._texture.baseTexture.width&&(e=this._texture.baseTexture.width-t.x),i>this._texture.baseTexture.height&&(i=this._texture.baseTexture.height-t.y),t.width=e/this.resolution,t.height=i/this.resolution,this._texture.trim.width=t.width,this._texture.trim.height=t.height;var n=this._style.trim?0:this._style.padding;this._texture.trim.x=-n,this._texture.trim.y=-n,this._texture.frame=t}},i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateFrame()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.updateText(!0),this._texture.orig.height},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.updateText(!0),this._texture.orig.width},set:function(t){t!=this.style.wordWrapWidth&&(this.style.wordWrapWidth=t)},enumerable:!0,configurable:!0}),i}(PIXI.extras.Text);t.UITextField=e}(fgui||(fgui={}));var PIXI;!function(t){var e;!function(e){var i=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.stageRotation=0,n.stageScaleX=1,n.stageScaleY=1,n}return __extends(e,t),e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0,s=this.interactionDOMElement;n=s.parentElement?s.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator,o=r.isCocoonJS?this.resolution:1/this.resolution,h=document.documentElement,a=n.left+window.pageXOffset-h.clientLeft,l=n.top+window.pageYOffset-h.clientTop;e-=a,i-=l;var c=e,u=i;90==this.stageRotation?(c=i,u=n.width-e):-90==this.stageRotation&&(c=n.height-i,u=e),c=c*this.stageScaleX*o,u=u*this.stageScaleY*o,t.set(c,u)},e}(t.interaction.InteractionManager);e.InteractionManager=i,t.CanvasRenderer.registerPlugin("interaction",t.extras.InteractionManager),t.WebGLRenderer.registerPlugin("interaction",t.extras.InteractionManager)}(e=t.extras||(t.extras={}))}(PIXI||(PIXI={}));var fgui;!function(t){var e=function(){function t(t,e){this.packageItem=t,this.type=e}return t}();t.DisplayListItem=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(){this.width=0,this.height=0,this.tiledSlices=0,this.interval=0,this.repeatDelay=0}return t.prototype.load=function(){return this.owner.getItemAsset(this)},t.prototype.toString=function(){return this.name},t}();t.PackageItem=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function e(){}return e.setPackageItemExtension=function(t,i){e.packageItemExtensions[t.substring(5)]=i},e.setLoaderExtension=function(t){e.loaderExtension=t},e.newObject=function(i){switch(i.type){case 0:return new t.GImage;case 2:return new t.GMovieClip;case 4:var n=e.packageItemExtensions[i.owner.id+i.id];if(n)return new n;var s=i.owner.getItemAsset(i),r=s.attributes.extention;if(null==r)return new t.GComponent;switch(r){case"Button":return new t.GButton;case"ProgressBar":return new t.GProgressBar;case"Label":return new t.GLabel;case"Slider":return new t.GSlider;case"ScrollBar":return new t.GScrollBar;case"ComboBox":return new t.GComboBox;default:return new t.GComponent}}return null},e.newObjectDirectly=function(i){switch(i){case"image":return new t.GImage;case"movieclip":return new t.GMovieClip;case"component":return new t.GComponent;case"text":return new t.GTextField;case"list":return new t.GList;case"richtext":return new t.GRichTextField;case"inputtext":return new t.GTextInput;case"group":return new t.GGroup;case"graph":return new t.GGraph;case"loader":return null!=e.loaderExtension?new e.loaderExtension:new t.GLoader}return null},e.packageItemExtensions={},e}();t.UIObjectFactory=e}(fgui||(fgui={}));var fgui;!function(t){var e=function(){function t(t,e,i,n,s){this.atlasName=t,this.frame=e,this.orig=i,this.trim=n,this.rotate=s}return t}(),i=function(){function i(){this.$items=[],this.$atlasConfigs={}}return i.getById=function(t){return i.$packageInstById[t]},i.getByName=function(t){return i.$packageInstByName[t]},i.addPackage=function(t){var e=new i;return e.create(t),i.$packageInstById[e.id]=e,i.$packageInstByName[e.name]=e,e.customId=t,e},i.removePackage=function(t){var e=i.$packageInstById[t];e.dispose(),delete i.$packageInstById[e.id],null!=e.$customId&&delete i.$packageInstById[e.$customId],delete i.$packageInstByName[e.name]},i.createObject=function(t,e,n){var s=i.getByName(t);return s?s.createObject(e,n):null},i.createObjectFromURL=function(t,e){var n=i.getItemByURL(t);return n?n.owner.internalCreateObject(n,e):null},i.getItemURL=function(t,e){var n=i.getByName(t);if(!n)return null;var s=n.$itemsByName[e];return s?"ui://"+n.id+s.id:null},i.getItemByURL=function(t){var e=t.indexOf("//");if(-1==e)return null;var n,s=t.indexOf("/",e+2);if(-1==s){if(t.length>13){var r=t.substr(5,8);if(n=i.getById(r),null!=n){var o=t.substr(13);return n.getItemById(o)}}}else{var h=t.substr(e+2,s-e-2);if(n=i.getByName(h),null!=n){var a=t.substr(s+1);return n.getItemByName(a)}}return null},i.getBitmapFontByURL=function(t){return i.$bitmapFonts[t]},i.setStringsSource=function(e){i.$stringsSource={};var n=t.utils.XmlParser.tryParse(e);n.children.forEach(function(t){if("string"==t.nodeName){var e=t.attributes.name,n=e.indexOf("-");if(-1==n)return;var s=t.children.length>0?t.children[0].text:"",r=e.substr(0,n),o=e.substr(n+1),h=i.$stringsSource[r];h||(h={},i.$stringsSource[r]=h),h[o]=s}})},i.normalizeURL=function(t){if(null==t)return null;var e=t.indexOf("//");if(-1==e)return null;var n=t.indexOf("/",e+2);if(-1==n)return t;var s=t.substr(e+2,n-e-2),r=t.substr(n+1);return i.getItemURL(s,r)},i.prototype.create=function(n){var s=this;this.$resKey=n;var r=t.utils.AssetLoader.resourcesPool[this.$resKey];if(r||(r=t.utils.AssetLoader.resourcesPool[this.$resKey+"_fui"]),!r)throw new Error("Resource '"+this.$resKey+'\' not found, please make sure that you use "new fgui.utils.AssetLoader" to load resources instead of " PIXI.loaders.Loader".');if(!(r.data&&r.data instanceof ArrayBuffer))throw new Error("Resource '"+this.$resKey+"' is not a proper binary resource, please load it as binary format by calling yourLoader.add(name, url, { loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR, xhrType: PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER })");this.decompressPackage(r.data);var o=this.getResDescriptor("sprites.bytes");o&&o.split(i.sep1).forEach(function(t,n){if(n>=1&&t&&t.length){var r=t.split(i.sep2),o=void 0,h=r[0],a=parseInt(r[1]);if(a>=0)o="atlas"+a;else{var l=h.indexOf("_");o=-1==l?"atlas_"+h:"atlas_"+h.substr(0,l)}var c=new e(o);c.frame=new PIXI.Rectangle(parseInt(r[2]),parseInt(r[3]),parseInt(r[4]),parseInt(r[5])),s.$atlasConfigs[h]=c}}),o=this.getResDescriptor("package.xml");var h=t.utils.XmlParser.tryParse(o);this.$id=h.attributes.id,this.$name=h.attributes.name;var a=h.children[0].children;this.$itemsById={},this.$itemsByName={},a.forEach(function(e){var n=new t.PackageItem;if(n.type=t.ParsePackageItemType(e.nodeName),n.id=e.attributes.id,n.name=e.attributes.name,n.file=e.attributes.file,o=e.attributes.size){var r=o.split(i.sep0);n.width=parseInt(r[0]),n.height=parseInt(r[1])}switch(n.type){case 0:if(o=e.attributes.scale,"9grid"==o){if(n.scale9Grid=new PIXI.Rectangle,o=e.attributes.scale9grid){var r=o.split(i.sep0);n.scale9Grid.x=parseInt(r[0]),n.scale9Grid.y=parseInt(r[1]),n.scale9Grid.width=parseInt(r[2]),n.scale9Grid.height=parseInt(r[3]),o=e.attributes.gridTile,o&&(n.tiledSlices=parseInt(o))}}else"tile"==o&&(n.scaleByTile=!0)}n.owner=s,s.$items.push(n),s.$itemsById[n.id]=n,null!=n.name&&(s.$itemsByName[n.name]=n)},this),this.$items.forEach(function(t){6==t.type&&(s.loadFont(t),i.$bitmapFonts[t.bitmapFont.id]=t.bitmapFont)},this)},i.prototype.decompressPackage=function(e){this.$resData={};for(var i,n,s=new Zlib.RawInflate(e),r=s.decompress(),o=t.utils.RawByte.decodeUTF8(r),h=0;;){var a=o.indexOf("|",h);if(-1==a)break;i=o.substring(h,a),h=a+1,a=o.indexOf("|",h),n=parseInt(o.substring(h,a)),h=a+1,this.$resData[i]=o.substr(h,n),h+=n}},i.prototype.dispose=function(){var e=this;this.$items.forEach(function(n){var s=n.texture;null!=s?(s.destroy(),PIXI.Texture.removeFromCache(s)):null!=n.frames?n.frames.forEach(function(t){s=t.texture,s&&(s.destroy(),PIXI.Texture.removeFromCache(s))}):null!=n.bitmapFont&&delete i.$bitmapFonts[n.bitmapFont.id];var r=e.$atlasConfigs[n.id];r&&t.utils.AssetLoader.destroyResource(e.$resKey+"@"+r.atlasName)},this),t.utils.AssetLoader.destroyResource(""+this.$resKey)},Object.defineProperty(i.prototype,"id",{get:function(){return this.$id},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this.$name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customId",{get:function(){return this.$customId},set:function(t){null!=this.$customId&&delete i.$packageInstById[this.$customId],this.$customId=t,null!=this.$customId&&(i.$packageInstById[this.$customId]=this)},enumerable:!0,configurable:!0}),i.prototype.createObject=function(t,e){var i=this.$itemsByName[t];return i?this.internalCreateObject(i,e):null},i.prototype.internalCreateObject=function(e,n){void 0===n&&(n=null);var s=4==e.type&&null!=n?new n:t.UIObjectFactory.newObject(e);return null==s?null:(i.$constructingObjects++,s.packageItem=e,s.constructFromResource(),i.$constructingObjects--,s)},i.prototype.getItemById=function(t){return this.$itemsById[t]},i.prototype.getItemByName=function(t){return this.$itemsByName[t]},i.prototype.getItemAssetByName=function(t){var e=this.$itemsByName[t];if(null==e)throw new Error("Resource '"+t+"' not found");return this.getItemAsset(e)},i.prototype.createSpriteTexture=function(t,e){var i=this.$itemsById[e.atlasName];if(null!=i){var n=this.getItemAsset(i);if(!n||!n.baseTexture)return null;e.texCacheID||(e.texCacheID=this.$resKey+"@"+e.atlasName+"@"+t);var s=PIXI.utils.TextureCache[e.texCacheID];return s||(s=new PIXI.Texture(n.baseTexture,e.frame,e.orig,e.trim,e.rotate),PIXI.Texture.addToCache(s,e.texCacheID)),s}return null},i.prototype.getItemAsset=function(e){switch(e.type){case 0:if(!e.decoded){e.decoded=!0;var i=this.$atlasConfigs[e.id];null!=i&&(e.texture=this.createSpriteTexture(e.id,i))}return e.texture;case 7:if(!e.decoded){e.decoded=!0;var n=null!=e.file&&e.file.length>0?e.file:e.id+".png",s=this.$resKey+"@"+t.utils.StringUtil.getFileName(n),r=t.utils.AssetLoader.resourcesPool[s];if(!r)throw new Error(s+" not found in fgui.utils.AssetLoader.resourcesPool, please use new AssetLoader() to load assets instead of using new PIXI.loaders.Loader(). besides, AssetLoader is a sub-class from PIXI.loaders.Loader so they have the same usage.");e.texture=r.texture,e.texture||(r=t.utils.AssetLoader.resourcesPool[this.$resKey+"@"+n.replace(".","_")],e.texture=r.texture)}return e.texture;case 3:return e.decoded=!1,null;case 6:return e.decoded||(e.decoded=!0,this.loadFont(e)),e.bitmapFont;case 2:return e.decoded||(e.decoded=!0,this.loadMovieClip(e)),e.frames;case 4:if(!e.decoded){e.decoded=!0;var o=this.getResDescriptor(e.id+".xml"),h=t.utils.XmlParser.tryParse(o);e.componentData=h,this.loadComponentChildren(e),this.loadComponentTranslation(e)}return e.componentData;default:return t.utils.AssetLoader.resourcesPool[this.$resKey+"@"+e.id]}},i.prototype.loadComponentChildren=function(e){var n=t.utils.XmlParser.getChildNodes(e.componentData,"displayList");null!=n&&n.length>0?(e.displayList=[],n[0].children.forEach(function(n){var s,r=n.nodeName,o=n.attributes.src;if(o){var h=n.attributes.pkg,a=void 0;a=h&&h!=e.owner.id?i.getById(h):e.owner;var l=null!=a?a.getItemById(o):null;s=null!=l?new t.DisplayListItem(l,null):new t.DisplayListItem(null,r)}else s="text"==r&&"true"==n.attributes.input?new t.DisplayListItem(null,"inputtext"):new t.DisplayListItem(null,r);s.desc=n,e.displayList.push(s)})):e.displayList=[]},i.prototype.getResDescriptor=function(t){return this.$resData[t]},i.prototype.loadComponentTranslation=function(e){if(null!=i.$stringsSource){var n=i.$stringsSource[this.id+e.id];if(null!=n){var s,r,o,h,a,l;e.displayList.forEach(function(e){r=e.desc,h=r.nodeName,a=r.attributes.id,l=r.attributes.tooltips,l&&(s=n[a+"-tips"],void 0!=s&&(r.attributes.tooltips=s));var i=t.utils.XmlParser.getChildNodes(r,"gearText");if(o=i&&i[0],o&&(s=n[a+"-texts"],void 0!=s&&(o.attributes.values=s),s=n[a+"-texts_def"],void 0!=s&&(o.attributes["default"]=s)),"text"==h||"richtext"==h)s=n[a],void 0!=s&&(r.attributes.text=s),s=n[a+"-prompt"],void 0!=s&&(r.attributes.prompt=s);else if("list"==h)r.children.forEach(function(t,e){"item"==t.nodeName&&(s=n[a+"-"+e],void 0!=s&&(t.attributes.title=s))});else if("component"==h){if(i=t.utils.XmlParser.getChildNodes(r,"Button"),o=i&&i[0])return s=n[a],void 0!=s&&(o.attributes.title=s),s=n[a+"-0"],void(void 0!=s&&(o.attributes.selectedTitle=s));if(i=t.utils.XmlParser.getChildNodes(r,"Label"),o=i&&i[0])return s=n[a],void(void 0!=s&&(o.attributes.title=s));if(i=t.utils.XmlParser.getChildNodes(r,"ComboBox"),o=i&&i[0])return s=n[a],void 0!=s&&(o.attributes.title=s),void o.children.forEach(function(t,e){"item"==t.nodeName&&(s=n[a+"-"+e],void 0!=s&&(t.attributes.title=s))})}})}}},i.prototype.loadMovieClip=function(e){var n,s=this,r=t.utils.XmlParser.tryParse(this.getResDescriptor(e.id+".xml"));n=r.attributes.interval,null!=n&&(e.interval=parseInt(n)),n=r.attributes.swing,null!=n&&(e.swing="true"==n),n=r.attributes.repeatDelay,null!=n&&(e.repeatDelay=parseInt(n)),e.frames=[];var o=r.children[0].children;o.forEach(function(r,o){var h=new t.Frame;n=r.attributes.rect;var a=n.split(i.sep0),l=new PIXI.Rectangle(parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3]));if(n=r.attributes.addDelay,n&&(h.addDelay=parseInt(n)),e.frames.push(h),!(l.width<=0)){n=r.attributes.sprite,n=n?e.id+"_"+n:e.id+"_"+o;var c=s.$atlasConfigs[n];null!=c&&(c.trim=l,h.texture=s.createSpriteTexture(n,c))}})},i.prototype.loadFont=function(e){var n=this,s=new t.BitmapFont;s.id="ui://"+this.id+e.id;var r,o,h=this.getResDescriptor(e.id+".fnt"),a=h.split(i.sep1),l={},c=!1,u=0,p=0,$=!1,d=0,f=0,g=0,y=0;a.forEach(function(a){if(a&&a.length){h=t.utils.StringUtil.trim(a);var m=h.split(i.sep2);if(m.forEach(function(t){var e=t.split(i.sep3);l[e[0]]=e[1]}),h=m[0],"char"==h){var b=new t.BMGlyph;b.x=parseInt(l.x)||0,b.y=parseInt(l.y)||0,b.offsetX=parseInt(l.xoffset)||0,b.offsetY=parseInt(l.yoffset)||0,b.width=parseInt(l.width)||0,b.height=parseInt(l.height)||0,y=Math.max(b.height,y),b.advance=parseInt(l.xadvance)||0,void 0!=l.chnl&&(b.channel=parseInt(l.chnl),15==b.channel?b.channel=4:1==b.channel?b.channel=3:2==b.channel?b.channel=2:b.channel=1),c?null!=o&&(b.texture=new PIXI.Texture(o.baseTexture,new PIXI.Rectangle(b.x+d,b.y+f,b.width,b.height))):l.img&&(r=n.$itemsById[l.img],null!=r&&(r.load(),b.width=r.width,b.height=r.height,b.texture=r.texture)),c?b.lineHeight=g:(0==b.advance&&(0==p?b.advance=b.offsetX+b.width:b.advance=p),b.lineHeight=b.offsetY<0?b.height:b.offsetY+b.height,u>0&&b.lineHeight<u&&(b.lineHeight=u)),s.glyphs[String.fromCharCode(0|+l.id)]=b}else if("info"==h){if(c=null!=l.face,l.size&&(u=parseInt(l.size)),$="true"==l.resizable,c){var v=n.$atlasConfigs[e.id];if(null!=v){d=v.frame.x,f=v.frame.y;var w=n.$itemsById[v.atlasName];null!=w&&(o=n.getItemAsset(w))}}}else"common"==h&&(l.lineHeight&&(g=parseInt(l.lineHeight)),0==u?u=g:0==g&&(g=u),l.xadvance&&(p=parseInt(l.xadvance)))}}),0==u&&y>0&&(u=y),s.ttf=c,s.size=u,s.resizable=$,e.bitmapFont=s},i.$constructingObjects=0,i.$packageInstById={},i.$packageInstByName={},i.$bitmapFonts={},i.$stringsSource=null,i.sep0=",",i.sep1="\n",i.sep2=" ",i.sep3="=",i}();t.UIPackage=i}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(t){function e(e,i){return t.call(this,e,i)||this}return __extends(e,t),e.prototype._onComplete=function(){e.addResources(this.resources),t.prototype._onComplete.call(this)},Object.defineProperty(e,"resourcesPool",{get:function(){return e.$resources},enumerable:!0,configurable:!0}),e.destroyResource=function(t){var i=e.$resources[t];i&&(i.isComplete||i.abort(),i.children=null,i.data=null,i.texture&&i.texture.destroy(),
i.textures=null,i.xhr=null,e.$resources[t]=null,delete e.$resources[t])},e.addResources=function(t){if(t)for(var i in t)e.$resources[i]=t[i]},e.$resources={},e}(PIXI.loaders.Loader);t.AssetLoader=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){}return t.create=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return e?function(){var n=arguments.length>0?[].concat(Array.prototype.slice.call(arguments)).concat(i):[].concat(i);t.apply(e,n)}:t},t}();t.Binder=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this._raw=[],this.h=0,this.s=0,this.c=0,this.b=0,this.setColor(t,e,i,n)}return Object.defineProperty(t.prototype,"hue",{get:function(){return this.h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this.b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.c},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.s},enumerable:!0,configurable:!0}),t.prototype.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},t.prototype.reset=function(){return this.copy(t.IDENTITY_MATRIX)},t.prototype.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},t.prototype.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(this.b=t,t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},t.prototype.adjustContrast=function(e){if(0==e||isNaN(e))return this;this.c=e,e=this._cleanValue(e,100);var i,n=1;return 0>e?i=n+e/100*n:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=i*n+n),this._multiplyMatrix([i/n,0,0,0,.5*(n-i),0,i/n,0,0,.5*(n-i),0,0,i/n,0,.5*(n-i),0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustSaturation=function(t){if(0==t||isNaN(t))return this;this.s=t,t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,n=.6094,s=.082;return this._multiplyMatrix([i*(1-e)+e,n*(1-e),s*(1-e),0,0,i*(1-e),n*(1-e)+e,s*(1-e),0,0,i*(1-e),n*(1-e),s*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.adjustHue=function(t){if(0==t||isNaN(t))return this;this.h=t,t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,s=.715,r=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,s+e*-s+i*-s,r+e*-r+i*(1-r),0,0,n+e*-n+.143*i,s+e*(1-s)+.14*i,r+e*-r+i*-.283,0,0,n+e*-n+i*-(1-n),s+e*-s+i*s,r+e*(1-r)+i*r,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.prototype.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},t.prototype.clone=function(){return(new t).copy(this._raw)},t.prototype.toArray=function(){for(var e=[],i=0,n=t.LENGTH;n>i;i++)e[i]=this._raw[i];return e},t.prototype.copy=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this._raw[n]=e[n];return this},t.prototype._multiplyMatrix=function(t){var e,i,n,s=[];for(e=0;5>e;e++){for(i=0;5>i;i++)s[i]=this._raw[i+5*e];for(i=0;5>i;i++){var r=0;for(n=0;5>n;n++)r+=t[i+5*n]*s[n];this._raw[i+5*e]=r}}},t.prototype._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},t.prototype._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,t}();t.ColorMatrix=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(e){var i=function(){function e(){this.$agent=new t.GLoader,this.$agent.draggable=!0,this.$agent.touchable=!1,this.$agent.setSize(100,100),this.$agent.setPivot(.5,.5,!0),this.$agent.align="center",this.$agent.verticalAlign=1,this.$agent.sortingOrder=1e6,this.$agent.on("__dragEnd",this.$dragEnd,this)}return Object.defineProperty(e.prototype,"dragAgent",{get:function(){return this.$agent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragging",{get:function(){return null!=this.$agent.parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceObject",{get:function(){return this.$sourceObject},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(e,i,n,s){if(void 0===s&&(s=-1),!this.isDragging){this.$sourceObject=e,this.$sourceData=n,this.$agent.url=i,t.GRoot.inst.addChild(this.$agent);var r=t.GRoot.inst.globalToLocal(t.GRoot.statusData.mouseX,t.GRoot.statusData.mouseY);this.$agent.setXY(r.x,r.y),this.$agent.startDrag(s)}},e.prototype.cancel=function(){null!=this.$agent.parent&&(this.$agent.stopDrag(),t.GRoot.inst.removeChild(this.$agent),this.$sourceData=null)},e.prototype.$dragEnd=function(e){if(this.isDragging){t.GRoot.inst.removeChild(this.$agent);var i=this.$sourceData;this.$sourceData=null;for(var n=t.GRoot.inst.getObjectUnderPoint(e.data.global.x,e.data.global.y);null!=n;){if(n.hasListener("__dragDrop"))return n.requestFocus(),e.currentTarget=n.displayObject,void n.emit("__dragDrop",e,i);n=n.parent}}},e}();e.DragIndicator=i}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(e){var i=function(){function e(e){this.$inited=!1,this.$restrictString=null,this.$restrictRegex=null,this.$focused=!1,this.$textField=e,this.$input=new t.InputElement(e)}return e.prototype.initialize=function(){this.$inited||(this.$input.$addToStage(),this.$input.on("updateText",this.updateText,this),this.$input.on("__focusChanged",this.focusHandler,this),this.$textField.on(t.InteractiveEvents.Down,this.textFieldDownHandler,this),this.$inited=!0)},e.prototype.textFieldDownHandler=function(){this.$onFocus()},e.prototype.destroy=function(){this.$inited&&(this.$input.$removeFromStage(),this.$textField.off(t.InteractiveEvents.Down,this.textFieldDownHandler,this),t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this.$input.off("updateText",this.updateText,this),this.$input.off("__focusChanged",this.focusHandler,this),this.$inited=!1)},Object.defineProperty(e.prototype,"text",{get:function(){return this.$input.text},set:function(t){this.$input.text=t},enumerable:!0,configurable:!0}),e.prototype.setColor=function(t){return this.$input.setColor(t)},e.prototype.updateText=function(){var t=this.$input.text,e=!1;if(null!=this.$restrictRegex){var i=t.match(this.$restrictRegex);t=i?i.join(""):"",e=!0}e&&this.$input.text!=t&&(this.$input.text=t),this.$textField.text=this.$input.text,this.$textField.emit("__textChange",this.$textField)},e.prototype.onStageDown=function(e){var i=t.GObject.castFromNativeObject(e.currentTarget);i!=this.$textField&&this.$input.$hide()},e.prototype.focusHandler=function(e){"focus"==e?this.$focused||(this.$focused=!0,this.$textField.$isTyping=!0,this.$textField.alpha=0,this.$textField.emit("__focusChanged","focus",this.$textField)):"blur"==e&&this.$focused&&(this.$focused=!1,t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),this.$textField.$isTyping=!1,this.$textField.alpha=1,this.$input.$onBlur(),this.$textField.emit("__focusChanged","blur",this.$textField))},Object.defineProperty(e.prototype,"isFocused",{get:function(){return this.$focused},enumerable:!0,configurable:!0}),e.prototype.$getProperty=function(t){return this.$inited&&this.$input.getAttribute(t)||null},e.prototype.$setProperty=function(t,e){this.$inited&&this.$input.setAttribute(t,e)},Object.defineProperty(e.prototype,"$restrict",{get:function(){return this.$restrictString},set:function(t){this.$restrictString=t,null!=this.$restrictString&&this.$restrictString.length>0?this.$restrictRegex=new RegExp(this.$restrictString):this.$restrictRegex=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.$type},set:function(t){t!=this.$type&&(this.$type=t)},enumerable:!0,configurable:!0}),e.prototype.tryHideInput=function(){!this.$textField.visible&&this.$input&&this.$input.$removeFromStage()},e.prototype.$updateProperties=function(){return this.isFocused?(this.$input.resetInput(),void this.tryHideInput()):(this.$input.text=this.$textField.text,this.$input.resetInput(),void this.tryHideInput())},e.prototype.$onFocus=function(){var e=this;this.$textField.visible&&!this.$focused&&(t.GRoot.inst.off(t.InteractiveEvents.Down,this.onStageDown,this),t.GTimer.inst.callLater(function(){t.GRoot.inst.on(t.InteractiveEvents.Down,e.onStageDown,e)},this),this.$input.$show())},e}();e.InputDelegate=i}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.parse=function(t){if(!t)return void(this.left=this.right=this.top=this.bottom=0);var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.left=this.right=this.top=this.bottom=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])},t.prototype.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}();t.Margin=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){}return t.clamp=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.clamp01=function(t){return t>1?t=1:0>t&&(t=0),t},t.isNumber=function(t){return"number"!=typeof t?!1:!isNaN(t)},t.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1},t.angleToRadian=function(e){return e*t.RADIAN},t.RADIAN=Math.PI/180,t}();t.NumberUtil=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){}return t.inRange=function(t,e,i){return t>=e&&i>=t},t.decodeUTF8=function(e){for(var i,n=0,s="",r=0,o=0,h=0,a=0;e.length>n;){var l=e[n++];if(-1==l)i=0!=o?65533:-1;else if(0==o)t.inRange(l,0,127)?i=l:(t.inRange(l,194,223)?(o=1,a=128,r=l-192):t.inRange(l,224,239)?(o=2,a=2048,r=l-224):t.inRange(l,240,244)&&(o=3,a=65536,r=l-240),r*=Math.pow(64,o),i=null);else if(t.inRange(l,128,191))if(h+=1,r+=(l-128)*Math.pow(64,o-h),h!==o)i=null;else{var c=r,u=a;r=0,o=0,h=0,a=0,i=t.inRange(c,u,1114111)&&!this.inRange(c,55296,57343)?c:l}else r=0,o=0,h=0,a=0,n--,i=65533;null!==i&&-1!==i&&(65535>=i?i>0&&(s+=String.fromCharCode(i)):(i-=65536,s+=String.fromCharCode(55296+(i>>10&1023)),s+=String.fromCharCode(56320+(1023&i))))}return s},t}();t.RawByte=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){}return t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("\\"),-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("."),-1!=e?t.substring(0,e):t},t.startsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.endsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.trim=function(e){return t.trimLeft(t.trimRight(e))},t.trimLeft=function(t){var e,i="";for(e=0;e<t.length&&(i=t.charAt(e)," "==i||"\n"==i||"\r"==i);e++);return t.substr(e)},t.trimRight=function(t){var e,i="";for(e=t.length-1;e>=0&&(i=t.charAt(e)," "==i||"\n"==i||"\r"==i);e--);return t.substring(0,e+1)},t.convertToHtmlColor=function(t,e){void 0===e&&(e=!1);var i;i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),s=(t>>8&255).toString(16),r=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),"#"+i+n+s+r},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},t}();t.StringUtil=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(){this.$readPos=0,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this.$handlers={url:this.onTag_URL,img:this.onTag_IMG,b:this.onTag_Simple,i:this.onTag_Simple,u:this.onTag_Simple,sup:this.onTag_Simple,sub:this.onTag_Simple,color:this.onTag_COLOR,font:this.onTag_FONT,size:this.onTag_SIZE}}return t.prototype.onTag_URL=function(t,e,i){if(e)return"</a>";if(null!=i)return'<a href="'+i+'" target="_blank">';var n=this.getTagText();return'<a href="'+n+'" target="_blank">'},t.prototype.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},t.prototype.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},t.prototype.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},t.prototype.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},t.prototype.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},t.prototype.getTagText=function(t){void 0===t&&(t=!1);var e=this.$text.indexOf("[",this.$readPos);if(-1==e)return null;var i=this.$text.substring(this.$readPos,e);return t&&(this.$readPos=e),i},t.prototype.parseStyle=function(t){return[]},t.inst=new t,t}();t.UBBParser=e}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));var fgui;!function(t){var e;!function(t){var e=function(){function t(t){this.nodeName=t.nodeName,this.context=t,this.type=t.nodeType,this.text=this.type==Node.COMMENT_NODE||this.type==Node.TEXT_NODE?this.context.textContent:null}return Object.defineProperty(t.prototype,"children",{get:function(){return this.$children||(this.$children=i.getChildNodes(this)),this.$children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this.$attributes||(this.$attributes=i.getNodeAttributes(this)),this.$attributes},enumerable:!0,configurable:!0}),t}();t.XmlNode=e;var i=function(){function t(){}return t.tryParse=function(i,n){void 0===n&&(n="application/xml");var s=t.$parser.parseFromString(i,n);return s&&s.childNodes&&s.childNodes.length>=1?new e(s.firstChild):null},t.getXmlRoot=function(t){if(!t||!t.context)throw new Error("Invalid xml node");for(var i=t.context;null!=i.parentNode;)i=i.parentNode;return i==t.context?t:new e(i)},t.getChildNodes=function(t,i){void 0===i&&(i=null);var n=t.context.childNodes,s=[];if(!n||n.length<=0)return s;for(var r=n.length,o=0;r>o;o++){var h=n.item(o);h.nodeType!=Node.TEXT_NODE&&(!i||i&&i.length>0&&h.nodeName.toLowerCase()==i.toLowerCase())&&s.push(new e(h))}return s},t.getNodeAttributes=function(t){var e=t.context.attributes,i={};if(!e||e.length<=0)return i;for(var n=e.length,s=0;n>s;s++){var r=e.item(s);i[r.nodeName]=r.nodeValue}return i},t.$parser=new DOMParser,t}();t.XmlParser=i}(e=t.utils||(t.utils={}))}(fgui||(fgui={}));
//# sourceMappingURL=./dist/fairygui.min.js.map